"use strict";(self.webpackChunkprocake=self.webpackChunkprocake||[]).push([[179],{2011:(at,Ce,L)=>{L.d(Ce,{Dh:()=>ce,GT:()=>ve,cc:()=>De,hO:()=>$e,on:()=>$,pX:()=>ne,xv:()=>de});var l=L(5e3),Q=L(127),F=L(5813);at=L.hmd(at);const re=["ngOnDestroy"],ne=(pe,Le,Ve,Pe={})=>new Proxy(pe,{get:(et,Ae)=>Ve.runOutsideAngular(()=>{var it;if(pe[Ae])return(null===(it=null==Pe?void 0:Pe.spy)||void 0===it?void 0:it.get)&&Pe.spy.get(Ae,pe[Ae]),pe[Ae];if(re.indexOf(Ae)>-1)return()=>{};const Ge=Le.toPromise().then(mt=>{const J=mt&&mt[Ae];return"function"==typeof J?J.bind(mt):J&&J.then?J.then(me=>Ve.run(()=>me)):Ve.run(()=>J)});return new Proxy(()=>{},{get:(mt,J)=>Ge[J],apply:(mt,J,me)=>Ge.then(ye=>{var we;const Oe=ye&&ye(...me);return(null===(we=null==Pe?void 0:Pe.spy)||void 0===we?void 0:we.apply)&&Pe.spy.apply(Ae,me,Oe),Oe})})})}),ve=(pe,Le)=>{Le.forEach(Ve=>{Object.getOwnPropertyNames(Ve.prototype||Ve).forEach(Pe=>{Object.defineProperty(pe.prototype,Pe,Object.getOwnPropertyDescriptor(Ve.prototype||Ve,Pe))})})};class ie{constructor(Le){return Le}}const ce=new l.OlP("angularfire2.app.options"),de=new l.OlP("angularfire2.app.name");function $(pe,Le,Ve){const et="object"==typeof Ve&&Ve||{};et.name=et.name||"string"==typeof Ve&&Ve||"[DEFAULT]";const it=Q.Z.apps.filter(Ge=>Ge&&Ge.name===et.name)[0]||Le.runOutsideAngular(()=>Q.Z.initializeApp(pe,et));try{JSON.stringify(pe)!==JSON.stringify(it.options)&&H("error",`${it.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ge){}return new ie(it)}const H=(pe,...Le)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[pe](...Le)},te={provide:ie,useFactory:$,deps:[ce,l.R0b,[new l.FiY,de]]};let $e=(()=>{class pe{constructor(Ve){Q.Z.registerVersion("angularfire",F.q4.full,"core"),Q.Z.registerVersion("angularfire",F.q4.full,"app-compat"),Q.Z.registerVersion("angular",l.q4F.full,Ve.toString())}static initializeApp(Ve,Pe){return{ngModule:pe,providers:[{provide:ce,useValue:Ve},{provide:de,useValue:Pe}]}}}return pe.\u0275fac=function(Ve){return new(Ve||pe)(l.LFG(l.Lbi))},pe.\u0275mod=l.oAB({type:pe}),pe.\u0275inj=l.cJS({providers:[te]}),pe})();function De(pe,Le,Ve,Pe,et){const[,Ae,it]=globalThis.\u0275AngularfireInstanceCache.find(Ge=>Ge[0]===pe)||[];if(Ae)return function Re(pe,Le){try{return pe.toString()===Le.toString()}catch(Ve){return pe===Le}}(et,it)||(he("error",`${Le} was already initialized on the ${Ve} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:et,was:it})),Ae;{const Ge=Pe();return globalThis.\u0275AngularfireInstanceCache.push([pe,Ge,et]),Ge}}const Ue=!!at.hot,he=(pe,...Le)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[pe](...Le)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,Ce,L)=>{L.d(Ce,{q4:()=>Ac,iC:()=>Po,fc:()=>Sr,HU:()=>iu,vb:()=>eh,JM:()=>ep});var l=L(5e3),Q=L(5867),F=L(5861),re=L(9681),ne=L(2090),ve=L(4859),ie=L(1877);const ce="@firebase/installations",H="w:0.5.7",te="FIS_v2",pe=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Le(I){return I instanceof ne.ZR&&I.code.includes("request-failed")}function Ve({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Pe(I){return{token:I.token,requestStatus:2,expiresIn:me(I.expiresIn),creationTime:Date.now()}}function et(I,T){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,F.Z)(function*(I,T){const U=(yield T.json()).error;return pe.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function it({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Ge(I,{refreshToken:T}){const N=it(I);return N.append("Authorization",function ye(I){return`${te} ${I}`}(T)),N}function mt(I){return J.apply(this,arguments)}function J(){return(J=(0,F.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function me(I){return Number(I.replace("s","000"))}function we(I,T){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:N}){const U=Ve(I),z=it(I),Y=T.getImmediate({optional:!0});if(Y){const ct=yield Y.getHeartbeatsHeader();ct&&z.append("x-firebase-client",ct)}const We={method:"POST",headers:z,body:JSON.stringify({fid:N,authVersion:te,appId:I.appId,sdkVersion:H})},It=yield mt(()=>fetch(U,We));if(It.ok){const ct=yield It.json();return{fid:ct.fid||N,registrationStatus:2,refreshToken:ct.refreshToken,authToken:Pe(ct.authToken)}}throw yield et("Create Installation",It)})).apply(this,arguments)}function oe(I){return new Promise(T=>{setTimeout(T,I)})}const zt=/^[cdef][\w-]{21}$/;function ut(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const N=function lt(I){return function Ot(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return zt.test(N)?N:""}catch(I){return""}}function xn(I){return`${I.appName}!${I.appId}`}const fn=new Map;function ns(I,T){const N=xn(I);Fi(N,T),function Qn(I,T){const N=function un(){return!hr&&"BroadcastChannel"in self&&(hr=new BroadcastChannel("[Firebase] FID Change"),hr.onmessage=I=>{Fi(I.data.key,I.data.fid)}),hr}();N&&N.postMessage({key:I,fid:T}),function Fn(){0===fn.size&&hr&&(hr.close(),hr=null)}()}(N,T)}function Fi(I,T){const N=fn.get(I);if(N)for(const U of N)U(T)}let hr=null;const Fr="firebase-installations-store";let xe=null;function Ir(){return xe||(xe=(0,ne.X3)("firebase-installations-database",1,(I,T)=>{0===T&&I.createObjectStore(Fr)})),xe}function rt(I,T){return vi.apply(this,arguments)}function vi(){return(vi=(0,F.Z)(function*(I,T){const N=xn(I),z=(yield Ir()).transaction(Fr,"readwrite"),Y=z.objectStore(Fr),ue=yield Y.get(N);return yield Y.put(T,N),yield z.complete,(!ue||ue.fid!==T.fid)&&ns(I,T.fid),T})).apply(this,arguments)}function ln(I){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,F.Z)(function*(I){const T=xn(I),U=(yield Ir()).transaction(Fr,"readwrite");yield U.objectStore(Fr).delete(T),yield U.complete})).apply(this,arguments)}function wi(I,T){return rs.apply(this,arguments)}function rs(){return(rs=(0,F.Z)(function*(I,T){const N=xn(I),z=(yield Ir()).transaction(Fr,"readwrite"),Y=z.objectStore(Fr),ue=yield Y.get(N),We=T(ue);return void 0===We?yield Y.delete(N):yield Y.put(We,N),yield z.complete,We&&(!ue||ue.fid!==We.fid)&&ns(I,We.fid),We})).apply(this,arguments)}function Mn(I){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,F.Z)(function*(I){let T;const N=yield wi(I.appConfig,U=>{const z=ms(U),Y=ju(I,z);return T=Y.registrationPromise,Y.installationEntry});return""===N.fid?{installationEntry:yield T}:{installationEntry:N,registrationPromise:T}})).apply(this,arguments)}function ms(I){return pt(I||{fid:ut(),registrationStatus:0})}function ju(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(pe.create("app-offline"))};const N={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},U=function Lt(I,T){return ot.apply(this,arguments)}(I,N);return{installationEntry:N,registrationPromise:U}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:bt(I)}:{installationEntry:T}}function ot(){return(ot=(0,F.Z)(function*(I,T){try{const N=yield we(I,T);return rt(I.appConfig,N)}catch(N){throw Le(N)&&409===N.customData.serverCode?yield ln(I.appConfig):yield rt(I.appConfig,{fid:T.fid,registrationStatus:0}),N}})).apply(this,arguments)}function bt(I){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,F.Z)(function*(I){let T=yield Us(I.appConfig);for(;1===T.registrationStatus;)yield oe(100),T=yield Us(I.appConfig);if(0===T.registrationStatus){const{installationEntry:N,registrationPromise:U}=yield Mn(I);return U||N}return T})).apply(this,arguments)}function Us(I){return wi(I,T=>{if(!T)throw pe.create("installation-not-found");return pt(T)})}function pt(I){return function Cn(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Dr(I,T){return ui.apply(this,arguments)}function ui(){return(ui=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:T},N){const U=_t(I,N),z=Ge(I,N),Y=T.getImmediate({optional:!0});if(Y){const ct=yield Y.getHeartbeatsHeader();ct&&z.append("x-firebase-client",ct)}const We={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:H,appId:I.appId}})},It=yield mt(()=>fetch(U,We));if(It.ok)return Pe(yield It.json());throw yield et("Generate Auth Token",It)})).apply(this,arguments)}function _t(I,{fid:T}){return`${Ve(I)}/${T}/authTokens:generate`}function Rn(I){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,F.Z)(function*(I,T=!1){let N;const U=yield wi(I.appConfig,Y=>{if(!Xt(Y))throw pe.create("not-registered");const ue=Y.authToken;if(!T&&Z(ue))return Y;if(1===ue.requestStatus)return N=Ye(I,T),Y;{if(!navigator.onLine)throw pe.create("app-offline");const We=W(Y);return N=wt(I,We),We}});return N?yield N:U.authToken})).apply(this,arguments)}function Ye(I,T){return be.apply(this,arguments)}function be(){return(be=(0,F.Z)(function*(I,T){let N=yield Je(I.appConfig);for(;1===N.authToken.requestStatus;)yield oe(100),N=yield Je(I.appConfig);const U=N.authToken;return 0===U.requestStatus?Rn(I,T):U})).apply(this,arguments)}function Je(I){return wi(I,T=>{if(!Xt(T))throw pe.create("not-registered");return function ae(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function wt(I,T){return $t.apply(this,arguments)}function $t(){return($t=(0,F.Z)(function*(I,T){try{const N=yield Dr(I,T),U=Object.assign(Object.assign({},T),{authToken:N});return yield rt(I.appConfig,U),N}catch(N){if(!Le(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield rt(I.appConfig,U)}else yield ln(I.appConfig);throw N}})).apply(this,arguments)}function Xt(I){return void 0!==I&&2===I.registrationStatus}function Z(I){return 2===I.requestStatus&&!function B(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+36e5}(I)}function W(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}function je(){return(je=(0,F.Z)(function*(I){const T=I,{installationEntry:N,registrationPromise:U}=yield Mn(T);return U?U.catch(console.error):Rn(T).catch(console.error),N.fid})).apply(this,arguments)}function Kt(){return(Kt=(0,F.Z)(function*(I,T=!1){const N=I;return yield fr(N),(yield Rn(N,T)).token})).apply(this,arguments)}function fr(I){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,F.Z)(function*(I){const{registrationPromise:T}=yield Mn(I);T&&(yield T)})).apply(this,arguments)}function Hn(I){return pe.create("missing-app-config-values",{valueName:I})}const qu="installations",Ze=I=>{const T=I.getProvider("app").getImmediate(),N=function js(I){if(!I||!I.options)throw Hn("App Configuration");if(!I.name)throw Hn("App Name");const T=["projectId","apiKey","appId"];for(const N of T)if(!I.options[N])throw Hn(N);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:N,heartbeatServiceProvider:(0,re._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},kt=I=>{const T=I.getProvider("app").getImmediate(),N=(0,re._getProvider)(T,qu).getImmediate();return{getId:()=>function X(I){return je.apply(this,arguments)}(N),getToken:z=>function Et(I){return Kt.apply(this,arguments)}(N,z)}};(function en(){(0,re._registerComponent)(new ve.wA(qu,Ze,"PUBLIC")),(0,re._registerComponent)(new ve.wA("installations-internal",kt,"PRIVATE"))})(),(0,re.registerVersion)(ce,"0.5.7"),(0,re.registerVersion)(ce,"0.5.7","esm2017");const Ln="@firebase/remote-config",bn=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Vd{constructor(T,N,U,z){this.client=T,this.storage=N,this.storageCache=U,this.logger=z}isCachedDataFresh(T,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-N,z=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${z}.`),z}fetch(T){var N=this;return(0,F.Z)(function*(){const[U,z]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(z&&N.isCachedDataFresh(T.cacheMaxAgeMillis,U))return z;T.eTag=z&&z.eTag;const Y=yield N.client.fetch(T),ue=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Y.status&&ue.push(N.storage.setLastSuccessfulFetchResponse(Y)),yield Promise.all(ue),Y})()}}function pm(I=navigator){return I.languages&&I.languages[0]||I.language}class Ff{constructor(T,N,U,z,Y,ue){this.firebaseInstallations=T,this.sdkVersion=N,this.namespace=U,this.projectId=z,this.apiKey=Y,this.appId=ue}fetch(T){var N=this;return(0,F.Z)(function*(){const[U,z]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),ue=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,We={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},It={sdk_version:N.sdkVersion,app_instance_id:U,app_instance_id_token:z,app_id:N.appId,language_code:pm()},ct={method:"POST",headers:We,body:JSON.stringify(It)},Yt=fetch(ue,ct),At=new Promise((ls,cs)=>{T.signal.addEventListener(()=>{const ma=new Error("The operation was aborted.");ma.name="AbortError",cs(ma)})});let ci;try{yield Promise.race([Yt,At]),ci=yield Yt}catch(ls){let cs="fetch-client-network";throw"AbortError"===ls.name&&(cs="fetch-timeout"),bn.create(cs,{originalErrorMessage:ls.message})}let kn=ci.status;const di=ci.headers.get("ETag")||void 0;let us,hi;if(200===ci.status){let ls;try{ls=yield ci.json()}catch(cs){throw bn.create("fetch-client-parse",{originalErrorMessage:cs.message})}us=ls.entries,hi=ls.state}if("INSTANCE_STATE_UNSPECIFIED"===hi?kn=500:"NO_CHANGE"===hi?kn=304:("NO_TEMPLATE"===hi||"EMPTY_CONFIG"===hi)&&(us={}),304!==kn&&200!==kn)throw bn.create("fetch-status",{httpStatus:kn});return{status:kn,eTag:di,config:us}})()}}class Lf{constructor(T,N){this.client=T,this.storage=N}fetch(T){var N=this;return(0,F.Z)(function*(){const U=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:N,backoffCount:U}){var z=this;return(0,F.Z)(function*(){yield function Bi(I,T){return new Promise((N,U)=>{const z=Math.max(T-Date.now(),0),Y=setTimeout(N,z);I.addEventListener(()=>{clearTimeout(Y),U(bn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,N);try{const Y=yield z.client.fetch(T);return yield z.storage.deleteThrottleMetadata(),Y}catch(Y){if(!function ja(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(Y))throw Y;const ue={throttleEndTimeMillis:Date.now()+(0,ne.$s)(U),backoffCount:U+1};return yield z.storage.setThrottleMetadata(ue),z.attemptFetch(T,ue)}})()}}class jd{constructor(T,N,U,z,Y){this.app=T,this._client=N,this._storageCache=U,this._storage=z,this._logger=Y,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function uc(I,T){const N=I.target.error||void 0;return bn.create(T,{originalErrorMessage:N&&N.message})}const $s="app_namespace_store";class $d{constructor(T,N,U,z=function lc(){return new Promise((I,T)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=U=>{T(uc(U,"storage-open"))},N.onsuccess=U=>{I(U.target.result)},N.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore($s,{keyPath:"compositeKey"})}}catch(N){T(bn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=T,this.appName=N,this.namespace=U,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var N=this;return(0,F.Z)(function*(){const U=yield N.openDbPromise;return new Promise((z,Y)=>{const We=U.transaction([$s],"readonly").objectStore($s),It=N.createCompositeKey(T);try{const ct=We.get(It);ct.onerror=Yt=>{Y(uc(Yt,"storage-get"))},ct.onsuccess=Yt=>{const At=Yt.target.result;z(At?At.value:void 0)}}catch(ct){Y(bn.create("storage-get",{originalErrorMessage:ct&&ct.message}))}})})()}set(T,N){var U=this;return(0,F.Z)(function*(){const z=yield U.openDbPromise;return new Promise((Y,ue)=>{const It=z.transaction([$s],"readwrite").objectStore($s),ct=U.createCompositeKey(T);try{const Yt=It.put({compositeKey:ct,value:N});Yt.onerror=At=>{ue(uc(At,"storage-set"))},Yt.onsuccess=()=>{Y()}}catch(Yt){ue(bn.create("storage-set",{originalErrorMessage:Yt&&Yt.message}))}})})()}delete(T){var N=this;return(0,F.Z)(function*(){const U=yield N.openDbPromise;return new Promise((z,Y)=>{const We=U.transaction([$s],"readwrite").objectStore($s),It=N.createCompositeKey(T);try{const ct=We.delete(It);ct.onerror=Yt=>{Y(uc(Yt,"storage-delete"))},ct.onsuccess=()=>{z()}}catch(ct){Y(bn.create("storage-delete",{originalErrorMessage:ct&&ct.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class mm{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,F.Z)(function*(){const N=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),z=T.storage.getActiveConfig(),Y=yield N;Y&&(T.lastFetchStatus=Y);const ue=yield U;ue&&(T.lastSuccessfulFetchTimestampMillis=ue);const We=yield z;We&&(T.activeConfig=We)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function cc(){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,F.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Zd(){(0,re._registerComponent)(new ve.wA("remote-config",function I(T,{instanceIdentifier:N}){const U=T.getProvider("app").getImmediate(),z=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw bn.create("registration-window");if(!(0,ne.hl)())throw bn.create("indexed-db-unavailable");const{projectId:Y,apiKey:ue,appId:We}=U.options;if(!Y)throw bn.create("registration-project-id");if(!ue)throw bn.create("registration-api-key");if(!We)throw bn.create("registration-app-id");const It=new $d(We,U.name,N=N||"firebase"),ct=new mm(It),Yt=new ie.Yd(Ln);Yt.logLevel=ie.in.ERROR;const At=new Ff(z,re.SDK_VERSION,N,Y,ue,We),ci=new Lf(At,It),kn=new Vd(ci,It,ct,Yt),di=new jd(U,kn,ct,It,Yt);return function Ur(I){const T=(0,ne.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(di),di},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(Ln,"0.3.6"),(0,re.registerVersion)(Ln,"0.3.6","esm2017")}();const Vf="/firebase-messaging-sw.js",Hd="/firebase-cloud-messaging-push-scope",Zs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zo="google.c.a.c_id",Ko="google.c.a.c_l",qa="google.c.a.ts",Hs="google.c.a.e";var Gs=(()=>{return(I=Gs||(Gs={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Gs;var I})();function ir(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fc(I){const N=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(N),z=new Uint8Array(U.length);for(let Y=0;Y<U.length;++Y)z[Y]=U.charCodeAt(Y);return z}const $a="fcm_token_details_db",Yo="fcm_token_object_Store";function Bf(I){return Qo.apply(this,arguments)}function Qo(){return Qo=(0,F.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Y=>Y.name).includes($a))return null;let T=null;return(yield(0,ne.X3)($a,5,function(){var U=(0,F.Z)(function*(z,Y,ue,We){var It;if(Y<2||!z.objectStoreNames.contains(Yo))return;const ct=We.objectStore(Yo),Yt=yield ct.index("fcmSenderId").get(I);if(yield ct.clear(),Yt)if(2===Y){const At=Yt;if(!At.auth||!At.p256dh||!At.endpoint)return;T={token:At.fcmToken,createTime:null!==(It=At.createTime)&&void 0!==It?It:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:ir(At.vapidKey)}}}else if(3===Y){const At=Yt;T={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:ir(At.auth),p256dh:ir(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:ir(At.vapidKey)}}}else if(4===Y){const At=Yt;T={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:ir(At.auth),p256dh:ir(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:ir(At.vapidKey)}}}});return function(z,Y,ue,We){return U.apply(this,arguments)}}())).close(),yield(0,ne.Lj)($a),yield(0,ne.Lj)("fcm_vapid_details_db"),yield(0,ne.Lj)("undefined"),_m(T)?T:null}),Qo.apply(this,arguments)}function _m(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const qt="firebase-messaging-store";let Gu=null;function Wd(){return Gu||(Gu=(0,ne.X3)("firebase-messaging-database",1,(I,T)=>{0===T&&I.createObjectStore(qt)})),Gu}function vn(I){return zd.apply(this,arguments)}function zd(){return(zd=(0,F.Z)(function*(I){const T=Xo(I),U=yield(yield Wd()).transaction(qt).objectStore(qt).get(T);if(U)return U;{const z=yield Bf(I.appConfig.senderId);if(z)return yield Jo(I,z),z}})).apply(this,arguments)}function Jo(I,T){return sr.apply(this,arguments)}function sr(){return(sr=(0,F.Z)(function*(I,T){const N=Xo(I),z=(yield Wd()).transaction(qt,"readwrite");return yield z.objectStore(qt).put(T,N),yield z.complete,T})).apply(this,arguments)}function gr(I){return qi.apply(this,arguments)}function qi(){return(qi=(0,F.Z)(function*(I){const T=Xo(I),U=(yield Wd()).transaction(qt,"readwrite");yield U.objectStore(qt).delete(T),yield U.complete})).apply(this,arguments)}function Xo({appConfig:I}){return I.appId}const nn=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Kd(I,T){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,F.Z)(function*(I,T){const N=yield mr(I),U=Wu(T),z={method:"POST",headers:N,body:JSON.stringify(U)};let Y;try{Y=yield(yield fetch(yt(I.appConfig),z)).json()}catch(ue){throw nn.create("token-subscribe-failed",{errorInfo:ue})}if(Y.error)throw nn.create("token-subscribe-failed",{errorInfo:Y.error.message});if(!Y.token)throw nn.create("token-subscribe-no-token");return Y.token})).apply(this,arguments)}function jf(I,T){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,F.Z)(function*(I,T){const N=yield mr(I),U=Wu(T.subscriptionOptions),z={method:"PATCH",headers:N,body:JSON.stringify(U)};let Y;try{Y=yield(yield fetch(`${yt(I.appConfig)}/${T.token}`,z)).json()}catch(ue){throw nn.create("token-update-failed",{errorInfo:ue})}if(Y.error)throw nn.create("token-update-failed",{errorInfo:Y.error.message});if(!Y.token)throw nn.create("token-update-no-token");return Y.token})).apply(this,arguments)}function Co(I,T){return bo.apply(this,arguments)}function bo(){return(bo=(0,F.Z)(function*(I,T){const U={method:"DELETE",headers:yield mr(I)};try{const Y=yield(yield fetch(`${yt(I.appConfig)}/${T}`,U)).json();if(Y.error)throw nn.create("token-unsubscribe-failed",{errorInfo:Y.error.message})}catch(z){throw nn.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function yt({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function mr(I){return Za.apply(this,arguments)}function Za(){return(Za=(0,F.Z)(function*({appConfig:I,installations:T}){const N=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function Wu({p256dh:I,auth:T,endpoint:N,vapidKey:U}){const z={web:{endpoint:N,auth:T,p256dh:I}};return U!==Zs&&(z.web.applicationPubKey=U),z}const Ha=6048e5;function ea(I){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,F.Z)(function*(I){const T=yield na(I.swRegistration,I.vapidKey),N={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:ir(T.getKey("auth")),p256dh:ir(T.getKey("p256dh"))},U=yield vn(I.firebaseDependencies);if(U){if(Io(U.subscriptionOptions,N))return Date.now()>=U.createTime+Ha?Bt(I,{token:U.token,createTime:Date.now(),subscriptionOptions:N}):U.token;try{yield Co(I.firebaseDependencies,U.token)}catch(z){console.warn(z)}return wn(I.firebaseDependencies,N)}return wn(I.firebaseDependencies,N)})).apply(this,arguments)}function gc(I){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,F.Z)(function*(I){const T=yield vn(I.firebaseDependencies);T&&(yield Co(I.firebaseDependencies,T.token),yield gr(I.firebaseDependencies));const N=yield I.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function Bt(I,T){return ta.apply(this,arguments)}function ta(){return(ta=(0,F.Z)(function*(I,T){try{const N=yield jf(I.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:N,createTime:Date.now()});return yield Jo(I.firebaseDependencies,U),N}catch(N){throw yield gc(I),N}})).apply(this,arguments)}function wn(I,T){return zs.apply(this,arguments)}function zs(){return(zs=(0,F.Z)(function*(I,T){const U={token:yield Kd(I,T),createTime:Date.now(),subscriptionOptions:T};return yield Jo(I,U),U.token})).apply(this,arguments)}function na(I,T){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,F.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fc(T)})})).apply(this,arguments)}function Io(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}function Wa(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function mc(I,T){if(!T.notification)return;I.notification={};const N=T.notification.title;N&&(I.notification.title=N);const U=T.notification.body;U&&(I.notification.body=U);const z=T.notification.image;z&&(I.notification.image=z)}(T,I),function zu(I,T){!T.data||(I.data=T.data)}(T,I),function ra(I,T){if(!T.fcmOptions)return;I.fcmOptions={};const N=T.fcmOptions.link;N&&(I.fcmOptions.link=N);const U=T.fcmOptions.analytics_label;U&&(I.fcmOptions.analyticsLabel=U)}(T,I),T}function za(I){return"object"==typeof I&&!!I&&zo in I}function er(I,T){const N=[];for(let U=0;U<I.length;U++)N.push(I.charAt(U)),U<T.length&&N.push(T.charAt(U));return N.join("")}function ia(I){return nn.create("missing-app-config-values",{valueName:I})}er("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),er("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class To{constructor(T,N,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function is(I){if(!I||!I.options)throw ia("App Configuration Object");if(!I.name)throw ia("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:N}=I;for(const U of T)if(!N[U])throw ia(U);return{appName:I.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:z,installations:N,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Di(I){return _c.apply(this,arguments)}function _c(){return(_c=(0,F.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Vf,{scope:Hd}),I.swRegistration.update().catch(()=>{})}catch(T){throw nn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function Ku(I,T){return sa.apply(this,arguments)}function sa(){return(sa=(0,F.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield Di(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw nn.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function yc(I,T){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,F.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=Zs)})).apply(this,arguments)}function oa(){return(oa=(0,F.Z)(function*(I,T){if(!navigator)throw nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw nn.create("permission-blocked");return yield yc(I,null==T?void 0:T.vapidKey),yield Ku(I,null==T?void 0:T.serviceWorkerRegistration),ea(I)})).apply(this,arguments)}function vc(I,T,N){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,F.Z)(function*(I,T,N){const U=qf(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:N[zo],message_name:N[Ko],message_time:N[qa],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function qf(I){switch(I){case Gs.NOTIFICATION_CLICKED:return"notification_open";case Gs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Qu(){return(Qu=(0,F.Z)(function*(I,T){const N=T.data;if(!N.isFirebaseMessaging)return;I.onMessageHandler&&N.messageType===Gs.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Wa(N)):I.onMessageHandler.next(Wa(N)));const U=N.data;za(U)&&"1"===U[Hs]&&(yield vc(I,N.messageType,U))})).apply(this,arguments)}const Ju="@firebase/messaging",Xu=I=>{const T=new To(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function aa(I,T){return Qu.apply(this,arguments)}(T,N)),T},el=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:U=>function Yu(I,T){return oa.apply(this,arguments)}(T,U)}};function $f(){return or.apply(this,arguments)}function or(){return(or=(0,F.Z)(function*(){try{yield(0,ne.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Yd(){(0,re._registerComponent)(new ve.wA("messaging",Xu,"PUBLIC")),(0,re._registerComponent)(new ve.wA("messaging-internal",el,"PRIVATE")),(0,re.registerVersion)(Ju,"0.9.11"),(0,re.registerVersion)(Ju,"0.9.11","esm2017")}();const Do="analytics",Ya="firebase_id",Wf="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ec="https://www.googletagmanager.com/gtag/js",Tn=new ie.Yd("@firebase/analytics");function Ao(I){return Promise.all(I.map(T=>T.catch(N=>N)))}function ym(I,T){const N=document.createElement("script");N.src=`${Ec}?l=${I}&id=${T}`,N.async=!0,document.head.appendChild(N)}function Qa(I,T,N,U,z,Y){return ua.apply(this,arguments)}function ua(){return(ua=(0,F.Z)(function*(I,T,N,U,z,Y){const ue=U[z];try{if(ue)yield T[ue];else{const It=(yield Ao(N)).find(ct=>ct.measurementId===z);It&&(yield T[It.appId])}}catch(We){Tn.error(We)}I("config",z,Y)})).apply(this,arguments)}function wm(I,T,N,U,z){return So.apply(this,arguments)}function So(){return(So=(0,F.Z)(function*(I,T,N,U,z){try{let Y=[];if(z&&z.send_to){let ue=z.send_to;Array.isArray(ue)||(ue=[ue]);const We=yield Ao(N);for(const It of ue){const ct=We.find(At=>At.measurementId===It),Yt=ct&&T[ct.appId];if(!Yt){Y=[];break}Y.push(Yt)}}0===Y.length&&(Y=Object.values(T)),yield Promise.all(Y),I("event",U,z||{})}catch(Y){Tn.error(Y)}})).apply(this,arguments)}function Cc(){const I=window.document.getElementsByTagName("script");for(const T of Object.values(I))if(T.src&&T.src.includes(Ec))return T;return null}const Bn=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),tr=new class $i{constructor(T={},N=1e3){this.throttleMetadata=T,this.intervalMillis=N}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,N){this.throttleMetadata[T]=N}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function bm(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Ja(I){return sl.apply(this,arguments)}function sl(){return(sl=(0,F.Z)(function*(I){var T;const{appId:N,apiKey:U}=I,z={method:"GET",headers:bm(U)},Y=Wf.replace("{app-id}",N),ue=yield fetch(Y,z);if(200!==ue.status&&304!==ue.status){let We="";try{const It=yield ue.json();(null===(T=It.error)||void 0===T?void 0:T.message)&&(We=It.error.message)}catch(It){}throw Bn.create("config-fetch-failed",{httpStatus:ue.status,responseMessage:We})}return ue.json()})).apply(this,arguments)}function bc(I){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,F.Z)(function*(I,T=tr,N){const{appId:U,apiKey:z,measurementId:Y}=I.options;if(!U)throw Bn.create("no-app-id");if(!z){if(Y)return{measurementId:Y,appId:U};throw Bn.create("no-api-key")}const ue=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new eu;return setTimeout((0,F.Z)(function*(){We.abort()}),void 0!==N?N:6e4),_s({appId:U,apiKey:z,measurementId:Y},ue,We,T)})).apply(this,arguments)}function _s(I,T,N){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,F.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:N},U,z=tr){const{appId:Y,measurementId:ue}=I;try{yield Dt(U,T)}catch(We){if(ue)return Tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ue} provided in the "measurementId" field in the local Firebase config. [${We.message}]`),{appId:Y,measurementId:ue};throw We}try{const We=yield Ja(I);return z.deleteThrottleMetadata(Y),We}catch(We){if(!zf(We)){if(z.deleteThrottleMetadata(Y),ue)return Tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ue} provided in the "measurementId" field in the local Firebase config. [${We.message}]`),{appId:Y,measurementId:ue};throw We}const It=503===Number(We.customData.httpStatus)?(0,ne.$s)(N,z.intervalMillis,30):(0,ne.$s)(N,z.intervalMillis),ct={throttleEndTimeMillis:Date.now()+It,backoffCount:N+1};return z.setThrottleMetadata(Y,ct),Tn.debug(`Calling attemptFetch again in ${It} millis`),_s(I,ct,U,z)}})).apply(this,arguments)}function Dt(I,T){return new Promise((N,U)=>{const z=Math.max(T-Date.now(),0),Y=setTimeout(N,z);I.addEventListener(()=>{clearTimeout(Y),U(Bn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function zf(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}class eu{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function ol(){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,F.Z)(function*(){if(!(0,ne.hl)())return Tn.warn(Bn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(I){return Tn.warn(Bn.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function la(){return(la=(0,F.Z)(function*(I,T,N,U,z,Y,ue){var We;const It=bc(I);It.then(kn=>{N[kn.measurementId]=kn.appId,I.options.measurementId&&kn.measurementId!==I.options.measurementId&&Tn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${kn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(kn=>Tn.error(kn)),T.push(It);const ct=ol().then(kn=>{if(kn)return U.getId()}),[Yt,At]=yield Promise.all([It,ct]);Cc()||ym(Y,Yt.measurementId),z("js",new Date);const ci=null!==(We=null==ue?void 0:ue.config)&&void 0!==We?We:{};return ci.origin="firebase",ci.update=!0,null!=At&&(ci[Ya]=At),z("config",Yt.measurementId,ci),Yt.measurementId})).apply(this,arguments)}class al{constructor(T){this.app=T}_delete(){return delete Hi[this.app.options.appId],Promise.resolve()}}let Hi={},ul=[];const Ic={};let tu,ys,Js="dataLayer",ar=!1;function Mo(I,T,N){!function xo(){const I=[];if((0,ne.ru)()&&I.push("This is a browser extension environment."),(0,ne.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((U,z)=>`(${z+1}) ${U}`).join(" "),N=Bn.create("invalid-analytics-context",{errorInfo:T});Tn.warn(N.message)}}();const U=I.options.appId;if(!U)throw Bn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Bn.create("no-api-key");Tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Hi[U])throw Bn.create("already-exists",{id:U});if(!ar){!function vm(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(Js);const{wrappedGtag:Y,gtagCore:ue}=function Cm(I,T,N,U,z){let Y=function(...ue){window[U].push(arguments)};return window[z]&&"function"==typeof window[z]&&(Y=window[z]),window[z]=function Em(I,T,N,U){function Y(){return(Y=(0,F.Z)(function*(ue,We,It){try{"event"===ue?yield wm(I,T,N,We,It):"config"===ue?yield Qa(I,T,N,U,We,It):I("set",We)}catch(ct){Tn.error(ct)}})).apply(this,arguments)}return function z(ue,We,It){return Y.apply(this,arguments)}}(Y,I,T,N),{gtagCore:Y,wrappedGtag:window[z]}}(Hi,ul,Ic,Js,"gtag");ys=Y,tu=ue,ar=!0}return Hi[U]=function Pn(I,T,N,U,z,Y,ue){return la.apply(this,arguments)}(I,ul,Ic,T,tu,Js,N),new al(I)}function On(){return(On=(0,F.Z)(function*(I,T,N,U,z){if(z&&z.global)I("event",N,U);else{const Y=yield T;I("event",N,Object.assign(Object.assign({},U),{send_to:Y}))}})).apply(this,arguments)}function rn(){return eo.apply(this,arguments)}function eo(){return(eo=(0,F.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(I){return!1}})).apply(this,arguments)}const jr="@firebase/analytics";!function to(){(0,re._registerComponent)(new ve.wA(Do,(T,{options:N})=>Mo(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,re._registerComponent)(new ve.wA("analytics-internal",function I(T){try{const N=T.getProvider(Do).getImmediate();return{logEvent:(U,z,Y)=>function da(I,T,N,U){I=(0,ne.m9)(I),function jn(I,T,N,U,z){return On.apply(this,arguments)}(ys,Hi[I.app.options.appId],T,N,U).catch(z=>Tn.error(z))}(N,U,z,Y)}}catch(N){throw Bn.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,re.registerVersion)(jr,"0.7.7"),(0,re.registerVersion)(jr,"0.7.7","esm2017")}();var qn=L(4408),Gi=L(7565);const Xf=new class Tm extends Gi.v{}(class ha extends qn.o{constructor(T,N){super(T,N),this.scheduler=T,this.work=N}schedule(T,N=0){return N>0?super.schedule(T,N):(this.delay=N,this.state=T,this.scheduler.flush(this),this)}execute(T,N){return N>0||this.closed?super.execute(T,N):this._execute(T,N)}requestAsyncId(T,N,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(T,N,U):T.flush(this)}});var Si=L(4986),Qd=L(8505),fa=L(5363),No=L(9468);const Ac=new l.GfV("7.3.0"),Sc="__angularfire_symbol__analyticsIsSupportedValue",pa="__angularfire_symbol__analyticsIsSupported",Jd="__angularfire_symbol__remoteConfigIsSupportedValue",Xd="__angularfire_symbol__remoteConfigIsSupported",nu="__angularfire_symbol__messagingIsSupportedValue",ht="__angularfire_symbol__messagingIsSupported";function ep(I,T,N){if(T){if(1===T.length)return T[0];const Y=T.filter(ue=>ue.app===N);if(1===Y.length)return Y[0]}return N.container.getProvider(I).getImmediate({optional:!0})}globalThis[pa]||(globalThis[pa]=rn().then(I=>globalThis[Sc]=I).catch(()=>globalThis[Sc]=!1)),globalThis[ht]||(globalThis[ht]=$f().then(I=>globalThis[nu]=I).catch(()=>globalThis[nu]=!1)),globalThis[Xd]||(globalThis[Xd]=cc().then(I=>globalThis[Jd]=I).catch(()=>globalThis[Jd]=!1));const eh=(I,T)=>{const N=T?[T]:(0,Q.C6)(),U=[];return N.forEach(z=>{z.container.getProvider(I).instances.forEach(ue=>{U.includes(ue)||U.push(ue)})}),U};function ga(){}class zi{constructor(T,N=Xf){this.zone=T,this.delegate=N}now(){return this.delegate.now()}schedule(T,N,U){const z=this.zone;return this.delegate.schedule(function(ue){z.runGuarded(()=>{T.apply(this,[ue])})},N,U)}}class th{constructor(T){this.zone=T,this.task=null}call(T,N){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ga,{},ga,ga)),N.pipe((0,Qd.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let iu=(()=>{class I{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new zi(Zone.current)),this.insideAngular=N.run(()=>new zi(Zone.current,Si.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(N){return new(N||I)(l.LFG(l.R0b))},I.\u0275prov=l.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function as(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Sr(I){return I.pipe((0,fa.Q)(as().outsideAngular))}function Po(I){return as(),function ou(I){return function(N){return(N=N.lift(new th(I.ngZone))).pipe((0,No.R)(I.outsideAngular),(0,fa.Q)(I.insideAngular))}}(as())(I)}},2090:(at,Ce,L)=>{L.d(Ce,{$s:()=>Cn,BH:()=>De,DV:()=>Qn,Dv:()=>rs,G6:()=>mt,GJ:()=>ki,L:()=>de,LL:()=>Ot,Lj:()=>$t,Mn:()=>it,Pz:()=>lt,Sg:()=>Re,UG:()=>pe,UI:()=>un,US:()=>ie,Wj:()=>ms,X3:()=>wt,Yr:()=>Ge,ZB:()=>te,ZR:()=>oe,b$:()=>Pe,cI:()=>ut,d:()=>et,dS:()=>Lt,eu:()=>me,g5:()=>re,gK:()=>Mn,gQ:()=>Ir,h$:()=>ce,hl:()=>J,hu:()=>F,jU:()=>Le,lb:()=>ju,m9:()=>_t,ne:()=>rt,p$:()=>H,pd:()=>xe,r3:()=>Fi,ru:()=>Ve,tV:()=>$,uI:()=>he,ug:()=>ot,vZ:()=>Fn,w1:()=>Ae,w9:()=>an,xO:()=>ai,xb:()=>hr,z$:()=>Ue,zI:()=>ye,zd:()=>Fr});var l=L(5861);const F=function(Z,B){if(!Z)throw re(B)},re=function(Z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Z)},ne=function(Z){const B=[];let W=0;for(let ae=0;ae<Z.length;ae++){let X=Z.charCodeAt(ae);X<128?B[W++]=X:X<2048?(B[W++]=X>>6|192,B[W++]=63&X|128):55296==(64512&X)&&ae+1<Z.length&&56320==(64512&Z.charCodeAt(ae+1))?(X=65536+((1023&X)<<10)+(1023&Z.charCodeAt(++ae)),B[W++]=X>>18|240,B[W++]=X>>12&63|128,B[W++]=X>>6&63|128,B[W++]=63&X|128):(B[W++]=X>>12|224,B[W++]=X>>6&63|128,B[W++]=63&X|128)}return B},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Z,B){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,ae=[];for(let X=0;X<Z.length;X+=3){const je=Z[X],Et=X+1<Z.length,Kt=Et?Z[X+1]:0,fr=X+2<Z.length,Ht=fr?Z[X+2]:0;let yn=(15&Kt)<<2|Ht>>6,Ei=63&Ht;fr||(Ei=64,Et||(yn=64)),ae.push(W[je>>2],W[(3&je)<<4|Kt>>4],W[yn],W[Ei])}return ae.join("")},encodeString(Z,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(Z):this.encodeByteArray(ne(Z),B)},decodeString(Z,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(Z):function(Z){const B=[];let W=0,ae=0;for(;W<Z.length;){const X=Z[W++];if(X<128)B[ae++]=String.fromCharCode(X);else if(X>191&&X<224){const je=Z[W++];B[ae++]=String.fromCharCode((31&X)<<6|63&je)}else if(X>239&&X<365){const fr=((7&X)<<18|(63&Z[W++])<<12|(63&Z[W++])<<6|63&Z[W++])-65536;B[ae++]=String.fromCharCode(55296+(fr>>10)),B[ae++]=String.fromCharCode(56320+(1023&fr))}else{const je=Z[W++],Et=Z[W++];B[ae++]=String.fromCharCode((15&X)<<12|(63&je)<<6|63&Et)}}return B.join("")}(this.decodeStringToByteArray(Z,B))},decodeStringToByteArray(Z,B){this.init_();const W=B?this.charToByteMapWebSafe_:this.charToByteMap_,ae=[];for(let X=0;X<Z.length;){const je=W[Z.charAt(X++)],Kt=X<Z.length?W[Z.charAt(X)]:0;++X;const Ht=X<Z.length?W[Z.charAt(X)]:64;++X;const Rt=X<Z.length?W[Z.charAt(X)]:64;if(++X,null==je||null==Kt||null==Ht||null==Rt)throw Error();ae.push(je<<2|Kt>>4),64!==Ht&&(ae.push(Kt<<4&240|Ht>>2),64!==Rt&&ae.push(Ht<<6&192|Rt))}return ae},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z)}}},ce=function(Z){const B=ne(Z);return ie.encodeByteArray(B,!0)},de=function(Z){return ce(Z).replace(/\./g,"")},$=function(Z){try{return ie.decodeString(Z,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function H(Z){return te(void 0,Z)}function te(Z,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===Z&&(Z={});break;case Array:Z=[];break;default:return B}for(const W in B)!B.hasOwnProperty(W)||!$e(W)||(Z[W]=te(Z[W],B[W]));return Z}function $e(Z){return"__proto__"!==Z}class De{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,W)=>{this.resolve=B,this.reject=W})}wrapCallback(B){return(W,ae)=>{W?this.reject(W):this.resolve(ae),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(W):B(W,ae))}}}function Re(Z,B){if(Z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ae=B||"demo-project",X=Z.iat||0,je=Z.sub||Z.user_id;if(!je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Et=Object.assign({iss:`https://securetoken.google.com/${ae}`,aud:ae,iat:X,exp:X+3600,auth_time:X,sub:je,user_id:je,firebase:{sign_in_provider:"custom",identities:{}}},Z);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(Et)),""].join(".")}function Ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Z){return!1}}function Le(){return"object"==typeof self&&self.self===self}function Ve(){const Z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Z&&void 0!==Z.id}function Pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function et(){return Ue().indexOf("Electron/")>=0}function Ae(){const Z=Ue();return Z.indexOf("MSIE ")>=0||Z.indexOf("Trident/")>=0}function it(){return Ue().indexOf("MSAppHost/")>=0}function Ge(){return!1}function mt(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J(){return"object"==typeof indexedDB}function me(){return new Promise((Z,B)=>{try{let W=!0;const ae="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(ae);X.onsuccess=()=>{X.result.close(),W||self.indexedDB.deleteDatabase(ae),Z(!0)},X.onupgradeneeded=()=>{W=!1},X.onerror=()=>{var je;B((null===(je=X.error)||void 0===je?void 0:je.message)||"")}}catch(W){B(W)}})}function ye(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class oe extends Error{constructor(B,W,ae){super(W),this.code=B,this.customData=ae,this.name="FirebaseError",Object.setPrototypeOf(this,oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ot.prototype.create)}}class Ot{constructor(B,W,ae){this.service=B,this.serviceName=W,this.errors=ae}create(B,...W){const ae=W[0]||{},X=`${this.service}/${B}`,je=this.errors[B],Et=je?function zt(Z,B){return Z.replace(rr,(W,ae)=>{const X=B[ae];return null!=X?String(X):`<${ae}?>`})}(je,ae):"Error";return new oe(X,`${this.serviceName}: ${Et} (${X}).`,ae)}}const rr=/\{\$([^}]+)}/g;function ut(Z){return JSON.parse(Z)}function lt(Z){return JSON.stringify(Z)}const xn=function(Z){let B={},W={},ae={},X="";try{const je=Z.split(".");B=ut($(je[0])||""),W=ut($(je[1])||""),X=je[2],ae=W.d||{},delete W.d}catch(je){}return{header:B,claims:W,data:ae,signature:X}},an=function(Z){const W=xn(Z).claims;return!!W&&"object"==typeof W&&W.hasOwnProperty("iat")},ki=function(Z){const B=xn(Z).claims;return"object"==typeof B&&!0===B.admin};function Fi(Z,B){return Object.prototype.hasOwnProperty.call(Z,B)}function Qn(Z,B){if(Object.prototype.hasOwnProperty.call(Z,B))return Z[B]}function hr(Z){for(const B in Z)if(Object.prototype.hasOwnProperty.call(Z,B))return!1;return!0}function un(Z,B,W){const ae={};for(const X in Z)Object.prototype.hasOwnProperty.call(Z,X)&&(ae[X]=B.call(W,Z[X],X,Z));return ae}function Fn(Z,B){if(Z===B)return!0;const W=Object.keys(Z),ae=Object.keys(B);for(const X of W){if(!ae.includes(X))return!1;const je=Z[X],Et=B[X];if(yo(je)&&yo(Et)){if(!Fn(je,Et))return!1}else if(je!==Et)return!1}for(const X of ae)if(!W.includes(X))return!1;return!0}function yo(Z){return null!==Z&&"object"==typeof Z}function ai(Z){const B=[];for(const[W,ae]of Object.entries(Z))Array.isArray(ae)?ae.forEach(X=>{B.push(encodeURIComponent(W)+"="+encodeURIComponent(X))}):B.push(encodeURIComponent(W)+"="+encodeURIComponent(ae));return B.length?"&"+B.join("&"):""}function Fr(Z){const B={};return Z.replace(/^\?/,"").split("&").forEach(ae=>{if(ae){const[X,je]=ae.split("=");B[decodeURIComponent(X)]=decodeURIComponent(je)}}),B}function xe(Z){const B=Z.indexOf("?");if(!B)return"";const W=Z.indexOf("#",B);return Z.substring(B,W>0?W:void 0)}class Ir{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,W){W||(W=0);const ae=this.W_;if("string"==typeof B)for(let Rt=0;Rt<16;Rt++)ae[Rt]=B.charCodeAt(W)<<24|B.charCodeAt(W+1)<<16|B.charCodeAt(W+2)<<8|B.charCodeAt(W+3),W+=4;else for(let Rt=0;Rt<16;Rt++)ae[Rt]=B[W]<<24|B[W+1]<<16|B[W+2]<<8|B[W+3],W+=4;for(let Rt=16;Rt<80;Rt++){const yn=ae[Rt-3]^ae[Rt-8]^ae[Rt-14]^ae[Rt-16];ae[Rt]=4294967295&(yn<<1|yn>>>31)}let Ht,_n,X=this.chain_[0],je=this.chain_[1],Et=this.chain_[2],Kt=this.chain_[3],fr=this.chain_[4];for(let Rt=0;Rt<80;Rt++){Rt<40?Rt<20?(Ht=Kt^je&(Et^Kt),_n=1518500249):(Ht=je^Et^Kt,_n=1859775393):Rt<60?(Ht=je&Et|Kt&(je|Et),_n=2400959708):(Ht=je^Et^Kt,_n=3395469782);const yn=(X<<5|X>>>27)+Ht+fr+_n+ae[Rt]&4294967295;fr=Kt,Kt=Et,Et=4294967295&(je<<30|je>>>2),je=X,X=yn}this.chain_[0]=this.chain_[0]+X&4294967295,this.chain_[1]=this.chain_[1]+je&4294967295,this.chain_[2]=this.chain_[2]+Et&4294967295,this.chain_[3]=this.chain_[3]+Kt&4294967295,this.chain_[4]=this.chain_[4]+fr&4294967295}update(B,W){if(null==B)return;void 0===W&&(W=B.length);const ae=W-this.blockSize;let X=0;const je=this.buf_;let Et=this.inbuf_;for(;X<W;){if(0===Et)for(;X<=ae;)this.compress_(B,X),X+=this.blockSize;if("string"==typeof B){for(;X<W;)if(je[Et]=B.charCodeAt(X),++Et,++X,Et===this.blockSize){this.compress_(je),Et=0;break}}else for(;X<W;)if(je[Et]=B[X],++Et,++X,Et===this.blockSize){this.compress_(je),Et=0;break}}this.inbuf_=Et,this.total_+=W}digest(){const B=[];let W=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let X=this.blockSize-1;X>=56;X--)this.buf_[X]=255&W,W/=256;this.compress_(this.buf_);let ae=0;for(let X=0;X<5;X++)for(let je=24;je>=0;je-=8)B[ae]=this.chain_[X]>>je&255,++ae;return B}}function rt(Z,B){const W=new vi(Z,B);return W.subscribe.bind(W)}class vi{constructor(B,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{B(this)}).catch(ae=>{this.error(ae)})}next(B){this.forEachObserver(W=>{W.next(B)})}error(B){this.forEachObserver(W=>{W.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,W,ae){let X;if(void 0===B&&void 0===W&&void 0===ae)throw new Error("Missing Observer.");X=function Tr(Z,B){if("object"!=typeof Z||null===Z)return!1;for(const W of B)if(W in Z&&"function"==typeof Z[W])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:W,complete:ae},void 0===X.next&&(X.next=wi),void 0===X.error&&(X.error=wi),void 0===X.complete&&(X.complete=wi);const je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch(Et){}}),this.observers.push(X),je}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,B)}sendOne(B,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{W(this.observers[B])}catch(ae){"undefined"!=typeof console&&console.error&&console.error(ae)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wi(){}const rs=function(Z,B,W,ae){let X;if(ae<B?X="at least "+B:ae>W&&(X=0===W?"none":"no more than "+W),X)throw new Error(Z+" failed: Was called with "+ae+(1===ae?" argument.":" arguments.")+" Expects "+X+".")};function Mn(Z,B){return`${Z} failed: ${B} argument `}function ms(Z,B,W,ae){if((!ae||W)&&"function"!=typeof W)throw new Error(Mn(Z,B)+"must be a valid function.")}function ju(Z,B,W,ae){if((!ae||W)&&("object"!=typeof W||null===W))throw new Error(Mn(Z,B)+"must be a valid context object.")}const Lt=function(Z){const B=[];let W=0;for(let ae=0;ae<Z.length;ae++){let X=Z.charCodeAt(ae);if(X>=55296&&X<=56319){const je=X-55296;ae++,F(ae<Z.length,"Surrogate pair missing trail surrogate."),X=65536+(je<<10)+(Z.charCodeAt(ae)-56320)}X<128?B[W++]=X:X<2048?(B[W++]=X>>6|192,B[W++]=63&X|128):X<65536?(B[W++]=X>>12|224,B[W++]=X>>6&63|128,B[W++]=63&X|128):(B[W++]=X>>18|240,B[W++]=X>>12&63|128,B[W++]=X>>6&63|128,B[W++]=63&X|128)}return B},ot=function(Z){let B=0;for(let W=0;W<Z.length;W++){const ae=Z.charCodeAt(W);ae<128?B++:ae<2048?B+=2:ae>=55296&&ae<=56319?(B+=4,W++):B+=3}return B};function Cn(Z,B=1e3,W=2){const ae=B*Math.pow(W,Z),X=Math.round(.5*ae*(Math.random()-.5)*2);return Math.min(144e5,ae+X)}function _t(Z){return Z&&Z._delegate?Z._delegate:Z}function Rn(Z,B){return new Promise((W,ae)=>{Z.onsuccess=X=>{W(X.target.result)},Z.onerror=X=>{var je;ae(`${B}: ${null===(je=X.target.error)||void 0===je?void 0:je.message}`)}})}class Ut{constructor(B){this._db=B,this.objectStoreNames=this._db.objectStoreNames}transaction(B,W){return new Ye(this._db.transaction.call(this._db,B,W))}createObjectStore(B,W){return new be(this._db.createObjectStore(B,W))}close(){this._db.close()}}class Ye{constructor(B){this._transaction=B,this.complete=new Promise((W,ae)=>{this._transaction.oncomplete=function(){W()},this._transaction.onerror=()=>{ae(this._transaction.error)},this._transaction.onabort=()=>{ae(this._transaction.error)}})}objectStore(B){return new be(this._transaction.objectStore(B))}}class be{constructor(B){this._store=B}index(B){return new Je(this._store.index(B))}createIndex(B,W,ae){return new Je(this._store.createIndex(B,W,ae))}get(B){return Rn(this._store.get(B),"Error reading from IndexedDB")}put(B,W){return Rn(this._store.put(B,W),"Error writing to IndexedDB")}delete(B){return Rn(this._store.delete(B),"Error deleting from IndexedDB")}clear(){return Rn(this._store.clear(),"Error clearing IndexedDB object store")}}class Je{constructor(B){this._index=B}get(B){return Rn(this._index.get(B),"Error reading from IndexedDB")}}function wt(Z,B,W){return new Promise((ae,X)=>{try{const je=indexedDB.open(Z,B);je.onsuccess=Et=>{ae(new Ut(Et.target.result))},je.onerror=Et=>{var Kt;X(`Error opening indexedDB: ${null===(Kt=Et.target.error)||void 0===Kt?void 0:Kt.message}`)},je.onupgradeneeded=Et=>{W(new Ut(je.result),Et.oldVersion,Et.newVersion,new Ye(je.transaction))}}catch(je){X(`Error opening indexedDB: ${je.message}`)}})}function $t(Z){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,l.Z)(function*(Z){return new Promise((B,W)=>{try{const ae=indexedDB.deleteDatabase(Z);ae.onsuccess=()=>{B()},ae.onerror=X=>{var je;W(`Error deleting indexedDB database "${Z}": ${null===(je=X.target.error)||void 0===je?void 0:je.message}`)}}catch(ae){W(`Error deleting indexedDB database "${Z}": ${ae.message}`)}})})).apply(this,arguments)}},3932:(at,Ce,L)=>{var l=L(5e3);let Q=null;function F(){return Q}const ie=new l.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function de(){return(0,l.LFG)(H)}()},providedIn:"platform"}),n})();const $=new l.OlP("Location Initialized");let H=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ie))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function $e(){return new H((0,l.LFG)(ie))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function De(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function pe(n){const e=(0,l.LFG)(ie).location;return new Ve((0,l.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const Le=new l.OlP("appBaseHref");let Ve=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return De(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+Ue(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+Ue(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce),l.LFG(Le,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=De(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+Ue(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+Ue(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce),l.LFG(Le,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),et=(()=>{class n{constructor(t,r){this._subject=new l.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Re(Ge(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function it(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=De,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(l.LFG(he),l.LFG(ce))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ae(){return new et((0,l.LFG)(he),(0,l.LFG)(ce))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}var me=(()=>((me=me||{})[me.Zero=0]="Zero",me[me.One=1]="One",me[me.Two=2]="Two",me[me.Few=3]="Few",me[me.Many=4]="Many",me[me.Other=5]="Other",me))();const Fr=l.kL8;class tn{}let wo=(()=>{class n extends tn{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Fr(r||this.locale)(t)){case me.Zero:return"zero";case me.One:return"one";case me.Two:return"two";case me.Few:return"few";case me.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.soG))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class bi{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new bi(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const p=r.get(a);r.move(p,c),Eo(p,i)}});for(let i=0,a=r.length;i<a;i++){const p=r.get(i).context;p.index=i,p.count=a,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Eo(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Eo(n,e){n.context.$implicit=e.item}let Ur=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new pn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Zu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Zu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class pn{constructor(){this.$implicit=null,this.ngIf=null}}function Zu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}let hc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:tn,useClass:wo}]}),n})();function Yo(n){return"server"===n}let pc=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new Gd((0,l.LFG)(ie),window)}),n})();class Gd{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Gu(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=qt(this.window.history)||qt(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function qt(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Jo extends class zd extends class ve{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){Q||(Q=n)}(new Jo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function gr(){return sr=sr||document.querySelector("base"),sr?sr.getAttribute("href"):null}();return null==t?null:function Xo(n){qi=qi||document.createElement("a"),qi.setAttribute("href",n);const e=qi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){sr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Go(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let qi,sr=null;const Ws=new l.OlP("TRANSITION_ID"),Kd=[{provide:l.ip1,useFactory:function nn(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Ws,ie,l.zs3],multi:!0}];class Ti{static init(){(0,l.VLi)(new Ti)}addToWindow(e){l.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(r=>{const i=l.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const p=function(_){c=c||_,a--,0==a&&r(c)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let jf=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Ar=new l.OlP("EventManagerPlugins");let Co=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ar),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class bo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let yt=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),mr=(()=>{class n extends yt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Za),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Za))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ie))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Za(n){F().remove(n)}const Wu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ha=/%COMP%/g;function wn(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?wn(n,i,t):(i=i.replace(Ha,n),t.push(i))}return t}function zs(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Vr=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Io(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case l.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new zu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case l.ifc.ShadowDom:return new ra(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=wn(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Co),l.LFG(mr),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Io{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Wu[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Wu[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Wu[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,r,i&l.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zs(r)):this.eventManager.addEventListener(e,t,zs(r))}}class zu extends Io{constructor(e,t,r,i){super(e),this.component=r;const a=wn(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Bt(n){return"_ngcontent-%COMP%".replace(Ha,n)}(i+"-"+r.id),this.hostAttr=function ta(n){return"_nghost-%COMP%".replace(Ha,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ra extends Io{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=wn(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const p=document.createElement("style");p.textContent=a[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let za=(()=>{class n extends bo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ie))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const er=["alt","control","meta","shift"],ia={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},To={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Di={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let _c=(()=>{class n extends bo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="";if(er.forEach(_=>{const E=r.indexOf(_);E>-1&&(r.splice(E,1),c+=_+".")}),c+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function Ku(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&To.hasOwnProperty(e)&&(e=To[e]))}return ia[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),er.forEach(a=>{a!=i&&Di[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ie))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const oa=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function sa(){Jo.makeCurrent(),Ti.init()},multi:!0},{provide:ie,useFactory:function Ks(){return(0,l.RDi)(document),document},deps:[]}]),vc=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function yc(){return new l.qLn},deps:[]},{provide:Ar,useClass:za,multi:!0,deps:[ie,l.R0b,l.Lbi]},{provide:Ar,useClass:_c,multi:!0,deps:[ie]},{provide:Vr,useClass:Vr,deps:[Co,mr,l.AFp]},{provide:l.FYo,useExisting:Vr},{provide:yt,useExisting:mr},{provide:mr,useClass:mr,deps:[ie]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b]},{provide:Co,useClass:Co,deps:[Ar,l.R0b]},{provide:class vn{},useClass:jf,deps:[]}];let Ka=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:Ws,useExisting:l.AFp},Kd]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(n,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:vc,imports:[hc,l.hGG]}),n})();"undefined"!=typeof window&&window;var hn=L(8996),Bn=L(7669);function gt(...n){const e=(0,Bn.yG)(n);return(0,hn.D)(n,e)}var Ys=L(7579);class $i extends Ys.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var tr=L(8306);const{isArray:bm}=Array,{getPrototypeOf:Ja,prototype:sl,keys:bc}=Object;function Xa(n){if(1===n.length){const e=n[0];if(bm(e))return{args:e,keys:null};if(function _s(n){return n&&"object"==typeof n&&Ja(n)===sl}(e)){const t=bc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Zi=L(4671),Dt=L(4004);const{isArray:zf}=Array;function ol(n){return(0,Dt.U)(e=>function eu(n,e){return zf(e)?n(...e):n(e)}(n,e))}function Qs(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Pn=L(5403),la=L(9672);function ul(n,e,t){n?(0,la.f)(t,n,e):e()}const Js=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ll=L(8189);function ys(...n){return function tu(){return(0,ll.J)(1)}()((0,hn.D)(n,(0,Bn.yG)(n)))}var ar=L(8421);function Kf(n){return new tr.y(e=>{(0,ar.Xf)(n()).subscribe(e)})}var xo=L(515),Mo=L(727),jn=L(4482);function On(){return(0,jn.e)((n,e)=>{let t=null;n._refCount++;const r=new Pn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Tc extends tr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,jn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Mo.w0;const t=this.getSubject();e.add(this.source.subscribe(new Pn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Mo.w0.EMPTY)}return e}refCount(){return On()(this)}}function Dn(n,e){return(0,jn.e)((t,r)=>{let i=null,a=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe(new Pn.Q(r,_=>{null==i||i.unsubscribe();let E=0;const A=a++;(0,ar.Xf)(n(_,A)).subscribe(i=new Pn.Q(r,S=>r.next(e?e(_,S,A,E++):S),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var Xs=L(5698);function li(...n){const e=(0,Bn.yG)(n);return(0,jn.e)((t,r)=>{(e?ys(n,t,e):ys(n,t)).subscribe(r)})}function ca(n,e,t,r,i){return(a,c)=>{let p=t,_=e,E=0;a.subscribe(new Pn.Q(c,A=>{const S=E++;_=p?n(_,A,S):(p=!0,A),r&&c.next(_)},i&&(()=>{p&&c.next(_),c.complete()})))}}function ss(n,e){return(0,jn.e)(ca(n,e,arguments.length>=2,!0))}function Ai(n,e){return(0,jn.e)((t,r)=>{let i=0;t.subscribe(new Pn.Q(r,a=>n.call(e,a,i++)&&r.next(a)))})}function Br(n){return(0,jn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe(new Pn.Q(t,void 0,void 0,c=>{a=(0,ar.Xf)(n(c,Br(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var yr=L(5577),Dc=L(576);function rn(n,e){return(0,Dc.m)(e)?(0,yr.z)(n,e,1):(0,yr.z)(n,1)}function eo(n){return n<=0?()=>xo.E:(0,jn.e)((e,t)=>{let r=[];e.subscribe(new Pn.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Im(n=Yf){return(0,jn.e)((e,t)=>{let r=!1;e.subscribe(new Pn.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Yf(){return new Js}function Qf(n){return(0,jn.e)((e,t)=>{let r=!1;e.subscribe(new Pn.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function da(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ai((i,a)=>n(i,a,r)):Zi.y,(0,Xs.q)(1),t?Qf(e):Im(()=>new Js))}var jr=L(8505);class to{constructor(e,t){this.id=e,this.url=t}}class qn extends to{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ha extends to{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gi extends to{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Tm extends to{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Xf extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wi extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Si extends to{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qd extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fa extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class No{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ac{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Sc{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pa{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jd{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xd{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ht="primary";class ru{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function os(n){return new ru(n)}const Dm="ngNavigationCancelingError";function xc(n){const e=Error("NavigationCancelingError: "+n);return e[Dm]=!0,e}function eh(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],p=n[a];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function zi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!th(n[i],e[i]))return!1;return!0}function th(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function iu(n){return Array.prototype.concat.apply([],n)}function as(n){return n.length>0?n[n.length-1]:null}function Un(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Sr(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,hn.D)(Promise.resolve(n)):gt(n)}const Po={exact:function I(n,e,t){if(!ct(n.segments,e.segments)||!z(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],t))return!1;return!0},subset:N},ou={exact:function Am(n,e){return zi(n,e)},subset:function T(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>th(n[t],e[t]))},ignored:()=>!0};function cl(n,e,t){return Po[t.paths](n.root,e.root,t.matrixParams)&&ou[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function N(n,e,t){return U(n,e,e.segments,t)}function U(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ct(i,t)||e.hasChildren()||!z(i,t,r))}if(n.segments.length===t.length){if(!ct(n.segments,t)||!z(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!N(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ct(n.segments,i)&&z(n.segments,i,r)&&n.children[ht])&&U(n.children[ht],e,a,r)}}function z(n,e,t){return e.every((r,i)=>ou[t](n[i].parameters,r.parameters))}class Y{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=os(this.queryParams)),this._queryParamMap}toString(){return kn.serialize(this)}}class ue{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Un(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return di(this)}}class We{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=os(this.parameters)),this._parameterMap}toString(){return rh(this)}}function ct(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class At{}class ci{parse(e){const t=new ev(e);return new Y(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${us(e.root,!0)}`,r=function dl(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ls(t)}=${ls(i)}`).join("&"):`${ls(t)}=${ls(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function cs(n){return encodeURI(n)}(e.fragment)}`:""}`}}const kn=new ci;function di(n){return n.segments.map(e=>rh(e)).join("/")}function us(n,e){if(!n.hasChildren())return di(n);if(e){const t=n.children[ht]?us(n.children[ht],!1):"",r=[];return Un(n.children,(i,a)=>{a!==ht&&r.push(`${a}:${us(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Yt(n,e){let t=[];return Un(n.children,(r,i)=>{i===ht&&(t=t.concat(e(r,i)))}),Un(n.children,(r,i)=>{i!==ht&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===ht?[us(n.children[ht],!1)]:[`${i}:${us(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ht]?`${di(n)}/${t[0]}`:`${di(n)}/(${t.join("//")})`}}function hi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ls(n){return hi(n).replace(/%3B/gi,";")}function ma(n){return hi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function au(n){return decodeURIComponent(n)}function Mc(n){return au(n.replace(/\+/g,"%20"))}function rh(n){return`${ma(n.path)}${function tp(n){return Object.keys(n).map(e=>`;${ma(e)}=${ma(n[e])}`).join("")}(n.parameters)}`}const hl=/^[^\/()?;=#]+/;function Rc(n){const e=n.match(hl);return e?e[0]:""}const lC=/^[^=?&#]+/,np=/^[^&#]+/;class ev{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ue([],{}):new ue([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ht]=new ue(e,t)),r}parseSegment(){const e=Rc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new We(au(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Rc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Rc(this.remaining);i&&(r=i,this.capture(r))}e[au(t)]=au(r)}parseQueryParam(e){const t=function Sm(n){const e=n.match(lC);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function cC(n){const e=n.match(np);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Mc(t),a=Mc(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Rc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=ht);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[ht]:new ue([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ih{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=rp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=rp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=fl(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return fl(e,this._root).map(t=>t.value)}}function rp(n,e){if(n===e.value)return e;for(const t of e.children){const r=rp(n,t);if(r)return r}return null}function fl(n,e){if(n===e.value)return[e];for(const t of e.children){const r=fl(n,t);if(r.length)return r.unshift(e),r}return[]}class Ki{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function vs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sh extends ih{constructor(e,t){super(e),this.snapshot=t,Pc(this,e)}toString(){return this.snapshot.toString()}}function Nc(n,e){const t=function xm(n,e){const c=new gl([],{},{},"",{},ht,e,null,n.root,-1,{});return new oh("",new Ki(c,[]))}(n,e),r=new $i([new We("",{})]),i=new $i({}),a=new $i({}),c=new $i({}),p=new $i(""),_=new no(r,i,c,p,a,ht,e,t.root);return _.snapshot=t.root,new sh(new Ki(_,[]),t)}class no{constructor(e,t,r,i,a,c,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=p,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Dt.U)(e=>os(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Dt.U)(e=>os(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pl(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Mm(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class gl{constructor(e,t,r,i,a,c,p,_,E,A,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=p,this.routeConfig=_,this._urlSegment=E,this._lastPathIndex=A,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=os(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=os(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class oh extends ih{constructor(e,t){super(t),this.url=e,Pc(this,t)}toString(){return Rm(this._root)}}function Pc(n,e){e.value._routerState=n,e.children.forEach(t=>Pc(n,t))}function Rm(n){const e=n.children.length>0?` { ${n.children.map(Rm).join(", ")} } `:"";return`${n.value}${e}`}function ah(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,zi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),zi(e.params,t.params)||n.params.next(t.params),function ga(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!zi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),zi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Oc(n,e){const t=zi(n.params,e.params)&&function It(n,e){return ct(n,e)&&n.every((t,r)=>zi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Oc(n.parent,e.parent))}function kc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function _a(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return kc(n,r,i);return kc(n,r)})}(n,e,t);return new Ki(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>kc(n,p)),c}}const r=function uu(n){return new no(new $i(n.url),new $i(n.params),new $i(n.queryParams),new $i(n.fragment),new $i(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>kc(n,a));return new Ki(r,i)}}function ip(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Fc(n){return"object"==typeof n&&null!=n&&n.outlets}function Nm(n,e,t,r,i){let a={};return r&&Un(r,(c,p)=>{a[p]=Array.isArray(c)?c.map(_=>`${_}`):`${c}`}),new Y(t.root===n?e:uh(t.root,n,e),a,i)}function uh(n,e,t){const r={};return Un(n.children,(i,a)=>{r[a]=i===e?t:uh(i,e,t)}),new ue(n.segments,r)}class rv{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ip(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Fc);if(i&&i!==as(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function av(n,e,t){if(n||(n=new ue([],{})),0===n.segments.length&&n.hasChildren())return lh(n,e,t);const r=function ml(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],p=t[r];if(Fc(p))break;const _=`${p}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&E&&"object"==typeof E&&void 0===E.outlets){if(!op(_,E,c))return a;r+=2}else{if(!op(_,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new ue(n.segments.slice(0,r.pathIndex),{});return a.children[ht]=new ue(n.segments.slice(r.pathIndex),n.children),lh(a,0,i)}return r.match&&0===i.length?new ue(n.segments,{}):r.match&&!n.hasChildren()?ch(n,e,t):r.match?lh(n,0,i):ch(n,e,t)}function lh(n,e,t){if(0===t.length)return new ue(n.segments,{});{const r=function ov(n){return Fc(n[0])?n[0].outlets:{[ht]:n}}(t),i={};return Un(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=av(n.children[c],e,a))}),Un(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new ue(n.segments,i)}}function ch(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Fc(a)){const _=ro(a.outlets);return new ue(r,_)}if(0===i&&ip(t[0])){r.push(new We(n.segments[e].path,_l(t[0]))),i++;continue}const c=Fc(a)?a.outlets[ht]:`${a}`,p=i<t.length-1?t[i+1]:null;c&&p&&ip(p)?(r.push(new We(c,_l(p))),i+=2):(r.push(new We(c,{})),i++)}return new ue(r,{})}function ro(n){const e={};return Un(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ch(new ue([],{}),0,t))}),e}function _l(n){const e={};return Un(n,(t,r)=>e[r]=`${t}`),e}function op(n,e,t){return n==t.path&&zi(e,t.parameters)}class ap{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ah(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=vs(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Un(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=vs(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=vs(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=vs(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Xd(a.value.snapshot))}),e.children.length&&this.forwardEvent(new pa(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(ah(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),ah(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function dC(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=_,c.outlet&&c.outlet.activateWith(i,_),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class km{constructor(e,t){this.routes=e,this.module=t}}function lu(n){return"function"==typeof n}function ws(n){return n instanceof Y}const Lc=Symbol("INITIAL_VALUE");function cu(){return Dn(n=>function al(...n){const e=(0,Bn.yG)(n),t=(0,Bn.jO)(n),{args:r,keys:i}=Xa(n);if(0===r.length)return(0,hn.D)([],e);const a=new tr.y(function Hi(n,e,t=Zi.y){return r=>{ul(e,()=>{const{length:i}=n,a=new Array(i);let c=i,p=i;for(let _=0;_<i;_++)ul(e,()=>{const E=(0,hn.D)(n[_],e);let A=!1;E.subscribe(new Pn.Q(r,S=>{a[_]=S,A||(A=!0,p--),p||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Qs(i,c):Zi.y));return t?a.pipe(ol(t)):a}(n.map(e=>e.pipe((0,Xs.q)(1),li(Lc)))).pipe(ss((e,t)=>{let r=!1;return t.reduce((i,a,c)=>i!==Lc?i:(a===Lc&&(r=!0),r||!1!==a&&c!==t.length-1&&!ws(a)?i:a),e)},Lc),Ai(e=>e!==Lc),(0,Dt.U)(e=>ws(e)?e:!0===e),(0,Xs.q)(1)))}class uv{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new yl,this.attachRef=null}}class yl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new uv,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Uc=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=a||ht,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,_=new dh(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(yl),l.Y36(l.s_b),l.Y36(l._Vd),l.$8M("name"),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class dh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===no?this.route:e===yl?this.childContexts:this.parent.get(e,t)}}let Lm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},directives:[Uc],encapsulation:2}),n})();function hh(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];fC(r,An(e,r))}}function fC(n,e){n.children&&hh(n.children,e)}function An(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function dp(n){const e=n.children&&n.children.map(dp),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ht&&(t.component=Lm),t}function ds(n){return n.outlet||ht}function vl(n,e){const t=n.filter(r=>ds(r)===e);return t.push(...n.filter(r=>ds(r)!==e)),t}const hp={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function wl(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},hp):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||eh)(t,n,e);if(!a)return Object.assign({},hp);const c={};Un(a.posParams,(_,E)=>{c[E]=_.path});const p=a.consumed.length>0?Object.assign(Object.assign({},c),a.consumed[a.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:p,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function fh(n,e,t,r,i="corrected"){if(t.length>0&&function cv(n,e,t){return t.some(r=>Vc(n,e,r)&&ds(r)!==ht)}(n,t,r)){const c=new ue(e,function fp(n,e,t,r){const i={};i[ht]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&ds(a)!==ht){const c=new ue([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[ds(a)]=c}return i}(n,e,r,new ue(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function pC(n,e,t){return t.some(r=>Vc(n,e,r))}(n,t,r)){const c=new ue(n.segments,function lv(n,e,t,r,i,a){const c={};for(const p of r)if(Vc(n,t,p)&&!i[ds(p)]){const _=new ue([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[ds(p)]=_}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new ue(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Vc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function El(n,e,t,r){return!!(ds(n)===r||r!==ht&&Vc(e,t,n))&&("**"===n.path||wl(e,n,t).matched)}function ei(n,e,t){return 0===e.length&&!n.children[t]}class du{constructor(e){this.segmentGroup=e||null}}class pp{constructor(e){this.urlTree=e}}function Bc(n){return new tr.y(e=>e.error(new du(n)))}function xr(n){return new tr.y(e=>e.error(new pp(n)))}function hu(n){return new tr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class mp{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(l.h0i)}apply(){const e=fh(this.urlTree.root,[],[],this.config).segmentGroup,t=new ue(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,ht).pipe((0,Dt.U)(a=>this.createUrlTree(_p(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Br(a=>{if(a instanceof pp)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof du?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ht).pipe((0,Dt.U)(i=>this.createUrlTree(_p(i),e.queryParams,e.fragment))).pipe(Br(i=>{throw i instanceof du?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new ue([],{[ht]:e}):e;return new Y(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Dt.U)(a=>new ue([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,hn.D)(i).pipe(rn(a=>{const c=r.children[a],p=vl(t,a);return this.expandSegmentGroup(e,p,c,a).pipe((0,Dt.U)(_=>({segment:_,outlet:a})))}),ss((a,c)=>(a[c.outlet]=c.segment,a),{}),function Jf(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ai((i,a)=>n(i,a,r)):Zi.y,eo(1),t?Qf(e):Im(()=>new Js))}())}expandSegment(e,t,r,i,a,c){return(0,hn.D)(r).pipe(rn(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,a,c).pipe(Br(E=>{if(E instanceof du)return gt(null);throw E}))),da(p=>!!p),Br((p,_)=>{if(p instanceof Js||"EmptyError"===p.name){if(ei(t,i,a))return gt(new ue([],{}));throw new du(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,i,a,c,p){return El(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):Bc(t):Bc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?xr(a):this.lineralizeSegments(r,a).pipe((0,yr.z)(c=>{const p=new ue(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:p,consumedSegments:_,lastChild:E,positionalParamSegments:A}=wl(t,i,a);if(!p)return Bc(t);const S=this.applyRedirectCommands(_,i.redirectTo,A);return i.redirectTo.startsWith("/")?xr(S):this.lineralizeSegments(i,S).pipe((0,yr.z)(P=>this.expandSegment(e,t,r,P.concat(a.slice(E)),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?gt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Dt.U)(P=>(r._loadedConfig=P,new ue(i,{})))):gt(new ue(i,{}));const{matched:c,consumedSegments:p,lastChild:_}=wl(t,r,i);if(!c)return Bc(t);const E=i.slice(_);return this.getChildConfig(e,r,i).pipe((0,yr.z)(S=>{const P=S.module,V=S.routes,{segmentGroup:G,slicedSegments:fe}=fh(t,p,E,V),Te=new ue(G.segments,G.children);if(0===fe.length&&Te.hasChildren())return this.expandChildren(P,V,Te).pipe((0,Dt.U)(Ke=>new ue(p,Ke)));if(0===V.length&&0===fe.length)return gt(new ue(p,{}));const dt=ds(r)===a;return this.expandSegment(P,Te,V,fe,dt?ht:a,!0).pipe((0,Dt.U)(ft=>new ue(p.concat(ft.segments),ft.children)))}))}getChildConfig(e,t,r){return t.children?gt(new km(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?gt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,yr.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Dt.U)(a=>(t._loadedConfig=a,a))):function gp(n){return new tr.y(e=>e.error(xc(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):gt(new km([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?gt(i.map(c=>{const p=e.get(c);let _;if(function lp(n){return n&&lu(n.canLoad)}(p))_=p.canLoad(t,r);else{if(!lu(p))throw new Error("Invalid CanLoad guard");_=p(t,r)}return Sr(_)})).pipe(cu(),(0,jr.b)(c=>{if(!ws(c))return;const p=xc(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,Dt.U)(c=>!0===c)):gt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return gt(r);if(i.numberOfChildren>1||!i.children[ht])return hu(e.redirectTo);i=i.children[ht]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Y(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Un(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[a]=t[p]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Un(t.children,(p,_)=>{c[_]=this.createSegmentGroup(e,p,r,i)}),new ue(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function _p(n){const e={};for(const r of Object.keys(n.children)){const a=_p(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function ph(n){if(1===n.numberOfChildren&&n.children[ht]){const e=n.children[ht];return new ue(n.segments.concat(e.segments),e.children)}return n}(new ue(n.segments,e))}class jc{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class qc{constructor(e,t){this.component=e,this.route=t}}function hv(n,e,t){const r=n._root;return $c(r,e?e._root:null,t,[r.value])}function fu(n,e,t){const r=function pv(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function $c(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=vs(e);return n.children.forEach(c=>{(function yp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const _=function gv(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ct(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ct(n.url,e.url)||!zi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Oc(n,e)||!zi(n.queryParams,e.queryParams);default:return!Oc(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new jc(r)):(a.data=c.data,a._resolvedData=c._resolvedData),$c(n,e,a.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new qc(p.outlet.component,c))}else c&&ya(e,p,i),i.canActivateChecks.push(new jc(r)),$c(n,null,a.component?p?p.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Un(a,(c,p)=>ya(c,t.getContext(p),i)),i}function ya(n,e,t){const r=vs(n),i=n.value;Un(r,(a,c)=>{ya(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new qc(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Ep{}function Cp(n){return new tr.y(e=>e.error(n))}class gh{constructor(e,t,r,i,a,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=c}recognize(){const e=fh(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,ht);if(null===t)return null;const r=new gl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ht,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ki(r,t),a=new oh(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=pl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const c=t.children[a],p=vl(e,a),_=this.processSegmentGroup(p,c,a);if(null===_)return null;r.push(..._)}const i=va(r);return function Ev(n){n.sort((e,t)=>e.value.outlet===ht?-1:t.value.outlet===ht?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const c=this.processSegmentAgainstRoute(a,t,r,i);if(null!==c)return c}return ei(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!El(e,t,r,i))return null;let a,c=[],p=[];if("**"===e.path){const V=r.length>0?as(r).parameters:{};a=new gl(r,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Tp(e),ds(e),e.component,e,bp(t),Ip(t)+r.length,Bm(e))}else{const V=wl(t,e,r);if(!V.matched)return null;c=V.consumedSegments,p=r.slice(V.lastChild),a=new gl(c,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Tp(e),ds(e),e.component,e,bp(t),Ip(t)+c.length,Bm(e))}const _=function Yi(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:E,slicedSegments:A}=fh(t,c,p,_.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);if(0===A.length&&E.hasChildren()){const V=this.processChildren(_,E);return null===V?null:[new Ki(a,V)]}if(0===_.length&&0===A.length)return[new Ki(a,[])];const S=ds(e)===i,P=this.processSegment(_,E,A,S?ht:i);return null===P?null:[new Ki(a,P)]}}function Hc(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function va(n){const e=[],t=new Set;for(const r of n){if(!Hc(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=va(r.children);e.push(new Ki(r.value,i))}return e.filter(r=>!t.has(r))}function bp(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ip(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Tp(n){return n.data||{}}function Bm(n){return n.resolve||{}}function pu(n){return Dn(e=>{const t=n(e);return t?(0,hn.D)(t).pipe((0,Dt.U)(()=>e)):gt(e)})}class Gc extends class fi{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const gu=new l.OlP("ROUTES");class Ap{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Dt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=a.create(e);return new km(iu(c.injector.get(gu,void 0,l.XFs.Self|l.XFs.Optional)).map(dp),c)}),Br(a=>{throw t._loader$=void 0,a}));return t._loader$=new Tc(i,()=>new Ys.x).pipe(On()),t._loader$}loadModuleFactory(e){return Sr(e()).pipe((0,yr.z)(t=>t instanceof l.YKP?gt(t):(0,hn.D)(this.compiler.compileModuleAsync(t))))}}class oo{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function _h(n){throw n}function Sp(n,e,t){return e.parse("/")}function qm(n,e){return gt(null)}const Wc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bv={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vr=(()=>{class n{constructor(t,r,i,a,c,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ys.x,this.errorHandler=_h,this.malformedUriErrorHandler=Sp,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qm,afterPreactivation:qm},this.urlHandlingStrategy=new oo,this.routeReuseStrategy=new Gc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(l.h0i),this.console=c.get(l.c2e);const S=c.get(l.R0b);this.isNgZoneEnabled=S instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function nh(){return new Y(new ue([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ap(c,p,P=>this.triggerEvent(new No(P)),P=>this.triggerEvent(new Ac(P))),this.routerState=Nc(this.currentUrlTree,this.rootComponentType),this.transitions=new $i({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ai(i=>0!==i.id),(0,Dt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Dn(i=>{let a=!1,c=!1;return gt(i).pipe((0,jr.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Dn(p=>{const _=this.browserUrlTree.toString(),E=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return yh(p.source)&&(this.browserUrlTree=p.extractedUrl),gt(p).pipe(Dn(S=>{const P=this.transitions.getValue();return r.next(new qn(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?xo.E:Promise.resolve(S)}),function Um(n,e,t,r){return Dn(i=>function dv(n,e,t,r,i){return new mp(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Dt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,jr.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function io(n,e,t,r,i){return(0,yr.z)(a=>function wv(n,e,t,r,i="emptyOnly",a="legacy"){try{const c=new gh(n,e,t,r,i,a).recognize();return null===c?Cp(new Ep):gt(c)}catch(c){return Cp(c)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,Dt.U)(c=>Object.assign(Object.assign({},a),{targetSnapshot:c}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,jr.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const P=new Xf(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:V,source:G,restoredState:fe,extras:Te}=p,dt=new qn(P,this.serializeUrl(V),G,fe);r.next(dt);const ze=Nc(V,this.rootComponentType).snapshot;return gt(Object.assign(Object.assign({},p),{targetSnapshot:ze,urlAfterRedirects:V,extras:Object.assign(Object.assign({},Te),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),xo.E}),pu(p=>{const{targetSnapshot:_,id:E,extractedUrl:A,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:V}}=p;return this.hooks.beforePreactivation(_,{navigationId:E,appliedUrlTree:A,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!V})}),(0,jr.b)(p=>{const _=new Wi(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,Dt.U)(p=>Object.assign(Object.assign({},p),{guards:hv(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function Zc(n,e){return(0,yr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?gt(Object.assign(Object.assign({},t),{guardsResult:!0})):function Vm(n,e,t,r){return(0,hn.D)(n).pipe((0,yr.z)(i=>function wp(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?gt(a.map(p=>{const _=fu(p,e,i);let E;if(function cp(n){return n&&lu(n.canDeactivate)}(_))E=Sr(_.canDeactivate(n,e,t,r));else{if(!lu(_))throw new Error("Invalid CanDeactivate guard");E=Sr(_(n,e,t,r))}return E.pipe(da())})).pipe(cu()):gt(!0)}(i.component,i.route,t,e,r)),da(i=>!0!==i,!0))}(c,r,i,n).pipe((0,yr.z)(p=>p&&function up(n){return"boolean"==typeof n}(p)?function mv(n,e,t,r){return(0,hn.D)(e).pipe(rn(i=>ys(function yv(n,e){return null!==n&&e&&e(new Sc(n)),gt(!0)}(i.route.parent,r),function _v(n,e){return null!==n&&e&&e(new Jd(n)),gt(!0)}(i.route,r),function vp(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function fv(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Kf(()=>gt(c.guards.map(_=>{const E=fu(_,c.node,t);let A;if(function hC(n){return n&&lu(n.canActivateChild)}(E))A=Sr(E.canActivateChild(r,n));else{if(!lu(E))throw new Error("Invalid CanActivateChild guard");A=Sr(E(r,n))}return A.pipe(da())})).pipe(cu())));return gt(a).pipe(cu())}(n,i.path,t),function vv(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const i=r.map(a=>Kf(()=>{const c=fu(a,e,t);let p;if(function Fm(n){return n&&lu(n.canActivate)}(c))p=Sr(c.canActivate(e,n));else{if(!lu(c))throw new Error("Invalid CanActivate guard");p=Sr(c(e,n))}return p.pipe(da())}));return gt(i).pipe(cu())}(n,i.route,t))),da(i=>!0!==i,!0))}(r,a,n,e):gt(p)),(0,Dt.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,jr.b)(p=>{if(ws(p.guardsResult)){const E=xc(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw E.url=p.guardsResult,E}const _=new Si(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),Ai(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),pu(p=>{if(p.guards.canActivateChecks.length)return gt(p).pipe((0,jr.b)(_=>{const E=new Qd(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(E)}),Dn(_=>{let E=!1;return gt(_).pipe(function so(n,e){return(0,yr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return gt(t);let a=0;return(0,hn.D)(i).pipe(rn(c=>function mh(n,e,t,r){return function Cv(n,e,t,r){const i=Object.keys(n);if(0===i.length)return gt({});const a={};return(0,hn.D)(i).pipe((0,yr.z)(c=>function jm(n,e,t,r){const i=fu(n,e,r);return Sr(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,jr.b)(p=>{a[c]=p}))),eo(1),(0,yr.z)(()=>Object.keys(a).length===i.length?gt(a):xo.E))}(n._resolve,n,e,r).pipe((0,Dt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),pl(n,t).resolve),null)))}(c.route,r,n,e)),(0,jr.b)(()=>a++),eo(1),(0,yr.z)(c=>a===i.length?gt(t):xo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,jr.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,jr.b)(_=>{const E=new fa(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(E)}))}),pu(p=>{const{targetSnapshot:_,id:E,extractedUrl:A,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:V}}=p;return this.hooks.afterPreactivation(_,{navigationId:E,appliedUrlTree:A,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!V})}),(0,Dt.U)(p=>{const _=function tv(n,e,t){const r=kc(n,e._root,t?t._root:void 0);return new sh(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:_})}),(0,jr.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,Dt.U)(r=>(new ap(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,jr.b)({next(){a=!0},complete(){a=!0}}),function Ro(n){return(0,jn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;a||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),Br(p=>{if(c=!0,function ep(n){return n&&n[Dm]}(p)){const _=ws(p.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const E=new Gi(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(E),_?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||yh(i.source)};this.scheduleNavigation(A,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new Tm(i.id,this.serializeUrl(i.extractedUrl),p);r.next(_);try{i.resolve(this.errorHandler(p))}catch(E){i.reject(E)}}return xo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){hh(t),this.config=t.map(dp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:p,preserveFragment:_}=r,E=i||this.routerState.root,A=_?this.currentUrlTree.fragment:c;let S=null;switch(p){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function nv(n,e,t,r,i){if(0===t.length)return Nm(e.root,e.root,e,r,i);const a=function Pm(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new rv(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const p={};return Un(a.outlets,(_,E)=>{p[E]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,a]},[]);return new rv(t,e,r)}(t);if(a.toRoot())return Nm(e.root,new ue([],{}),e,r,i);const c=function iv(n,e,t){if(n.isAbsolute)return new sp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new sp(a,a===e.root,0)}const r=ip(n.commands[0])?0:1;return function sv(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new sp(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),p=c.processChildren?lh(c.segmentGroup,c.index,a.commands):av(c.segmentGroup,c.index,a.commands);return Nm(c.segmentGroup,p,e,r,i)}(E,this.currentUrlTree,t,S,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ws(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Iv(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Wc):!1===r?Object.assign({},bv):r,ws(t))return cl(this.currentUrlTree,t,i);const a=this.parseUrl(t);return cl(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ha(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){var p,_,E;if(this.disposed)return Promise.resolve(!1);const A=this.transitions.value,S=yh(r)&&A&&!yh(A.source),P=A.rawUrl.toString()===t.toString(),V=A.id===(null===(p=this.currentNavigation)||void 0===p?void 0:p.id);if(S&&P&&V)return Promise.resolve(!0);let fe,Te,dt;c?(fe=c.resolve,Te=c.reject,dt=c.promise):dt=new Promise((Ke,Mt)=>{fe=Ke,Te=Mt});const ze=++this.navigationId;let ft;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),ft=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):ft=0,this.setTransition({id:ze,targetPageId:ft,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:fe,reject:Te,promise:dt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),dt.catch(Ke=>Promise.reject(Ke))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Gi(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function yh(n){return"imperative"!==n}let y=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.commands=null,this.onChanges=new Ys.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:g(this.skipLocationChange),replaceUrl:g(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:g(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(vr),l.Y36(no),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&l.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[l.TTD]}),n})(),f=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Ys.x,this.subscription=t.events.subscribe(a=>{a instanceof ha&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,c){if(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:g(this.skipLocationChange),replaceUrl:g(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:g(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(vr),l.Y36(no),l.Y36(he))},n.\u0275dir=l.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&l.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&l.uIk("target",r.target)("href",r.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[l.TTD]}),n})();function g(n){return""===n||!!n}class M{}class ee{preload(e,t){return gt(null)}}let Ne=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Ap(i,r,_=>t.triggerEvent(new No(_)),_=>t.triggerEvent(new Ac(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ai(t=>t instanceof ha),rn(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(l.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const c=a._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,hn.D)(i).pipe((0,ll.J)(),(0,Dt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?gt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,yr.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(vr),l.LFG(l.Sil),l.LFG(l.zs3),l.LFG(M))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof qn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ha&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof nu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new nu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Xe=new l.OlP("ROUTER_CONFIGURATION"),jt=new l.OlP("ROUTER_FORROOT_GUARD"),Mr=[et,{provide:At,useClass:ci},{provide:vr,useFactory:function Rp(n,e,t,r,i,a,c={},p,_){const E=new vr(null,n,e,t,r,i,iu(a));return p&&(E.urlHandlingStrategy=p),_&&(E.routeReuseStrategy=_),function Kc(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,E),c.enableTracing&&E.events.subscribe(A=>{var S,P;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(P=console.groupEnd)||void 0===P||P.call(console)}),E},deps:[At,yl,et,l.zs3,l.Sil,gu,Xe,[class wa{},new l.FiY],[class Dp{},new l.FiY]]},yl,{provide:no,useFactory:function bl(n){return n.routerState.root},deps:[vr]},Ne,ee,class j{preload(e,t){return t().pipe(Br(()=>gt(null)))}},{provide:Xe,useValue:{enableTracing:!1}}];function Es(){return new l.PXZ("Router",vr)}let zc=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Mr,Cl(t),{provide:jt,useFactory:Mp,deps:[[vr,new l.FiY,new l.tp0]]},{provide:Xe,useValue:r||{}},{provide:he,useFactory:xp,deps:[ce,[new l.tBr(Le),new l.FiY],Xe]},{provide:Se,useFactory:vh,deps:[vr,pc,Xe]},{provide:M,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:ee},{provide:l.PXZ,multi:!0,useFactory:Es},[Yc,{provide:l.ip1,multi:!0,useFactory:Np,deps:[Yc]},{provide:Eh,useFactory:wh,deps:[Yc]},{provide:l.tb,multi:!0,useExisting:Eh}]]}}static forChild(t){return{ngModule:n,providers:[Cl(t)]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(jt,8),l.LFG(vr,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function vh(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Se(n,e,t)}function xp(n,e,t={}){return t.useHash?new Pe(n,e):new Ve(n,e)}function Mp(n){return"guarded"}function Cl(n){return[{provide:l.deG,multi:!0,useValue:n},{provide:gu,multi:!0,useValue:n}]}let Yc=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ys.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),a=this.injector.get(vr),c=this.injector.get(Xe);return"disabled"===c.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?gt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Xe),i=this.injector.get(Ne),a=this.injector.get(Se),c=this.injector.get(vr),p=this.injector.get(l.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),a.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Np(n){return n.appInitializer.bind(n)}function wh(n){return n.bootstrapListener.bind(n)}const Eh=new l.OlP("Router Initializer");var Ch=L(127),Tv=L(4986),dn=L(5813);function $m(){return(0,jn.e)((n,e)=>{let t,r=!1;n.subscribe(new Pn.Q(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Zm(n,e=Zi.y){return n=null!=n?n:gC,(0,jn.e)((t,r)=>{let i,a=!0;t.subscribe(new Pn.Q(r,c=>{const p=e(c);(a||!n(i,p))&&(a=!1,i=p,r.next(c))}))})}function gC(n,e){return n===e}var tt,ti=L(2011),Dv=(L(1254),L(3942)),ge=L(5861),Qi=L(9681),ko=L(4859),wr=L(1877),O=L(2090),mC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},mu={},Av=Av||{},Pt=mC||self;function Op(){}function Sv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function kp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var St="closure_uid_"+(1e9*Math.random()>>>0),_C=0;function yC(n,e,t){return n.call.apply(n.bind,arguments)}function vC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Rr(n,e,t){return(Rr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yC:vC).apply(null,arguments)}function hs(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ni(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function Il(){this.s=this.s,this.o=this.o}var _u={};Il.prototype.s=!1,Il.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function RD(n){return Object.prototype.hasOwnProperty.call(n,St)&&n[St]||(n[St]=++_C)}(this);delete _u[n]}},Il.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Hm=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Mv=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function ND(n){return Array.prototype.concat.apply([],arguments)}function Gm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Nv(n){return/^[\s\xa0]*$/.test(n)}var pi,Fp=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ri(n,e){return-1!=n.indexOf(e)}function Lp(n,e){return n<e?-1:n>e?1:0}e:{var Wm=Pt.navigator;if(Wm){var PD=Wm.userAgent;if(PD){pi=PD;break e}}pi=""}function Pv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function wC(n){const e={};for(const t in n)e[t]=n[t];return e}var EC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function CC(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<EC.length;a++)t=EC[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function zm(n){return zm[" "](n),n}zm[" "]=Op;var Fv,n,OD=ri(pi,"Opera"),Up=ri(pi,"Trident")||ri(pi,"MSIE"),Ov=ri(pi,"Edge"),Km=Ov||Up,bC=ri(pi,"Gecko")&&!(ri(pi.toLowerCase(),"webkit")&&!ri(pi,"Edge"))&&!(ri(pi,"Trident")||ri(pi,"MSIE"))&&!ri(pi,"Edge"),kv=ri(pi.toLowerCase(),"webkit")&&!ri(pi,"Edge");function kD(){var n=Pt.document;return n?n.documentMode:void 0}e:{var IC="",TC=(n=pi,bC?/rv:([^\);]+)(\)|;)/.exec(n):Ov?/Edge\/([\d\.]+)/.exec(n):Up?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):kv?/WebKit\/(\S+)/.exec(n):OD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(TC&&(IC=TC?TC[1]:""),Up){var DC=kD();if(null!=DC&&DC>parseFloat(IC)){Fv=String(DC);break e}}Fv=IC}var vR={};var ER=Pt.document&&Up&&(kD()||parseInt(Fv,10))||void 0,Tl=function(){if(!Pt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Pt.addEventListener("test",Op,e),Pt.removeEventListener("test",Op,e)}catch(t){}return n}();function ii(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Vp(n,e){if(ii.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(bC){e:{try{zm(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:SC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Vp.Z.h.call(this)}}ii.prototype.h=function(){this.defaultPrevented=!0},ni(Vp,ii);var SC={2:"touch",3:"pen",4:"mouse"};Vp.prototype.h=function(){Vp.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Qc="closure_listenable_"+(1e6*Math.random()|0),xC=0;function Lv(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++xC,this.ca=this.fa=!1}function Ym(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Fo(n){this.src=n,this.g={},this.h=0}function Qm(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Hm(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Ym(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Uv(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}Fo.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=Uv(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new Lv(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Bp="closure_lm_"+(1e6*Math.random()|0),Vv={};function Bv(n,e,t,r,i){if(r&&r.once)return bh(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Bv(n,e[a],t,r,i);return null}return t=Jm(t),n&&n[Qc]?n.N(e,t,kp(r)?!!r.capture:!!r,i):MC(n,e,t,!1,r,i)}function MC(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=kp(i)?!!i.capture:!!i,p=Dl(n);if(p||(n[Bp]=p=new Fo(n)),(t=p.add(e,t,r,c,a)).proxy)return t;if(r=function LD(){var e=qp;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Tl||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Xc(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function bh(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)bh(n,e[a],t,r,i);return null}return t=Jm(t),n&&n[Qc]?n.O(e,t,kp(r)?!!r.capture:!!r,i):MC(n,e,t,!0,r,i)}function Jc(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Jc(n,e[a],t,r,i);else r=kp(r)?!!r.capture:!!r,t=Jm(t),n&&n[Qc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Uv(a=n.g[e],t,r,i))&&(Ym(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Dl(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Uv(e,t,r,i)),(t=-1<n?e[n]:null)&&jp(t))}function jp(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Qc])Qm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Xc(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Dl(e))?(Qm(t,n),0==t.h&&(t.src=null,e[Bp]=null)):Ym(n)}}}function Xc(n){return n in Vv?Vv[n]:Vv[n]="on"+n}function qp(n,e){if(n.ca)n=!0;else{e=new Vp(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&jp(n),n=t.call(r,e)}return n}function Dl(n){return(n=n[Bp])instanceof Fo?n:null}var jv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jm(n){return"function"==typeof n?n:(n[jv]||(n[jv]=function(e){return n.handleEvent(e)}),n[jv])}function qr(){Il.call(this),this.i=new Fo(this),this.P=this,this.I=null}function $r(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ii(e,n);else if(e instanceof ii)e.target=e.target||n;else{var i=e;CC(e=new ii(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=Ih(c,r,!0,e)&&i}if(i=Ih(c=e.g=n,r,!0,e)&&i,i=Ih(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Ih(c=e.g=t[a],r,!1,e)&&i}function Ih(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ca&&c.capture==t){var p=c.listener,_=c.ia||c.src;c.fa&&Qm(n.i,c),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}ni(qr,Il),qr.prototype[Qc]=!0,qr.prototype.removeEventListener=function(n,e,t,r){Jc(this,n,e,t,r)},qr.prototype.M=function(){if(qr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ym(t[r]);delete n.g[e],n.h--}}this.I=null},qr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},qr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Xm=Pt.JSON.stringify;function e_(){var n=PC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var $v,qv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new CR,n=>n.reset());class CR{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function RC(n){Pt.setTimeout(()=>{throw n},0)}function t_(n,e){$v||function NC(){var n=Pt.Promise.resolve(void 0);$v=function(){n.then(Cs)}}(),Zv||($v(),Zv=!0),PC.add(n,e)}var Zv=!1,PC=new class UD{constructor(){this.h=this.g=null}add(e,t){const r=qv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Cs(){for(var n;n=e_();){try{n.h.call(n.g)}catch(t){RC(t)}var e=qv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Zv=!1}function n_(n,e){qr.call(this),this.h=n||1,this.g=e||Pt,this.j=Rr(this.kb,this),this.l=Date.now()}function Hv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function OC(n,e,t){if("function"==typeof n)t&&(n=Rr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Rr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Pt.setTimeout(n,e||0)}function VD(n){n.g=OC(()=>{n.g=null,n.i&&(n.i=!1,VD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ni(n_,qr),(tt=n_.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),$r(this,"tick"),this.da&&(Hv(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){n_.Z.M.call(this),Hv(this),delete this.g};class kC extends Il{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:VD(this)}M(){super.M(),this.g&&(Pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function r_(n){Il.call(this),this.h=n,this.g={}}ni(r_,Il);var FC=[];function i_(n,e,t,r){Array.isArray(t)||(t&&(FC[0]=t.toString()),t=FC);for(var i=0;i<t.length;i++){var a=Bv(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Gv(n){Pv(n.g,function(e,t){this.g.hasOwnProperty(t)&&jp(e)},n),n.g={}}function s_(){this.g=!0}function ed(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function LC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return Xm(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}r_.prototype.M=function(){r_.Z.M.call(this),Gv(this)},r_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},s_.prototype.Aa=function(){this.g=!1},s_.prototype.info=function(){};var td={},UC=null;function $p(){return UC=UC||new qr}function Wv(n){ii.call(this,td.Ma,n)}function Zp(n){const e=$p();$r(e,new Wv(e,n))}function Lo(n,e){ii.call(this,td.STAT_EVENT,n),this.stat=e}function gi(n){const e=$p();$r(e,new Lo(e,n))}function VC(n,e){ii.call(this,td.Na,n),this.size=e}function Hp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Pt.setTimeout(function(){n()},e)}td.Ma="serverreachability",ni(Wv,ii),td.STAT_EVENT="statevent",ni(Lo,ii),td.Na="timingevent",ni(VC,ii);var zv={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Kv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Yv(){}function jC(){}Yv.prototype.h=null;var Th,nd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Qv(){ii.call(this,"d")}function Jv(){ii.call(this,"c")}function Dh(){}function Gp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new r_(this),this.P=Xv,this.W=new n_(n=Km?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new o_}function o_(){this.i=null,this.g="",this.h=!1}ni(Qv,ii),ni(Jv,ii),ni(Dh,Yv),Dh.prototype.g=function(){return new XMLHttpRequest},Dh.prototype.i=function(){return{}},Th=new Dh;var Xv=45e3,a_={},u_={};function e0(n,e,t){n.K=1,n.v=d_(Uo(e)),n.s=t,n.U=!0,l_(n,null)}function l_(n,e){n.F=Date.now(),Ah(n),n.A=Uo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),s0(t.h,"t",r),n.C=0,t=n.l.H,n.h=new o_,n.g=d0(n.l,t?e:null,!n.s),0<n.O&&(n.L=new kC(Rr(n.Ia,n,n.g),n.O)),i_(n.V,n.g,"readystatechange",n.gb),e=n.H?wC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Zp(1),function BD(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",p=a.split("&"),_=0;_<p.length;_++){var E=p[_].split("=");if(1<E.length){var A=E[0];E=E[1];var S=A.split("_");c=2<=S.length&&"type"==S[1]?c+(A+"=")+E+"&":c+(A+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function $D(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function qC(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=$C(n,t),i==u_){4==e&&(n.o=4,gi(14),r=!1),ed(n.j,n.m,null,"[Incomplete Response]");break}if(i==a_){n.o=4,gi(15),ed(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ed(n.j,n.m,i,null),xh(n,i)}$D(n)&&i!=u_&&i!=a_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,gi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Pl(e),e.L=!0,gi(11))):(ed(n.j,n.m,t,"[Invalid Chunked Response]"),Ji(n),Sh(n))}function $C(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?u_:(t=Number(e.substring(t,r)),isNaN(t)?a_:(r+=1)+t>e.length?u_:(e=e.substr(r,t),n.C=r+t,e))}function Ah(n){n.Y=Date.now()+n.P,t0(n,n.P)}function t0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Hp(Rr(n.eb,n),e)}function Wp(n){n.B&&(Pt.clearTimeout(n.B),n.B=null)}function Sh(n){0==n.l.G||n.I||od(n.l,n)}function Ji(n){Wp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Hv(n.W),Gv(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function xh(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||YC(t.i,n)))if(t.I=n.N,!n.J&&YC(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(E){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Hp(Rr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;vu(t),y_(t)}Nl(t),gi(18)}if(1>=o0(t.i)&&t.ka){try{t.ka()}catch(E){}t.ka=void 0}}else uo(t,11)}else if((n.J||t.g==n)&&vu(t),!Nv(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const A=E[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const S=E[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const P=E[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const G=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var a=r.i;!a.g&&(ri(G,"spdy")||ri(G,"quic")||ri(G,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(f_(a,a.h),a.h=null))}if(r.D){const fe=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;fe&&(r.sa=fe,Vn(r.F,r.D,fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=ld(r,r.H?r.la:null,r.W),c.J){QC(r.i,c);var p=c,_=r.K;_&&p.setTimeout(_),p.B&&(Wp(p),Ah(p)),r.g=c}else w_(r);0<t.l.length&&xl(t)}else"stop"!=E[0]&&"close"!=E[0]||uo(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?uo(t,7):c0(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}Zp(4)}catch(E){}}function n0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Sv(n)||"string"==typeof n)Mv(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Sv(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function ZD(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Sv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function zp(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof zp)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Kp(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Al(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Al(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Al(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(tt=Gp.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const e=this.L;e&&3==yu(n)?e.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const A=yu(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>A)&&(3!=A||Km||this.g&&(this.h.h||this.g.ga()||ob(this.g)))){this.I||4!=A||7==e||Zp(8==e||0>=S?3:2),Wp(this);var t=this.g.ba();this.N=t;t:if($D(this)){var r=ob(this.g);n="";var i=r.length,a=4==yu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ji(this),Sh(this);var c="";break t}this.h.i=new Pt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function jD(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Nv(p)){var E=p;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,gi(12),Ji(this),Sh(this);break e}ed(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xh(this,t)}this.U?(qC(this,A,c),Km&&this.i&&3==A&&(i_(this.V,this.W,"tick",this.fb),this.W.start())):(ed(this.j,this.m,c,null),xh(this,c)),4==A&&Ji(this),this.i&&!this.I&&(4==A?od(this.l,this):(this.i=!1,Ah(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,gi(12)):(this.o=0,gi(13)),Ji(this),Sh(this)}}}catch(A){}},tt.fb=function(){if(this.g){var n=yu(this.g),e=this.g.ga();this.C<e.length&&(Wp(this),qC(this,n,e),this.i&&4!=n&&Ah(this))}},tt.cancel=function(){this.I=!0,Ji(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function qD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Zp(3),gi(17)),Ji(this),this.o=2,Sh(this)):t0(this,this.Y-n)},(tt=zp.prototype).R=function(){Kp(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},tt.T=function(){return Kp(this),this.g.concat()},tt.get=function(n,e){return Al(this.h,n)?this.h[n]:e},tt.set=function(n,e){Al(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var c_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function rd(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof rd){this.g=void 0!==e?e:n.g,Qp(this,n.j),this.s=n.s,Jp(this,n.i),Xp(this,n.m),this.l=n.l,e=n.h;var t=new eg;t.i=e.i,e.g&&(t.g=new zp(e.g),t.h=e.h),ZC(this,t),this.o=n.o}else n&&(t=String(n).match(c_))?(this.g=!!e,Qp(this,t[1]||"",!0),this.s=Ea(t[2]||""),Jp(this,t[3]||"",!0),Xp(this,t[4]),this.l=Ea(t[5]||"",!0),ZC(this,t[6]||"",!0),this.o=Ea(t[7]||"")):(this.g=!!e,this.h=new eg(null,this.g))}function Uo(n){return new rd(n)}function Qp(n,e,t){n.j=t?Ea(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Jp(n,e,t){n.i=t?Ea(e,!0):e}function Xp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ZC(n,e,t){e instanceof eg?(n.h=e,function WC(n,e){e&&!n.j&&(Zr(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(h_(this,r),s0(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Mh(e,zD)),n.h=new eg(e,n.g))}function Vn(n,e,t){n.h.set(e,t)}function d_(n){return Vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ea(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Mh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,GD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function GD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}rd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Mh(e,GC,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Mh(e,GC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Mh(t,"/"==t.charAt(0)?WD:Rh,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Mh(t,KD)),n.join("")};var GC=/[#\/\?@]/g,Rh=/[#\?:]/g,WD=/[#\?]/g,zD=/[#\?@]/g,KD=/#/g;function eg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Zr(n){n.g||(n.g=new zp,n.h=0,n.i&&function Yp(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function h_(n,e){Zr(n),e=id(n,e),Al(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Al((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Kp(n)))}function r0(n,e){return Zr(n),e=id(n,e),Al(n.g.h,e)}function s0(n,e,t){h_(n,e),0<t.length&&(n.i=null,n.g.set(id(n,e),Gm(t)),n.h+=t.length)}function id(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function zC(n){this.l=n||QD,n=Pt.PerformanceNavigationTiming?0<(n=Pt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Pt.g&&Pt.g.Ea&&Pt.g.Ea()&&Pt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=eg.prototype).add=function(n,e){Zr(this),this.i=null,n=id(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){Zr(this),this.g.forEach(function(t,r){Mv(t,function(i){n.call(e,i,r,this)},this)},this)},tt.T=function(){Zr(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},tt.R=function(n){Zr(this);var e=[];if("string"==typeof n)r0(this,n)&&(e=ND(e,this.g.get(id(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=ND(e,n[t])}return e},tt.set=function(n,e){return Zr(this),this.i=null,r0(this,n=id(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var c=i;""!==r[a]&&(c+="="+encodeURIComponent(String(r[a]))),n.push(c)}}return this.i=n.join("&")};var QD=10;function KC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function o0(n){return n.h?1:n.g?n.g.size:0}function YC(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function f_(n,e){n.g?n.g.add(e):n.h=e}function QC(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function JC(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Gm(n.i)}function XC(){}function bR(){this.g=new XC}function a0(n,e,t){const r=t||"";try{n0(n,function(i,a){let c=i;kp(i)&&(c=Xm(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function tg(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Nh(n){this.l=n.$b||null,this.j=n.ib||!1}function u0(n,e){qr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=bs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zC.prototype.cancel=function(){if(this.i=JC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},XC.prototype.stringify=function(n){return Pt.JSON.stringify(n,void 0)},XC.prototype.parse=function(n){return Pt.JSON.parse(n,void 0)},ni(Nh,Yv),Nh.prototype.g=function(){return new u0(this.l,this.j)},Nh.prototype.i=function(n){return function(){return n}}({}),ni(u0,qr);var bs=0;function XD(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function p_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ph(n)}function Ph(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=u0.prototype).open=function(n,e){if(this.readyState!=bs)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ph(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Pt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,p_(this)),this.readyState=bs},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ph(this)),this.g&&(this.readyState=3,Ph(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Pt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;XD(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?p_(this):Ph(this),3==this.readyState&&XD(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,p_(this))},tt.Ta=function(n){this.g&&(this.response=n,p_(this))},tt.ha=function(){this.g&&p_(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(u0.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var eb=Pt.JSON.parse;function Er(n){qr.call(this),this.headers=new zp,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tb,this.K=this.L=!1}ni(Er,qr);var tb="",IR=/^https?$/i,nb=["POST","PUT"];function eA(n){return"content-type"==n.toLowerCase()}function g_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,rb(n),m_(n)}function rb(n){n.D||(n.D=!0,$r(n,"complete"),$r(n,"error"))}function ib(n){if(n.h&&void 0!==Av&&(!n.C[1]||4!=yu(n)||2!=n.ba()))if(n.v&&4==yu(n))OC(n.Fa,0,n);else if($r(n,"readystatechange"),4==yu(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(c_)[1]||null;if(!i&&Pt.self&&Pt.self.location){var a=Pt.self.location.protocol;i=a.substr(0,a.length-1)}r=!IR.test(i?i.toLowerCase():"")}t=r}if(t)$r(n,"complete"),$r(n,"success");else{n.m=6;try{var c=2<yu(n)?n.g.statusText:""}catch(_){c=""}n.j=c+" ["+n.ba()+"]",rb(n)}}finally{m_(n)}}}function m_(n,e){if(n.g){sb(n);const t=n.g,r=n.C[0]?Op:null;n.g=null,n.C=null,e||$r(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function sb(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Pt.clearTimeout(n.A),n.A=null)}function yu(n){return n.g?n.g.readyState:0}function ob(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case tb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Sl(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function __(n){let e="";return Pv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Vn(n,e,t))}function ng(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Oh(n){this.za=0,this.l=[],this.h=new s_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ng("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ng("baseRetryDelayMs",5e3,n),this.$a=ng("retryDelaySeedMs",1e4,n),this.Ya=ng("forwardChannelMaxRetries",2,n),this.ra=ng("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new zC(n&&n.concurrentRequestLimit),this.Ca=new bR,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function c0(n){if(v_(n),3==n.G){var e=n.V++,t=Uo(n.F);Vn(t,"SID",n.J),Vn(t,"RID",e),Vn(t,"TYPE","terminate"),Rl(n,t),(e=new Gp(n,n.h,e,void 0)).K=2,e.v=d_(Uo(t)),t=!1,Pt.navigator&&Pt.navigator.sendBeacon&&(t=Pt.navigator.sendBeacon(e.v.toString(),"")),!t&&Pt.Image&&((new Image).src=e.v,t=!0),t||(e.g=d0(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ah(e)}ud(n)}function y_(n){n.g&&(Pl(n),n.g.cancel(),n.g=null)}function v_(n){y_(n),n.u&&(Pt.clearTimeout(n.u),n.u=null),vu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Pt.clearTimeout(n.m),n.m=null)}function ao(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&xl(n)}function xl(n){KC(n.i)||n.m||(n.m=!0,t_(n.Ha,n),n.C=0)}function Ml(n,e){var t;t=e?e.m:n.V++;const r=Uo(n.F);Vn(r,"SID",n.J),Vn(r,"RID",t),Vn(r,"AID",n.U),Rl(n,r),n.o&&n.s&&Sl(r,n.o,n.s),t=new Gp(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Is(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),f_(n.i,t),e0(t,r,e)}function Rl(n,e){n.j&&n0({},function(t,r){Vn(e,r,t)})}function Is(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Rr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let p=!0;for(let _=0;_<t;_++){let E=i[_].h;const A=i[_].g;if(E-=a,0>E)a=Math.max(0,i[_].h-100),p=!1;else try{a0(A,c,"req"+E+"_")}catch(S){r&&r(A)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function w_(n){n.g||n.u||(n.Y=1,t_(n.Ga,n),n.A=0)}function Nl(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Hp(Rr(n.Ga,n),ad(n,n.A)),n.A++,0))}function Pl(n){null!=n.B&&(Pt.clearTimeout(n.B),n.B=null)}function sd(n){n.g=new Gp(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Uo(n.oa);Vn(e,"RID","rpc"),Vn(e,"SID",n.J),Vn(e,"CI",n.N?"0":"1"),Vn(e,"AID",n.U),Rl(n,e),Vn(e,"TYPE","xmlhttp"),n.o&&n.s&&Sl(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=d_(Uo(e)),t.s=null,t.U=!0,l_(t,n)}function vu(n){null!=n.v&&(Pt.clearTimeout(n.v),n.v=null)}function od(n,e){var t=null;if(n.g==e){vu(n),Pl(n),n.g=null;var r=2}else{if(!YC(n.i,e))return;t=e.D,QC(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;$r(r=$p(),new VC(r,t,e,i)),xl(n)}else w_(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function xi(n,e){return!(o0(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Hp(Rr(n.Ha,n,e),ad(n,n.C)),n.C++,0)))}(n,e)||2==r&&Nl(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:uo(n,5);break;case 4:uo(n,10);break;case 3:uo(n,6);break;default:uo(n,2)}}function ad(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function uo(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Rr(n.jb,n);t||(t=new rd("//www.google.com/images/cleardot.gif"),Pt.location&&"http"==Pt.location.protocol||Qp(t,"https"),d_(t)),function JD(n,e){const t=new s_;if(Pt.Image){const r=new Image;r.onload=hs(tg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=hs(tg,t,r,"TestLoadImage: error",!1,e),r.onabort=hs(tg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=hs(tg,t,r,"TestLoadImage: timeout",!1,e),Pt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else gi(2);n.G=0,n.j&&n.j.va(e),ud(n),v_(n)}function ud(n){n.G=0,n.I=-1,n.j&&((0!=JC(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Gm(n.l),n.l.length=0),n.j.ua())}function ld(n,e,t){let r=function HD(n){return n instanceof rd?Uo(n):new rd(n,void 0)}(t);if(""!=r.i)e&&Jp(r,e+"."+r.i),Xp(r,r.m);else{const i=Pt.location;r=function HC(n,e,t,r){var i=new rd(null,void 0);return n&&Qp(i,n),e&&Jp(i,e),t&&Xp(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Pv(n.aa,function(i,a){Vn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Vn(r,e,t),Vn(r,"VER",n.ma),Rl(n,r),r}function d0(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Er(t&&n.Ba&&!n.qa?new Nh({ib:!0}):n.qa)).L=n.H,e}function h0(){}function rg(){if(Up&&!(10<=Number(ER)))throw Error("Environmental error: no available transport.")}function fs(n,e){qr.call(this),this.g=new Oh(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Nv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Nv(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new cd(this)}function f0(n){Qv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function p0(){Jv.call(this),this.status=1}function cd(n){this.g=n}(tt=Er.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Th.g(),this.C=function BC(n){return n.h||(n.h=n.i())}(this.u?this.u:Th),this.g.onreadystatechange=Rr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void g_(this,a)}n=t||"";const i=new zp(this.headers);r&&n0(r,function(a,c){i.set(c,a)}),r=function Rv(n){e:{var e=eA;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Pt.FormData&&n instanceof Pt.FormData,!(0<=Hm(nb,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,c){this.g.setRequestHeader(c,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{sb(this),0<this.B&&((this.K=function l0(n){return Up&&function wR(){return function yR(n){var e=vR;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Fp(String(Fv)).split("."),t=Fp("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Lp(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Lp(0==i[2].length,0==a[2].length)||Lp(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Rr(this.pa,this)):this.A=OC(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){g_(this,a)}},tt.pa=function(){void 0!==Av&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$r(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$r(this,"complete"),$r(this,"abort"),m_(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),m_(this,!0)),Er.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?ib(this):this.cb())},tt.cb=function(){ib(this)},tt.ba=function(){try{return 2<yu(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),eb(e)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=Oh.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Gp(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=wC(a),CC(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Is(this,i,e),Vn(t=Uo(this.F),"RID",n),Vn(t,"CVER",22),this.D&&Vn(t,"X-HTTP-Session-Id",this.D),Rl(this,t),this.o&&a&&Sl(t,this.o,a),f_(this.i,i),this.Ra&&Vn(t,"TYPE","init"),this.ja?(Vn(t,"$req",e),Vn(t,"SID","null"),i.$=!0,e0(i,t,null)):e0(i,t,e),this.G=2}}else 3==this.G&&(n?Ml(this,n):0==this.l.length||KC(this.i)||Ml(this))},tt.Ga=function(){if(this.u=null,sd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Hp(Rr(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,gi(10),y_(this),sd(this))},tt.ab=function(){null!=this.v&&(this.v=null,y_(this),Nl(this),gi(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),gi(2)):(this.h.info("Failed to ping google.com"),gi(1))},(tt=h0.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},rg.prototype.g=function(n,e){return new fs(n,e)},ni(fs,qr),fs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),t_(Rr(n.hb,n,e))),gi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=ld(n,null,n.W),xl(n)},fs.prototype.close=function(){c0(this.g)},fs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,ao(this.g,e)}else this.v?((e={}).__data__=Xm(n),ao(this.g,e)):ao(this.g,n)},fs.prototype.M=function(){this.g.j=null,delete this.j,c0(this.g),delete this.g,fs.Z.M.call(this)},ni(f0,Qv),ni(p0,Jv),ni(cd,h0),cd.prototype.xa=function(){$r(this.g,"a")},cd.prototype.wa=function(n){$r(this.g,new f0(n))},cd.prototype.va=function(n){$r(this.g,new p0(n))},cd.prototype.ua=function(){$r(this.g,"b")},rg.prototype.createWebChannel=rg.prototype.g,fs.prototype.send=fs.prototype.u,fs.prototype.open=fs.prototype.m,fs.prototype.close=fs.prototype.close,zv.NO_ERROR=0,zv.TIMEOUT=8,zv.HTTP_ERROR=6,Kv.COMPLETE="complete",jC.EventType=nd,nd.OPEN="a",nd.CLOSE="b",nd.ERROR="c",nd.MESSAGE="d",qr.prototype.listen=qr.prototype.N,Er.prototype.listenOnce=Er.prototype.O,Er.prototype.getLastError=Er.prototype.La,Er.prototype.getLastErrorCode=Er.prototype.Da,Er.prototype.getStatus=Er.prototype.ba,Er.prototype.getResponseJson=Er.prototype.Qa,Er.prototype.getResponseText=Er.prototype.ga,Er.prototype.send=Er.prototype.ea;var ab=mu.createWebChannelTransport=function(){return new rg},ub=mu.getStatEventTarget=function(){return $p()},g0=mu.ErrorCode=zv,lb=mu.EventType=Kv,tA=mu.Event=td,m0=mu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},cb=mu.FetchXmlHttpFactory=Nh,E_=mu.WebChannel=jC,nA=mu.XhrIo=Er;const _0="@firebase/firestore";class mi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mi.UNAUTHENTICATED=new mi(null),mi.GOOGLE_CREDENTIALS=new mi("google-credentials-uid"),mi.FIRST_PARTY=new mi("first-party-uid"),mi.MOCK_USER=new mi("mock-user");let dd="9.6.10";const Ol=new wr.Yd("@firebase/firestore");function y0(){return Ol.logLevel}function ke(n,...e){if(Ol.logLevel<=wr.in.DEBUG){const t=e.map(v0);Ol.debug(`Firestore (${dd}): ${n}`,...t)}}function ur(n,...e){if(Ol.logLevel<=wr.in.ERROR){const t=e.map(v0);Ol.error(`Firestore (${dd}): ${n}`,...t)}}function hd(n,...e){if(Ol.logLevel<=wr.in.WARN){const t=e.map(v0);Ol.warn(`Firestore (${dd}): ${n}`,...t)}}function v0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${dd}) INTERNAL ASSERTION FAILED: `+n;throw ur(e),new Error(e)}function xt(n,e){n||st()}function He(n,e){return n}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class si{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class fd{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mi.UNAUTHENTICATED))}shutdown(){}}class db{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class iA{constructor(e){this.t=e,this.currentUser=mi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let c=new si;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new si,e.enqueueRetryable(()=>a(this.currentUser))};const p=()=>{const E=c;e.enqueueRetryable((0,ge.Z)(function*(){yield E.promise,yield a(r.currentUser)}))},_=E=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(E=>_(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?_(E):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new si)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt("string"==typeof r.accessToken),new fd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xt(null===e||"string"==typeof e),new mi(e)}}class hb{constructor(e,t,r){this.type="FirstParty",this.user=mi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class C_{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new hb(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(mi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pb{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.p;return this.p=a.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt("string"==typeof t.token),this.p=t.token,new fb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ts{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function sA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ts.A=-1;class gb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sA(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Zt(n,e){return n<e?-1:n>e?1:0}function pd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function mb(n){return n+"\0"}class lr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lr.fromMillis(Date.now())}static fromDate(e){return lr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new lr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new lr(0,0))}static max(){return new Tt(new lr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function b_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function kh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function I_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ig{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ig.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ig?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends ig{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const sg=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hr extends ig{construct(e,t,r){return new Hr(e,t,r)}static isValidIdentifier(e){return sg.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Me(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Me(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Me(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(a(),i++)}if(a(),c)throw new Me(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hr(t)}static emptyPath(){return new Hr([])}}class kl{constructor(e){this.fields=e,e.sort(Hr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Gr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Gr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Gr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gr.EMPTY_BYTE_STRING=new Gr("");const E0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ca(n){if(xt(!!n),"string"==typeof n){let e=0;const t=E0.exec(n);if(xt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nr(n.seconds),nanos:nr(n.nanos)}}function nr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Fh(n){return"string"==typeof n?Gr.fromBase64String(n):Gr.fromUint8Array(n)}function C0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function b0(n){const e=n.mapValue.fields.__previous_value__;return C0(e)?b0(e):e}function Lh(n){const e=Ca(n.mapValue.fields.__local_write_time__.timestampValue);return new lr(e.seconds,e.nanos)}class oA{constructor(e,t,r,i,a,c,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class ba{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ba("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}function wu(n){return null==n}function Uh(n){return 0===n&&1/n==-1/0}function I0(n){return"number"==typeof n&&Number.isInteger(n)&&!Uh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(cn.fromString(e))}static fromName(e){return new Be(cn.fromString(e).popFirst(5))}static empty(){return new Be(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new cn(e.slice()))}}const T0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_b={nullValue:"NULL_VALUE"};function Fl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?C0(n)?4:x0(n)?9:10:st()}function Vo(n,e){if(n===e)return!0;const t=Fl(n);if(t!==Fl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lh(n).isEqual(Lh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Ca(r.timestampValue),c=Ca(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Fh(n.bytesValue).isEqual(Fh(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return nr(r.geoPointValue.latitude)===nr(i.geoPointValue.latitude)&&nr(r.geoPointValue.longitude)===nr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return nr(r.integerValue)===nr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=nr(r.doubleValue),c=nr(i.doubleValue);return a===c?Uh(a)===Uh(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return pd(n.arrayValue.values||[],e.arrayValue.values||[],Vo);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(b_(a)!==b_(c))return!1;for(const p in a)if(a.hasOwnProperty(p)&&(void 0===c[p]||!Vo(a[p],c[p])))return!1;return!0}(n,e);default:return st()}var i}function gd(n,e){return void 0!==(n.values||[]).find(t=>Vo(t,e))}function Eu(n,e){if(n===e)return 0;const t=Fl(n),r=Fl(e);if(t!==r)return Zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Zt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=nr(i.integerValue||i.doubleValue),p=nr(a.integerValue||a.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return yb(n.timestampValue,e.timestampValue);case 4:return yb(Lh(n),Lh(e));case 5:return Zt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=Fh(i),p=Fh(a);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),p=a.split("/");for(let _=0;_<c.length&&_<p.length;_++){const E=Zt(c[_],p[_]);if(0!==E)return E}return Zt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Zt(nr(i.latitude),nr(a.latitude));return 0!==c?c:Zt(nr(i.longitude),nr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],p=a.values||[];for(let _=0;_<c.length&&_<p.length;++_){const E=Eu(c[_],p[_]);if(E)return E}return Zt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const c=i.fields||{},p=Object.keys(c),_=a.fields||{},E=Object.keys(_);p.sort(),E.sort();for(let A=0;A<p.length&&A<E.length;++A){const S=Zt(p[A],E[A]);if(0!==S)return S;const P=Eu(c[p[A]],_[E[A]]);if(0!==P)return P}return Zt(p.length,E.length)}(n.mapValue,e.mapValue);default:throw st()}}function yb(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Zt(n,e);const t=Ca(n),r=Ca(e),i=Zt(t.seconds,r.seconds);return 0!==i?i:Zt(t.nanos,r.nanos)}function Vh(n){return D0(n)}function D0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ca(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Fh(n.bytesValue).toBase64():"referenceValue"in n?Be.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=D0(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const p of i)c?c=!1:a+=",",a+=`${p}:${D0(r.fields[p])}`;return a+"}"}(n.mapValue):st();var e}function Ll(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function og(n){return!!n&&"integerValue"in n}function Bh(n){return!!n&&"arrayValue"in n}function A0(n){return!!n&&"nullValue"in n}function S0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ag(n){return!!n&&"mapValue"in n}function jh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return kh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function x0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function M0(n,e){return void 0===n?e:void 0===e||Eu(n,e)>0?n:e}function R0(n,e){return void 0===n?e:void 0===e||Eu(n,e)<0?n:e}class Xi{constructor(e){this.value=e}static empty(){return new Xi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ag(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jh(t)}setAll(e){let t=Hr.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=jh(c):i.push(p.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());ag(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ag(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){kh(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Xi(jh(this.value))}}function vb(n){const e=[];return kh(n.fields,(t,r)=>{const i=new Hr([t]);if(ag(r)){const a=vb(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new kl(e)}class $n{constructor(e,t,r,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new $n(e,0,Tt.min(),Tt.min(),Xi.empty(),0)}static newFoundDocument(e,t,r){return new $n(e,1,t,Tt.min(),r,0)}static newNoDocument(e,t){return new $n(e,2,t,Tt.min(),Xi.empty(),0)}static newUnknownDocument(e,t){return new $n(e,3,t,Tt.min(),Xi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ug{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function N0(n){return n.fields.find(e=>2===e.kind)}function Gn(n){return n.fields.filter(e=>2!==e.kind)}ug.UNKNOWN_ID=-1;class lg{constructor(e,t){this.fieldPath=e,this.kind=t}}class cg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new cg(0,Cu.min())}}function wb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Tt.fromTimestamp(1e9===r?new lr(t+1,0):new lr(t,r));return new Cu(i,Be.empty(),e)}function Eb(n){return new Cu(n.readTime,n.key,-1)}class Cu{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Cu(Tt.min(),Be.empty(),-1)}static max(){return new Cu(Tt.max(),Be.empty(),-1)}}function Cb(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Be.comparator(n.documentKey,e.documentKey),0!==t?t:Zt(n.largestBatchId,e.largestBatchId))}class bb{constructor(e,t=null,r=[],i=[],a=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=p,this.P=null}}function md(n,e=null,t=[],r=[],i=null,a=null,c=null){return new bb(n,e,t,r,i,a,c)}function _d(n){const e=He(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Vh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),wu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vh(r)).join(",")),e.P=t}return e.P}function qh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!lA(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Vo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ab(n.startAt,e.startAt)&&Ab(n.endAt,e.endAt)}function T_(n){return Be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function dg(n,e){return n.filters.filter(t=>t instanceof Mi&&t.field.isEqual(e))}class Mi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Ib(e,t,r):"array-contains"===t?new uA(e,r):"in"===t?new Ta(e,r):"not-in"===t?new Bo(e,r):"array-contains-any"===t?new jo(e,r):new Mi(e,t,r)}static V(e,t,r){return"in"===t?new P0(e,r):new Ia(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Eu(t,this.value)):null!==t&&Fl(this.value)===Fl(t)&&this.v(Eu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ib extends Mi{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.v(t)}}class P0 extends Mi{constructor(e,t){super(e,"in",t),this.keys=Tb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ia extends Mi{constructor(e,t){super(e,"not-in",t),this.keys=Tb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Tb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class uA extends Mi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bh(t)&&gd(t.arrayValue,this.value)}}class Ta extends Mi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&gd(this.value.arrayValue,t)}}class Bo extends Mi{constructor(e,t){super(e,"not-in",t)}matches(e){if(gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!gd(this.value.arrayValue,t)}}class jo extends Mi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gd(this.value.arrayValue,r))}}class bu{constructor(e,t){this.position=e,this.inclusive=t}}class yd{constructor(e,t="asc"){this.field=e,this.dir=t}}function lA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Db(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?Be.comparator(Be.fromName(c.referenceValue),t.key):Eu(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ab(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vo(n.position[t],e.position[t]))return!1;return!0}class Iu{constructor(e,t=null,r=[],i=[],a=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=p,this.endAt=_,this.D=null,this.C=null}}function D_(n,e,t,r,i,a,c,p){return new Iu(n,e,t,r,i,a,c,p)}function Da(n){return new Iu(n)}function A_(n){return!wu(n.limit)&&"F"===n.limitType}function hg(n){return!wu(n.limit)&&"L"===n.limitType}function O0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function S_(n){for(const e of n.filters)if(e.S())return e.field;return null}function x_(n){return null!==n.collectionGroup}function Tu(n){const e=He(n);if(null===e.D){e.D=[];const t=S_(e),r=O0(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new yd(t)),e.D.push(new yd(Hr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new yd(Hr.keyField(),a))}}}return e.D}function lo(n){const e=He(n);if(!e.C)if("F"===e.limitType)e.C=md(e.path,e.collectionGroup,Tu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Tu(e))t.push(new yd(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new bu(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new bu(e.startAt.position,!e.startAt.inclusive):null;e.C=md(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function k0(n,e,t){return new Iu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $h(n,e){return qh(lo(n),lo(e))&&n.limitType===e.limitType}function M_(n){return`${_d(lo(n))}|lt:${n.limitType}`}function Zh(n){return`Query(target=${function aA(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Vh(r.value)}`;var r}).join(", ")}]`),wu(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Vh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Vh(t)).join(",")),`Target(${e})`}(lo(n))}; limitType=${n.limitType})`}function R_(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Be.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const p=Db(i,a,c);return i.inclusive?p<=0:p<0}(t.startAt,Tu(t),r)||t.endAt&&!function(i,a,c){const p=Db(i,a,c);return i.inclusive?p>=0:p>0}(t.endAt,Tu(t),r)));var t,r}function F0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function L0(n){return(e,t)=>{let r=!1;for(const i of Tu(n)){const a=Sb(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Sb(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(i,a,c){const p=a.data.field(i),_=c.data.field(i);return null!==p&&null!==_?Eu(p,_):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function U0(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(e)?"-0":e}}function V0(n){return{integerValue:""+n}}function B0(n,e){return I0(e)?V0(e):U0(n,e)}class fg{constructor(){this._=void 0}}function cA(n,e,t){return n instanceof Hh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof vd?Mb(n,e):n instanceof wd?Rb(n,e):function(r,i){const a=xb(r,i),c=Nb(a)+Nb(r.k);return og(a)&&og(r.k)?V0(c):U0(r.M,c)}(n,e)}function dA(n,e,t){return n instanceof vd?Mb(n,e):n instanceof wd?Rb(n,e):t}function xb(n,e){return n instanceof Gh?og(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Hh extends fg{}class vd extends fg{constructor(e){super(),this.elements=e}}function Mb(n,e){const t=Pb(e);for(const r of n.elements)t.some(i=>Vo(i,r))||t.push(r);return{arrayValue:{values:t}}}class wd extends fg{constructor(e){super(),this.elements=e}}function Rb(n,e){let t=Pb(e);for(const r of n.elements)t=t.filter(i=>!Vo(i,r));return{arrayValue:{values:t}}}class Gh extends fg{constructor(e,t){super(),this.M=e,this.k=t}}function Nb(n){return nr(n.integerValue||n.doubleValue)}function Pb(n){return Bh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class pg{constructor(e,t){this.field=e,this.transform=t}}class fA{constructor(e,t){this.version=e,this.transformResults=t}}class Nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function N_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class P_{}function pA(n,e,t){n instanceof Wh?function(r,i,a){const c=r.value.clone(),p=Z0(r.fieldTransforms,i,a.transformResults);c.setAll(p),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Ul?function(r,i,a){if(!N_(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Z0(r.fieldTransforms,i,a.transformResults),p=i.data;p.setAll($0(r)),p.setAll(c),i.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function O_(n,e,t){var i;n instanceof Wh?function(r,i,a){if(!N_(r.precondition,i))return;const c=r.value.clone(),p=H0(r.fieldTransforms,a,i);c.setAll(p),i.convertToFoundDocument(q0(i),c).setHasLocalMutations()}(n,e,t):n instanceof Ul?function(r,i,a){if(!N_(r.precondition,i))return;const c=H0(r.fieldTransforms,a,i),p=i.data;p.setAll($0(r)),p.setAll(c),i.convertToFoundDocument(q0(i),p).setHasLocalMutations()}(n,e,t):N_(n.precondition,i=e)&&i.convertToNoDocument(Tt.min())}function Ob(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=xb(r.transform,i||null);null!=a&&(null==t&&(t=Xi.empty()),t.set(r.field,a))}return t||null}function j0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&pd(t,r,(i,a)=>function hA(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof vd&&r instanceof vd||t instanceof wd&&r instanceof wd?pd(t.elements,r.elements,Vo):t instanceof Gh&&r instanceof Gh?Vo(t.k,r.k):t instanceof Hh&&r instanceof Hh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function q0(n){return n.isFoundDocument()?n.version:Tt.min()}class Wh extends P_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Ul extends P_{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function $0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Z0(n,e,t){const r=new Map;xt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,p=e.data.field(a.field);r.set(a.field,dA(c,p,t[i]))}return r}function H0(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,cA(a,c,e))}return r}class zh extends P_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class k_ extends P_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Ed{constructor(e){this.count=e}}var Pr,sn;function Cd(n){switch(n){default:return st();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function gA(n){if(void 0===n)return ur("GRPC error has no .code"),se.UNKNOWN;switch(n){case Pr.OK:return se.OK;case Pr.CANCELLED:return se.CANCELLED;case Pr.UNKNOWN:return se.UNKNOWN;case Pr.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Pr.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Pr.INTERNAL:return se.INTERNAL;case Pr.UNAVAILABLE:return se.UNAVAILABLE;case Pr.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Pr.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Pr.NOT_FOUND:return se.NOT_FOUND;case Pr.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Pr.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Pr.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Pr.ABORTED:return se.ABORTED;case Pr.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Pr.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Pr.DATA_LOSS:return se.DATA_LOSS;default:return st()}}(sn=Pr||(Pr={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";class Aa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){kh(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return I_(this.inner)}size(){return this.innerSize}}class Or{constructor(e,t){this.comparator=e,this.root=t||oi.EMPTY}insert(e,t){return new Or(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,oi.BLACK,null,null))}remove(e){return new Or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,oi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gg(this.root,e,this.comparator,!1)}getReverseIterator(){return new gg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gg(this.root,e,this.comparator,!0)}}class gg{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class oi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:oi.RED,this.left=null!=i?i:oi.EMPTY,this.right=null!=a?a:oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new oi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return oi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return oi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}oi.EMPTY=null,oi.RED=!0,oi.BLACK=!1,oi.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new oi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wn{constructor(e){this.comparator=e,this.data=new Or(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ct(this.data.getIterator())}getIteratorFrom(e){return new Ct(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Wn(this.comparator);return t.data=e,t}}class Ct{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Kh(n){return n.hasNext()?n.getNext():void 0}const mA=new Or(Be.comparator);function co(){return mA}const F_=new Or(Be.comparator);function G0(){return F_}function Vl(){return new Aa(n=>n.toString(),(n,e)=>n.isEqual(e))}const L_=new Or(Be.comparator),cr=new Wn(Be.comparator);function En(...n){let e=cr;for(const t of n)e=e.add(t);return e}const kb=new Wn(Zt);function U_(){return kb}class mg{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Yh.createSynthesizedTargetChangeForCurrentChange(e,t)),new mg(Tt.min(),r,U_(),co(),En())}}class Yh{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Yh(Gr.EMPTY_BYTE_STRING,t,En(),En(),En())}}class _g{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class W0{constructor(e,t){this.targetId=e,this.$=t}}class z0{constructor(e,t,r=Gr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Fb{constructor(){this.B=0,this.L=Qh(),this.U=Gr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=En(),t=En(),r=En();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new Yh(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=Qh()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class _A{constructor(e){this.nt=e,this.st=new Map,this.it=co(),this.rt=Lb(),this.ot=new Wn(Zt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(T_(a))if(0===r){const c=new Be(a.path);this.ct(t,c,$n.newNoDocument(c,Tt.min()))}else xt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,c)=>{const p=this.wt(c);if(p){if(a.current&&T_(p.target)){const _=new Be(p.target.path);null!==this.it.get(_)||this.It(c,_)||this.ct(c,_,$n.newNoDocument(_,e))}a.j&&(t.set(c,a.H()),a.J())}});let r=En();this.rt.forEach((a,c)=>{let p=!0;c.forEachWhile(_=>{const E=this.wt(_);return!E||2===E.purpose||(p=!1,!1)}),p&&(r=r.add(a))}),this.it.forEach((a,c)=>c.setReadTime(e));const i=new mg(e,t,this.ot,this.it,r);return this.it=co(),this.rt=Lb(),this.ot=new Wn(Zt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Fb,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Wn(Zt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new Fb),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Lb(){return new Or(Be.comparator)}function Qh(){return new Or(Be.comparator)}const yA={asc:"ASCENDING",desc:"DESCENDING"},vA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class wA{constructor(e,t){this.databaseId=e,this.N=t}}function Bl(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K0(n,e){return n.N?e.toBase64():e.toUint8Array()}function Ub(n,e){return Bl(n,e.toTimestamp())}function Wr(n){return xt(!!n),Tt.fromTimestamp(function(e){const t=Ca(e);return new lr(t.seconds,t.nanos)}(n))}function Y0(n,e){return(t=n,new cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Jh(n){const e=cn.fromString(n);return xt(Hb(e)),e}function Du(n,e){return Y0(n.databaseId,e.path)}function Sa(n,e){const t=Jh(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(J0(t))}function Q0(n,e){return Y0(n.databaseId,e)}function Vb(n){const e=Jh(n);return 4===e.length?cn.emptyPath():J0(e)}function Xh(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function J0(n){return xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function X0(n,e,t){return{name:Du(n,e),fields:t.value.mapValue.fields}}function Bb(n,e,t){const r=Sa(n,e.name),i=Wr(e.updateTime),a=new Xi({mapValue:{fields:e.fields}}),c=$n.newFoundDocument(r,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function yg(n,e){let t;if(e instanceof Wh)t={update:X0(n,e.key,e.value)};else if(e instanceof zh)t={delete:Du(n,e.key)};else if(e instanceof Ul)t={update:X0(n,e.key,e.data),updateMask:AA(e.fieldMask)};else{if(!(e instanceof k_))return st();t={verify:Du(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Hh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof vd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof wd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Gh)return{fieldPath:a.field.canonicalString(),increment:c.k};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Ub(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function qb(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Nr.updateTime(Wr(i.updateTime)):void 0!==i.exists?Nr.exists(i.exists):Nr.none():Nr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let p=null;"setToServerValue"in c?(xt("REQUEST_TIME"===c.setToServerValue),p=new Hh):"appendMissingElements"in c?p=new vd(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new wd(c.removeAllFromArray.values||[]):"increment"in c?p=new Gh(a,c.increment):st();const _=Hr.fromServerFormat(c.fieldPath);return new pg(_,p)}(n,i)):[];var i;if(e.update){const i=Sa(n,e.update.name),a=new Xi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new kl((e.updateMask.fieldPaths||[]).map(E=>Hr.fromServerFormat(E)));return new Ul(i,a,c,t,r)}return new Wh(i,a,t,r)}if(e.delete){const i=Sa(n,e.delete);return new zh(i,t)}if(e.verify){const i=Sa(n,e.verify);return new k_(i,t)}return st()}function CA(n,e){return{documents:[Q0(n,e.path)]}}function bA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Q0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Q0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const E=_.map(A=>function(S){if("=="===S.op){if(S0(S.value))return{unaryFilter:{field:xa(S.field),op:"IS_NAN"}};if(A0(S.value))return{unaryFilter:{field:xa(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(S0(S.value))return{unaryFilter:{field:xa(S.field),op:"IS_NOT_NAN"}};if(A0(S.value))return{unaryFilter:{field:xa(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xa(S.field),op:Zb(S.op),value:S.value}}}(A));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(E=>{return{field:xa((A=E).field),direction:IA(A.dir)};var A})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(E=e.limit,n.N||wu(E)?E:{value:E});var E,p,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function ew(n){let e=Vb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xt(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let a=[];t.where&&(a=$b(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(A=>{return new yd(ef((S=A).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let p=null;t.limit&&(p=function(A){let S;return S="object"==typeof A?A.value:A,wu(S)?null:S}(t.limit));let _=null;var A;t.startAt&&(_=new bu((A=t.startAt).values||[],!!A.before));let E=null;return t.endAt&&(E=function(A){return new bu(A.values||[],!A.before)}(t.endAt)),D_(e,i,c,a,p,"F",_,E)}function $b(n){return n?void 0!==n.unaryFilter?[DA(n)]:void 0!==n.fieldFilter?[TA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>$b(e)).reduce((e,t)=>e.concat(t)):st():[]}function IA(n){return yA[n]}function Zb(n){return vA[n]}function xa(n){return{fieldPath:n.canonicalString()}}function ef(n){return Hr.fromServerFormat(n.fieldPath)}function TA(n){return Mi.create(ef(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function DA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ef(n.unaryFilter.field);return Mi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ef(n.unaryFilter.field);return Mi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ef(n.unaryFilter.field);return Mi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ef(n.unaryFilter.field);return Mi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function AA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Hb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function zr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Gb(e)),e=SA(n.get(t),e);return Gb(e)}function SA(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Gb(n){return n+"\x01\x01"}function Ri(n){const e=n.length;if(xt(e>=2),2===e)return xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),cn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&st(),n.charAt(c+1)){case"\x01":const p=n.substring(a,c);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:st()}a=c+2}return new cn(r)}const Wb=["userId","batchId"];function vg(n,e){return[n,zr(e)]}function zb(n,e,t){return[n,zr(e),t]}const Kb={},xA=["prefixPath","collectionGroup","readTime","documentId"],Yb=["prefixPath","collectionGroup","documentId"],MA=["collectionGroup","readTime","prefixPath","documentId"],tw=["canonicalId","targetId"],RA=["targetId","path"],Qb=["path","targetId"],Jb=["collectionId","parent"],NA=["indexId","uid"],PA=["uid","sequenceNumber"],OA=["indexId","uid","arrayValue","directionalValue","documentKey"],nw=["indexId","uid","documentKey"],kA=["userId","collectionPath","documentId"],Xb=["userId","collectionPath","largestBatchId"],FA=["userId","collectionGroup","largestBatchId"],eI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],LA=[...eI,"documentOverlays"],tI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UA=[...tI,"indexConfiguration","indexState","indexEntries"],nI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,a=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++a,c&&a===i&&t()},_=>r(_))}),c=!0,a===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class wg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new si,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Eg(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Cg(r.target.error);this.At.reject(new Eg(e,i))}}static open(e,t,r,i){try{return new wg(t,e.transaction(i,r))}catch(a){throw new Eg(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new BA(t)}}class ho{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===ho.Vt((0,O.z$)())&&ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),bd(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,O.hl)())return!1;if(ho.St())return!0;const e=(0,O.z$)(),t=ho.Vt(e),r=0<t&&t<10,i=ho.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ge.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new Eg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Me(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Me(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Eg(e,p))},a.onupgradeneeded=c=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ge.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{a.db=yield a.Nt(e);const _=wg.open(a.db,e,c?"readonly":"readwrite",r),E=i(_).next(A=>(_.bt(),A)).catch(A=>(_.abort(A),le.reject(A))).toPromise();return E.catch(()=>{}),yield _.Rt,E}catch(_){const E="FirebaseError"!==_.name&&p<3;if(ke("SimpleDb","Transaction failed with error:",_.message,"Retrying:",E),a.close(),!E)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class VA{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return bd(this.Ft.delete())}}class Eg extends Me{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function jl(n){return"IndexedDbTransactionError"===n.name}class BA{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bd(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),bd(this.store.add(e))}get(e){return bd(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),bd(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),bd(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Gt(i,(c,p)=>{a.push(p)}).next(()=>a)}{const i=this.store.getAll(r.range);return new le((a,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{a(p.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(a,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=a=>{const c=Cg(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Gt(e,t){const r=[];return new le((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const _=new VA(p),E=t(p.primaryKey,p.value,_);if(E instanceof le){const A=E.catch(S=>(_.done(),le.reject(S)));r.push(A)}_.isDone?i():null===_.Lt?p.continue():p.continue(_.Lt)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bd(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Cg(r.target.error);t(i)}})}let iI=!1;function Cg(n){const e=ho.Vt((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iI||(iI=!0,setTimeout(()=>{throw r},0)),r}}return n}class B_ extends rI{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Kr(n,e){const t=He(n);return ho.xt(t.Ht,e)}class bg{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&pA(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&O_(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&O_(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Tt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),En())}isEqual(e){return this.batchId===e.batchId&&pd(this.mutations,e.mutations,(t,r)=>j0(t,r))&&pd(this.baseMutations,e.baseMutations,(t,r)=>j0(t,r))}}class rw{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xt(e.mutations.length===r.length);let i=L_;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new rw(e,t,r,i)}}class iw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ma{constructor(e,t,r,i,a=Tt.min(),c=Tt.min(),p=Gr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new Ma(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ma(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class sI{constructor(e){this.Jt=e}}function aI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ig(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Du(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Bl(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Id(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:Id(e.version)}}var i,a;return r}function Ig(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Id(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ql(n){const e=new lr(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function Tg(n,e){const t=(e.baseMutations||[]).map(a=>qb(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>qb(n.Jt,a)),i=lr.fromMillis(e.localWriteTimeMs);return new bg(e.batchId,i,t,r)}function Dg(n){const e=ql(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ql(n.lastLimboFreeSnapshotVersion):Tt.min();let r;var i;return void 0!==n.query.documents?(xt(1===(i=n.query).documents.length),r=lo(Da(Vb(i.documents[0])))):r=lo(ew(n.query)),new Ma(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Gr.fromBase64String(n.resumeToken))}function tf(n,e){const t=Id(e.snapshotVersion),r=Id(e.lastLimboFreeSnapshotVersion);let i;i=T_(e.target)?CA(n.Jt,e.target):bA(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_d(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function sw(n){const e=ew({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?k0(e,e.limit,"L"):e}function $l(n,e){return new iw(e.largestBatchId,qb(n.Jt,e.overlayMutation))}function nf(n,e){const t=e.path.lastSegment();return[n,zr(e.path.popLast()),t]}class jA{getBundleMetadata(e,t){return qA(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ql(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return qA(e).put({bundleId:(r=t).id,createTime:Id(Wr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ow(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:sw(i.bundledQuery),readTime:ql(i.readTime)};var i})}saveNamedQuery(e,t){return ow(e).put({name:(r=t).name,readTime:Id(Wr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function qA(n){return Kr(n,"bundles")}function ow(n){return Kr(n,"namedQueries")}class aw{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new aw(e,t.uid||"")}getOverlay(e,t){return Ag(e).get(nf(this.userId,t)).next(r=>r?$l(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const p=new iw(t,c);i.push(this.Xt(e,p))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(zr(c.getCollectionPath())));const a=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(Ag(e).Qt("collectionPathOverlayIndex",p))}),le.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Vl(),a=zr(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ag(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const _ of p){const E=$l(this.M,_);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Vl();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ag(e).Wt({index:"collectionGroupOverlayIndex",range:p},(_,E,A)=>{const S=$l(this.M,E);a.size()<i||S.largestBatchId===c?(a.set(S.getKey(),S),c=S.largestBatchId):A.done()}).next(()=>a)}Xt(e,t){return Ag(e).put(function(r,i,a){const[c,p,_]=nf(i,a.mutation.key);return{userId:i,collectionPath:p,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:yg(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function Ag(n){return Kr(n,"documentOverlays")}class rf{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(nr(e.integerValue));else if("doubleValue"in e){const r=nr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Uh(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Fh(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?x0(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):st()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Be.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function $A(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function uw(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=$A(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}rf.fe=new rf;class uI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=uw(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=uw(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class lw{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class j_{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Zl{constructor(){this.De=new uI,this.Ce=new lw(this.De),this.xe=new j_(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Hl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Hl(this.indexId,this.documentKey,this.arrayValue,r)}}function Gl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=cw(n.arrayValue,e.arrayValue),0!==t?t:(t=cw(n.directionalValue,e.directionalValue),0!==t?t:Be.comparator(n.documentKey,e.documentKey)))}function cw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class ZA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=N0(e);if(void 0!==t&&!this.Be(t))return!1;const r=Gn(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[a++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class HA{constructor(){this.qe=new dw}addToCollectionParentIndex(e,t){return this.qe.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getFieldIndex(e,t){return le.resolve(null)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class dw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Wn(cn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Wn(cn.comparator)).toArray()}}const sf=new Uint8Array(0);class GA{constructor(e){this.user=e,this.Ge=new dw,this.Ke=new Aa(t=>_d(t),(t,r)=>qh(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const a={collectionId:r,parent:zr(i)};return WA(e).put(a)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[mb(t),""],!1,!0);return WA(e).qt(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Ri(c.parent))}return r})}addFieldIndex(e,t){const r=q_(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=q_(e),i=Au(e),a=Sg(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Sg(e);let i=!0;const a=new Map;return le.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(p=>{i&&(i=!!p),a.set(c,p)})).next(()=>{if(i){let c=En();return le.forEach(a,(p,_)=>{var E;ke("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(ze=>`${ze.fieldPath}:${ze.kind}`).join(",")}`} to execute ${_d(t)}`);const A=function(ze,ft){const Ke=N0(ft);if(void 0===Ke)return null;for(const Mt of dg(ze,Ke.fieldPath))switch(Mt.op){case"array-contains-any":return Mt.value.arrayValue.values||[];case"array-contains":return[Mt.value]}return null}(_,p),S=function(ze,ft){const Ke=new Map;for(const Mt of Gn(ft))for(const Ft of dg(ze,Mt.fieldPath))switch(Ft.op){case"==":case"in":Ke.set(Mt.fieldPath.canonicalString(),Ft.value);break;case"not-in":case"!=":return Ke.set(Mt.fieldPath.canonicalString(),Ft.value),Array.from(Ke.values())}return null}(_,p),P=function(ze,ft){const Ke=[];let Mt=!0;for(const _o of Gn(ft)){let _i,Bu=!0;for(const yi of dg(ze,_o.fieldPath)){let br,Qy=!0;switch(yi.op){case"<":case"<=":br="nullValue"in(Ft=yi.value)?_b:"booleanValue"in Ft?{booleanValue:!1}:"integerValue"in Ft||"doubleValue"in Ft?{doubleValue:NaN}:"timestampValue"in Ft?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Ft?{stringValue:""}:"bytesValue"in Ft?{bytesValue:""}:"referenceValue"in Ft?Ll(ba.empty(),Be.empty()):"geoPointValue"in Ft?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Ft?{arrayValue:{}}:"mapValue"in Ft?{mapValue:{}}:st();break;case"==":case"in":case">=":br=yi.value;break;case">":br=yi.value,Qy=!1;break;case"!=":case"not-in":br=_b}M0(_i,br)===br&&(_i=br,Bu=Qy)}if(null!==ze.startAt)for(let yi=0;yi<ze.orderBy.length;++yi)if(ze.orderBy[yi].field.isEqual(_o.fieldPath)){const br=ze.startAt.position[yi];M0(_i,br)===br&&(_i=br,Bu=ze.startAt.inclusive);break}if(void 0===_i)return null;Ke.push(_i),Mt&&(Mt=Bu)}var Ft;return new bu(Ke,Mt)}(_,p),V=function(ze,ft){const Ke=[];let Mt=!0;for(const _o of Gn(ft)){let _i,Bu=!0;for(const yi of dg(ze,_o.fieldPath)){let br,Qy=!0;switch(yi.op){case">=":case">":br="nullValue"in(Ft=yi.value)?{booleanValue:!1}:"booleanValue"in Ft?{doubleValue:NaN}:"integerValue"in Ft||"doubleValue"in Ft?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Ft?{stringValue:""}:"stringValue"in Ft?{bytesValue:""}:"bytesValue"in Ft?Ll(ba.empty(),Be.empty()):"referenceValue"in Ft?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Ft?{arrayValue:{}}:"arrayValue"in Ft?{mapValue:{}}:"mapValue"in Ft?T0:st(),Qy=!1;break;case"==":case"in":case"<=":br=yi.value;break;case"<":br=yi.value,Qy=!1;break;case"!=":case"not-in":br=T0}R0(_i,br)===br&&(_i=br,Bu=Qy)}if(null!==ze.endAt)for(let yi=0;yi<ze.orderBy.length;++yi)if(ze.orderBy[yi].field.isEqual(_o.fieldPath)){const br=ze.endAt.position[yi];R0(_i,br)===br&&(_i=br,Bu=ze.endAt.inclusive);break}if(void 0===_i)return null;Ke.push(_i),Mt&&(Mt=Bu)}var Ft;return new bu(Ke,Mt)}(_,p),G=this.je(p,_,P),fe=this.je(p,_,V),Te=this.We(p,_,S),dt=this.ze(p.indexId,A,G,!!P&&P.inclusive,fe,!!V&&V.inclusive,Te);return le.forEach(dt,ze=>r.Kt(ze,t.limit).next(ft=>{ft.forEach(Ke=>{c=c.add(new Be(Ri(Ke.documentKey)))})}))}).next(()=>c)}return le.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,a,c,p){const _=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),E=_/(null!=t?t.length:1),A=[];for(let S=0;S<_;++S){const P=t?this.He(t[S/E]):sf,V=r?this.Je(e,P,r[S%E],i):this.Ye(e),G=a?this.Xe(e,P,a[S%E],c):this.Ye(e+1);A.push(...this.createRange(V,G,p.map(fe=>this.Je(e,P,fe,!0))))}return A}Je(e,t,r,i){const a=new Hl(e,Be.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new Hl(e,Be.empty(),t,r);return i?a.ke():a}Ye(e){return new Hl(e,Be.empty(),sf,sf)}getFieldIndex(e,t){const r=new ZA(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{const c=a.filter(p=>r.$e(p));return c.sort((p,_)=>_.fields.length-p.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new Zl;for(const i of Gn(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.Ne(i.kind);rf.fe.Zt(a,c)}return r.Se()}He(e){const t=new Zl;return rf.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new Zl);let a=0;for(const c of Gn(e)){const p=r[a++];for(const _ of i)if(this.tn(t,c.fieldPath)&&Bh(p))i=this.en(i,c,p);else{const E=_.Ne(c.kind);rf.fe.Zt(p,E)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const p of i){const _=new Zl;_.seed(p.Se()),rf.fe.Zt(c,_.Ne(t.kind)),a.push(_)}return a}tn(e,t){return!!e.filters.find(r=>r instanceof Mi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=q_(e),i=Au(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const c=[];return le.forEach(a,p=>i.get([p.indexId,this.uid]).next(_=>{c.push(function(E,A){const S=A?new cg(A.sequenceNumber,new Cu(ql(A.readTime),new Be(Ri(A.documentKey)),A.largestBatchId)):cg.empty(),P=E.fields.map(([V,G])=>new lg(Hr.fromServerFormat(V),G));return new ug(E.indexId,E.collectionGroup,P,S)}(p,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Zt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=q_(e),a=Au(e);return this.sn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>le.forEach(p,_=>{return a.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Id((P=r).readTime),documentKey:zr(P.documentKey.path),largestBatchId:P.largestBatchId});var P})))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?le.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),le.forEach(p,_=>this.rn(e,i,_).next(E=>{const A=this.on(a,_);return E.isEqual(A)?le.resolve():this.un(e,a,E,A)}))))})}an(e,t,r){return Sg(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:zr(t.key.path)})}cn(e,t,r){return Sg(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,zr(t.key.path)])}rn(e,t,r){const i=Sg(e);let a=new Wn(Gl);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,zr(t.path)])},(c,p)=>{a=a.add(new Hl(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>a)}on(e,t){let r=new Wn(Gl);const i=this.Ze(t,e);if(null==i)return r;const a=N0(t);if(null!=a){const c=e.data.field(a.fieldPath);if(Bh(c))for(const p of c.arrayValue.values||[])r=r.add(new Hl(t.indexId,e.key,this.He(p),i))}else r=r.add(new Hl(t.indexId,e.key,sf,i));return r}un(e,t,r,i){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(c,p,_,E,A){const S=c.getIterator(),P=p.getIterator();let V=Kh(S),G=Kh(P);for(;V||G;){let fe=!1,Te=!1;if(V&&G){const dt=_(V,G);dt<0?Te=!0:dt>0&&(fe=!0)}else null!=V?Te=!0:fe=!0;fe?(E(G),G=Kh(P)):Te?(A(V),V=Kh(S)):(V=Kh(S),G=Kh(P))}}(r,i,Gl,c=>{a.push(this.an(e,t,c))},c=>{a.push(this.cn(e,t,c))}),le.waitFor(a)}sn(e){let t=1;return Au(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>Gl(c,p)).filter((c,p,_)=>!p||0!==Gl(c,_[p-1]));const i=[];i.push(e);for(const c of r){const p=Gl(c,e),_=Gl(c,t);if(0===p)i[0]=e.ke();else if(p>0&&_<0)i.push(c),i.push(c.ke());else if(_>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2)a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,""],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,""]));return a}}function WA(n){return Kr(n,"collectionParents")}function Sg(n){return Kr(n,"indexEntries")}function q_(n){return Kr(n,"indexConfiguration")}function Au(n){return Kr(n,"indexState")}const hw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Yr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Yr(e,Yr.DEFAULT_COLLECTION_PERCENTILE,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function zA(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let p=0;const _=r.Wt({range:c},(A,S,P)=>(p++,P.delete()));a.push(_.next(()=>{xt(1===p)}));const E=[];for(const A of t.mutations){const S=zb(e,A.key.path,t.batchId);a.push(i.delete(S)),E.push(A.key)}return le.waitFor(a).next(()=>E)}function xg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}Yr.DEFAULT_COLLECTION_PERCENTILE=10,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yr.DEFAULT=new Yr(41943040,Yr.DEFAULT_COLLECTION_PERCENTILE,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yr.DISABLED=new Yr(-1,0,0);class fw{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){xt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new fw(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Su(e).Wt({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Mg(e),c=Su(e);return c.add({}).next(p=>{xt("number"==typeof p);const _=new bg(p,t,r,i),E=function(P,V,G){const fe=G.baseMutations.map(dt=>yg(P.Jt,dt)),Te=G.mutations.map(dt=>yg(P.Jt,dt));return{userId:V,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:fe,mutations:Te}}(this.M,this.userId,_),A=[];let S=new Wn((P,V)=>Zt(P.canonicalString(),V.canonicalString()));for(const P of i){const V=zb(this.userId,P.key.path,p);S=S.add(P.key.path.popLast()),A.push(c.put(E)),A.push(a.put(V,Kb))}return S.forEach(P=>{A.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.hn[p]=_.keys()}),le.waitFor(A).next(()=>_)})}lookupMutationBatch(e,t){return Su(e).get(t).next(r=>r?(xt(r.userId===this.userId),Tg(this.M,r)):null)}ln(e,t){return this.hn[t]?le.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Su(e).Wt({index:"userMutationsIndex",range:i},(c,p,_)=>{p.userId===this.userId&&(xt(p.batchId>=r),a=Tg(this.M,p)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Su(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Su(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Tg(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=vg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Mg(e).Wt({range:i},(c,p,_)=>{const[E,A,S]=c,P=Ri(A);if(E===this.userId&&t.path.isEqual(P))return Su(e).get(S).next(V=>{if(!V)throw st();xt(V.userId===this.userId),a.push(Tg(this.M,V))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wn(Zt);const i=[];return t.forEach(a=>{const c=vg(this.userId,a.path),p=IDBKeyRange.lowerBound(c),_=Mg(e).Wt({range:p},(E,A,S)=>{const[P,V,G]=E,fe=Ri(V);P===this.userId&&a.path.isEqual(fe)?r=r.add(G):S.done()});i.push(_)}),le.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=vg(this.userId,r),c=IDBKeyRange.lowerBound(a);let p=new Wn(Zt);return Mg(e).Wt({range:c},(_,E,A)=>{const[S,P,V]=_,G=Ri(P);S===this.userId&&r.isPrefixOf(G)?G.length===i&&(p=p.add(V)):A.done()}).next(()=>this.fn(e,p))}fn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Su(e).get(a).next(c=>{if(null===c)throw st();xt(c.userId===this.userId),r.push(Tg(this.M,c))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return zA(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Mg(e).Wt({range:r},(a,c,p)=>{if(a[0]===this.userId){const _=Ri(a[1]);i.push(_)}else p.done()}).next(()=>{xt(0===i.length)})})}containsKey(e,t){return KA(e,this.userId,t)}_n(e){return pw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function KA(n,e,t){const r=vg(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return Mg(n).Wt({range:a,jt:!0},(p,_,E)=>{const[A,S,P]=p;A===e&&S===i&&(c=!0),E.done()}).next(()=>c)}function Su(n){return Kr(n,"mutations")}function Mg(n){return Kr(n,"documentMutations")}function pw(n){return Kr(n,"mutationQueues")}class xu{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new xu(0)}static gn(){return new xu(-1)}}class YA{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new xu(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>Tt.fromTimestamp(new lr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>af(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(xt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return af(e).Wt((c,p)=>{const _=Dg(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>le.waitFor(a)).next(()=>i)}forEachTarget(e,t){return af(e).Wt((r,i)=>{const a=Dg(i);t(a)})}yn(e){return lI(e).get("targetGlobalKey").next(t=>(xt(null!==t),t))}pn(e,t){return lI(e).put("targetGlobalKey",t)}In(e,t){return af(e).put(tf(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=_d(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return af(e).Wt({range:i,index:"queryTargetsIndex"},(c,p,_)=>{const E=Dg(p);qh(t,E.target)&&(a=E,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Wl(e);return t.forEach(c=>{const p=zr(c.path);i.push(a.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=Wl(e);return le.forEach(t,a=>{const c=zr(a.path);return le.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Wl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Wl(e);let a=En();return i.Wt({range:r,jt:!0},(c,p,_)=>{const E=Ri(c[1]),A=new Be(E);a=a.add(A)}).next(()=>a)}containsKey(e,t){const r=zr(t.path),i=IDBKeyRange.bound([r],[mb(r)],!1,!0);let a=0;return Wl(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,p],_,E)=>{0!==c&&(a++,E.done())}).next(()=>a>0)}Et(e,t){return af(e).get(t).next(r=>r?Dg(r):null)}}function af(n){return Kr(n,"targets")}function lI(n){return Kr(n,"targetGlobal")}function Wl(n){return Kr(n,"targetDocuments")}function Td(n){return gw.apply(this,arguments)}function gw(){return gw=(0,ge.Z)(function*(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==nI)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),gw.apply(this,arguments)}function cI([n,e],[t,r]){const i=Zt(n,t);return 0===i?Zt(e,r):i}class QA{constructor(e){this.En=e,this.buffer=new Wn(cI),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();cI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JA{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ge.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){jl(i)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Td(i)}yield t.vn(e)}))}}class XA{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Ts.A);const r=new QA(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(hw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hw):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,a,c,p,_,E;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,p=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(E=Date.now(),y0()<=wr.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-A}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${a} targets in `+(_-p)+`ms\n\tRemoved ${S} documents in `+(E-_)+`ms\nTotal Duration: ${E-A}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class Rg{constructor(e,t){this.db=e,this.garbageCollector=new XA(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return Ng(e,r)}removeReference(e,t,r){return Ng(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ng(e,t)}Mn(e,t){return function(r,i){let a=!1;return pw(r).zt(c=>KA(r,c,i).next(p=>(p&&(a=!0),le.resolve(!p)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.kn(e,(c,p)=>{if(p<=t){const _=this.Mn(e,c).next(E=>{if(!E)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Tt.min()),Wl(e).delete([0,zr(c.path)])))});i.push(_)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ng(e,t)}kn(e,t){const r=Wl(e);let i,a=Ts.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:_,sequenceNumber:E})=>{0===c?(a!==Ts.A&&t(new Be(Ri(i)),a),a=E,i=_):a=Ts.A}).next(()=>{a!==Ts.A&&t(new Be(Ri(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ng(n,e){return Wl(n).put((r=n.currentSequenceNumber,{targetId:0,path:zr(e.path),sequenceNumber:r}));var r}class mw{constructor(){this.changes=new Aa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dI{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Dd(e).put(r)}removeEntry(e,t,r){return Dd(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Ig(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=$n.newInvalidDocument(t);return Dd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Pg(t))},(i,a)=>{r=this.Fn(t,a)}).next(()=>r)}$n(e,t){let r={size:0,document:$n.newInvalidDocument(t)};return Dd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Pg(t))},(i,a)=>{r={document:this.Fn(t,a),size:xg(a)}}).next(()=>r)}getEntries(e,t){let r=co();return this.Bn(e,t,(i,a)=>{const c=this.Fn(i,a);r=r.insert(i,c)}).next(()=>r)}Ln(e,t){let r=co(),i=new Or(Be.comparator);return this.Bn(e,t,(a,c)=>{const p=this.Fn(a,c);r=r.insert(a,p),i=i.insert(a,xg(c))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return le.resolve();let i=new Wn(pI);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(Pg(i.first()),Pg(i.last())),c=i.getIterator();let p=c.getNext();return Dd(e).Wt({index:"documentKeyIndex",range:a},(_,E,A)=>{const S=Be.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;p&&pI(p,S)<0;)r(p,null),p=c.getNext();p&&p.isEqual(S)&&(r(p,E),p=c.hasNext()?c.getNext():null),p?A.Ut(Pg(p)):A.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Ig(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Dd(e).qt(IDBKeyRange.bound(i,a,!0)).next(c=>{let p=co();for(const _ of c){const E=this.Fn(Be.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(E.key,E)}return p})}getAllFromCollectionGroup(e,t,r,i){let a=co();const c=fI(t,r),p=fI(t,Cu.max());return Dd(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(_,E,A)=>{const S=this.Fn(Be.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);a=a.insert(S.key,S),a.size===i&&A.done()}).next(()=>a)}newChangeBuffer(e){return new hI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return _w(e).get("remoteDocumentGlobalKey").next(t=>(xt(!!t),t))}On(e,t){return _w(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function oI(n,e){let t;if(e.document)t=Bb(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),i=ql(e.noDocument.readTime);t=$n.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Be.fromSegments(e.unknownDocument.path),i=ql(e.unknownDocument.version);t=$n.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new lr(r[0],r[1]);return Tt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return $n.newInvalidDocument(e)}}class hI extends mw{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Aa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Wn((a,c)=>Zt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const p=this.Gn.get(a);if(t.push(this.qn.removeEntry(e,a,p.readTime)),c.isValidDocument()){const _=aI(this.qn.M,c);i=i.add(a.path.popLast()),r+=xg(_)-p.size,t.push(this.qn.addEntry(e,a,_))}else if(r-=p.size,this.trackRemovals){const _=aI(this.qn.M,c.convertToNoDocument(Tt.min()));t.push(this.qn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.qn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((a,c)=>{this.Gn.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function _w(n){return Kr(n,"remoteDocumentGlobal")}function Dd(n){return Kr(n,"remoteDocumentsV14")}function Pg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fI(n,e){const t=e.documentKey.path.toArray();return[n,Ig(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function pI(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Be.comparator(n,e)}class eS{constructor(e){this.M=e}kt(e,t,r,i){const a=new wg("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wb,{unique:!0}),p.createObjectStore("documentMutations"),gI(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=le.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),gI(e)),c=c.next(()=>function(p){const _=p.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",E)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,_){return _.store("mutations").qt().next(E=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wb,{unique:!0});const A=_.store("mutations"),S=E.map(P=>A.put(P));return le.waitFor(S)})}(e,a))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Kn(a))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(a)))),r<7&&i>=7&&(c=c.next(()=>this.jn(a))),r<8&&i>=8&&(c=c.next(()=>this.Wn(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.zn(a))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:kA});_.createIndex("collectionPathOverlayIndex",Xb,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",FA,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:xA});_.createIndex("documentKeyIndex",Yb),_.createIndex("collectionGroupIndex",MA)}(e)).next(()=>this.Hn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:NA}).createIndex("sequenceNumberIndex",PA,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:OA}).createIndex("documentKeyIndex",nw,{unique:!1})}(e)})),c}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=xg(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>le.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>le.forEach(p,_=>{xt(_.userId===a.userId);const E=Tg(this.M,_);return zA(e,a.userId,E).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((c,p)=>{const _=new cn(c),E=[0,zr(_)];a.push(t.get(E).next(A=>A?le.resolve():t.put({targetId:0,path:zr(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(a))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:Jb});const r=t.store("collectionParents"),i=new dw,a=c=>{if(i.add(c)){const p=c.lastSegment(),_=c.popLast();return r.put({collectionId:p,parent:zr(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const _=new cn(c);return a(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,_],E)=>{const A=Ri(p);return a(A.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=Dg(i),c=tf(this.M,a);return t.put(c)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,c)=>{const p=t.store("remoteDocumentsV14"),_=(E=c,E.document?new Be(cn.fromString(E.document.name).popFirst(5)):E.noDocument?Be.fromSegments(E.noDocument.path):E.unknownDocument?Be.fromSegments(E.unknownDocument.path):st()).path.toArray();var E;const A={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(A))}).next(()=>le.waitFor(i))}}function gI(n){n.createObjectStore("targetDocuments",{keyPath:RA}).createIndex("documentTargetsIndex",Qb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tw,{unique:!0}),n.createObjectStore("targetGlobal")}const yw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ad{constructor(e,t,r,i,a,c,p,_,E,A,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=a,this.window=c,this.document=p,this.Yn=E,this.Xn=A,this.Zn=S,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=P=>Promise.resolve(),!Ad.vt())throw new Me(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Rg(this,i),this.cs=t+"main",this.M=new sI(_),this.hs=new ho(this.cs,this.Zn,new eS(this.M)),this.ls=new YA(this.referenceDelegate,this.M),this.fs=new dI(this.M),this.ds=new jA,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===A&&ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(se.FAILED_PRECONDITION,yw);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new Ts(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ge.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>uf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(jl(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return Og(e).get("owner").next(t=>le.resolve(this.bs(t)))}Ps(e){return uf(e).delete(this.clientId)}Vs(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Kr(r,"clientMetadata");return i.qt().next(a=>{const c=e.Ss(a,18e5),p=a.filter(_=>-1===c.indexOf(_));return le.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?le.resolve(!0):Og(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Me(se.FAILED_PRECONDITION,yw);return!1}}return!(!this.networkEnabled||!this.inForeground)||uf(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new B_(t,Ts.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>uf(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return fw.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new GA(e)}getDocumentOverlayCache(e){return aw.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(c=this.Zn)?UA:13===c?tI:12===c?LA:11===c?eI:void st();var c;let p;return this.hs.runTransaction(e,i,a,_=>(p=new B_(_,this.ts?this.ts.next():Ts.A),"readwrite-primary"===t?this.Ts(p).next(E=>!!E||this.Es(p)).next(E=>{if(!E)throw ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Me(se.FAILED_PRECONDITION,nI);return r(p)}).next(E=>this.Rs(p).next(()=>E)):this.Fs(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Fs(e){return Og(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(se.FAILED_PRECONDITION,yw)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Og(e).put("owner",t)}static vt(){return ho.vt()}As(e){const t=Og(e);return t.get("owner").next(r=>this.bs(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(ur(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,O.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ur("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){ur("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Og(n){return Kr(n,"owner")}function uf(n){return Kr(n,"clientMetadata")}function fo(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class tS{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Be.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):x_(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new Be(t)).next(r=>{let i=G0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let a=G0();return this.indexManager.getCollectionParents(e,i).next(c=>le.forEach(c,p=>{const _=(E=t,A=p.child(i),new Iu(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,A;return this.Ws(e,_,r).next(E=>{E.forEach((A,S)=>{a=a.insert(A,S)})})}).next(()=>a))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const c of a)for(const p of c.mutations){const _=p.key;let E=i.get(_);null==E&&(E=$n.newInvalidDocument(_),i=i.insert(_,E)),O_(p,E,c.localWriteTime),E.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((a,c)=>{R_(t,c)||(i=i.remove(a))}),i))}}class kg{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=En(),i=En();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new kg(e,t.fromCache,r,i)}}class lf{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Tt.min())?this.Zs(e,t):this.Xs.qs(e,i).next(a=>{const c=this.ti(t,a);return(A_(t)||hg(t))&&this.ei(t.limitType,c,i,r)?this.Zs(e,t):(y0()<=wr.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zh(t)),this.Xs.Ks(e,t,wb(r,-1)).next(p=>(c.forEach(_=>{p=p.insert(_.key,_)}),p)))});var a}ti(e,t){let r=new Wn(L0(e));return t.forEach((i,a)=>{R_(e,a)&&(r=r.add(a))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Zs(e,t){return y0()<=wr.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",Zh(t)),this.Xs.Ks(e,t,Cu.min())}}class nS{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new Or(Zt),this.ii=new Aa(a=>_d(a),qh),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new tS(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function mI(n,e,t,r){return new nS(n,e,t,r)}function _I(n,e){return cf.apply(this,arguments)}function cf(){return cf=(0,ge.Z)(function*(n,e){const t=He(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(a=>(i=a,t.ui(e),t.$s.getAllMutationBatches(r))).next(a=>{const c=[],p=[];let _=En();for(const E of i){c.push(E.batchId);for(const A of E.mutations)_=_.add(A.key)}for(const E of a){p.push(E.batchId);for(const A of E.mutations)_=_.add(A.key)}return t.ai.qs(r,_).next(E=>({ci:E,removedBatchIds:c,addedBatchIds:p}))})})}),cf.apply(this,arguments)}function $_(n,e){const t=He(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.oi.newChangeBuffer({trackRemovals:!0});return function(c,p,_,E){const A=_.batch,S=A.keys();let P=le.resolve();return S.forEach(V=>{P=P.next(()=>E.getEntry(p,V)).next(G=>{const fe=_.docVersions.get(V);xt(null!==fe),G.version.compareTo(fe)<0&&(A.applyToRemoteDocument(G,_),G.isValidDocument()&&(G.setReadTime(_.commitVersion),E.addEntry(G)))})}),P.next(()=>c.$s.removeMutationBatch(p,A))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function yI(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function rS(n,e){const t=He(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const p=[];e.targetChanges.forEach((E,A)=>{const S=i.get(A);if(!S)return;p.push(t.ls.removeMatchingKeys(a,E.removedDocuments,A).next(()=>t.ls.addMatchingKeys(a,E.addedDocuments,A)));let P=S.withSequenceNumber(a.currentSequenceNumber);var V,G,fe;e.targetMismatches.has(A)?P=P.withResumeToken(Gr.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,r)),i=i.insert(A,P),G=P,fe=E,(0===(V=S).resumeToken.approximateByteSize()||G.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0)&&p.push(t.ls.updateTargetData(a,P))});let _=co();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))}),p.push(vw(a,c,e.documentUpdates).next(E=>{_=E})),!r.isEqual(Tt.min())){const E=t.ls.getLastRemoteSnapshotVersion(a).next(A=>t.ls.setTargetsMetadata(a,a.currentSequenceNumber,r));p.push(E)}return le.waitFor(p).next(()=>c.apply(a)).next(()=>t.ai.Gs(a,_)).next(()=>_)}).then(a=>(t.si=i,a))}function vw(n,e,t){let r=En();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=co();return t.forEach((c,p)=>{const _=i.get(c);p.isNoDocument()&&p.version.isEqual(Tt.min())?(e.removeEntry(c,p.readTime),a=a.insert(c,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),a=a.insert(c,p)):ke("LocalStore","Ignoring outdated watch update for ",c,". Current version:",_.version," Watch version:",p.version)}),a})}function vI(n,e){const t=He(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function zl(n,e){const t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(a=>a?(i=a,le.resolve(i)):t.ls.allocateTargetId(r).next(c=>(i=new Ma(e,c,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function Sd(n,e,t){return ww.apply(this,arguments)}function ww(){return ww=(0,ge.Z)(function*(n,e,t){const r=He(n),i=r.si.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!jl(c))throw c;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),ww.apply(this,arguments)}function Z_(n,e,t){const r=He(n);let i=Tt.min(),a=En();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,_,E){const A=He(p),S=A.ii.get(E);return void 0!==S?le.resolve(A.si.get(S)):A.ls.getTargetData(_,E)}(r,c,lo(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(c,p.targetId).next(_=>{a=_})}).next(()=>r.ni.Ks(c,e,t?i:Tt.min(),t?a:En())).next(p=>(G_(r,F0(e),p),{documents:p,hi:a})))}function iS(n,e){const t=He(n),r=He(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(c=>c?c.target:null))}function H_(n,e){const t=He(n),r=t.ri.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,wb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(G_(t,e,i),i))}function G_(n,e,t){let r=Tt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ri.set(e,r)}function Fg(){return Fg=(0,ge.Z)(function*(n,e,t,r){const i=He(n);let a=En(),c=co();for(const E of t){const A=e.li(E.metadata.name);E.document&&(a=a.add(A));const S=e.fi(E);S.setReadTime(e.di(E.metadata.readTime)),c=c.insert(A,S)}const p=i.oi.newChangeBuffer({trackRemovals:!0}),_=yield zl(i,(E=r,lo(Da(cn.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>vw(E,p,c).next(A=>(p.apply(E),A)).next(A=>i.ls.removeMatchingKeysForTargetId(E,_.targetId).next(()=>i.ls.addMatchingKeys(E,a,_.targetId)).next(()=>i.ai.Gs(E,A)).next(()=>A)))}),Fg.apply(this,arguments)}function Ew(n,e){return Cw.apply(this,arguments)}function Cw(){return Cw=(0,ge.Z)(function*(n,e,t=En()){const r=yield zl(n,lo(sw(e.bundledQuery))),i=He(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Wr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.ds.saveNamedQuery(a,e);const p=r.withResumeToken(Gr.EMPTY_BYTE_STRING,c);return i.si=i.si.insert(p.targetId,p),i.ls.updateTargetData(a,p).next(()=>i.ls.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.ls.addMatchingKeys(a,t,r.targetId)).next(()=>i.ds.saveNamedQuery(a,e))})}),Cw.apply(this,arguments)}class sS{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return le.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Wr(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:sw(r.bundledQuery),readTime:Wr(r.readTime)}),le.resolve();var r}}class oS{constructor(){this.overlays=new Or(Be.comparator),this.mi=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.mi.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=Vl(),a=t.length+1,c=new Be(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,E=_.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Or((E,A)=>E-A);const c=this.overlays.getIterator();for(;c.hasNext();){const E=c.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let A=a.get(E.largestBatchId);null===A&&(A=Vl(),a=a.insert(E.largestBatchId,A)),A.set(E.getKey(),E)}}const p=Vl(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((E,A)=>p.set(E,A)),!(p.size()>=i)););return le.resolve(p)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new iw(t,r));let a=this.mi.get(t);void 0===a&&(a=En(),this.mi.set(t,a)),this.mi.set(t,a.add(r.key))}}class bw{constructor(){this.gi=new Wn(Qr.yi),this.pi=new Wn(Qr.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Qr(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Qr(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Be(new cn([])),r=new Qr(t,e),i=new Qr(t,e+1),a=[];return this.pi.forEachInRange([r,i],c=>{this.Ei(c),a.push(c.key)}),a}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Be(new cn([])),r=new Qr(t,e),i=new Qr(t,e+1);let a=En();return this.pi.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Qr(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Qr{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Be.comparator(e.key,t.key)||Zt(e.Vi,t.Vi)}static Ii(e,t){return Zt(e.Vi,t.Vi)||Be.comparator(e.key,t.key)}}class Iw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new Wn(Qr.yi)}checkEmpty(e){return le.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const a=this.vi;this.vi++;const c=new bg(a,t,r,i);this.$s.push(c);for(const p of i)this.Si=this.Si.add(new Qr(p.key,a)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return le.resolve(c)}lookupMutationBatch(e,t){return le.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),a=i<0?0:i;return le.resolve(this.$s.length>a?this.$s[a]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return le.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Qr(t,0),i=new Qr(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],c=>{const p=this.Di(c.Vi);a.push(p)}),le.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wn(Zt);return t.forEach(i=>{const a=new Qr(i,0),c=new Qr(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([a,c],p=>{r=r.add(p.Vi)})}),le.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Be.isDocumentKey(a)||(a=a.child(""));const c=new Qr(new Be(a),0);let p=new Wn(Zt);return this.Si.forEachWhile(_=>{const E=_.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(p=p.add(_.Vi)),!0)},c),le.resolve(this.xi(p))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){xt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return le.forEach(t.mutations,i=>{const a=new Qr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Qr(t,0),i=this.Si.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class EI{constructor(e){this.ki=e,this.docs=new Or(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():$n.newInvalidDocument(t))}getEntries(e,t){let r=co();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():$n.newInvalidDocument(i))}),le.resolve(r)}getAllFromCollection(e,t,r){let i=co();const a=new Be(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:p,value:{document:_}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||Cb(Eb(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return le.resolve(i)}getAllFromCollectionGroup(e,t,r,i){st()}Mi(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aS(this)}getSize(e){return le.resolve(this.size)}}class aS extends mw{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class CI{constructor(e){this.persistence=e,this.Oi=new Aa(t=>_d(t),qh),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Fi=0,this.$i=new bw,this.targetCount=0,this.Bi=xu.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),le.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new xu(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.In(t),le.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Oi.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Oi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),le.waitFor(a).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),le.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.$i.containsKey(t))}}class bI{constructor(e,t){this.Li={},this.overlays={},this.ts=new Ts(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new CI(this),this.indexManager=new HA,this.fs=new EI(r=>this.referenceDelegate.Ui(r)),this.M=new sI(t),this.ds=new sS(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new Iw(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const i=new uS(this.ts.next());return this.referenceDelegate.qi(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e,t){return le.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class uS extends rI{constructor(e){super(),this.currentSequenceNumber=e}}class W_{constructor(e){this.persistence=e,this.Qi=new bw,this.ji=null}static Wi(e){return new W_(e)}get zi(){if(this.ji)return this.ji;throw st()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.zi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.zi,r=>{const i=Be.fromPath(r);return this.Hi(e,i).next(a=>{a||t.removeEntry(i,Tt.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return le.or([()=>le.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function Tw(n,e){return`firestore_clients_${n}_${e}`}function II(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function z_(n,e){return`firestore_targets_${n}_${e}`}class K_{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Me(i.error.code,i.error.message))),c?new K_(e,t,i.state,a):(ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jr{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Me(r.error.code,r.error.message))),a?new Jr(e,r.state,i):(ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mu{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=U_();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=I0(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new Mu(e,a):(ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Dw{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Dw(t.clientId,t.onlineState):(ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Aw{constructor(){this.activeTargetIds=U_()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TI{constructor(e,t,r,i,a){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Or(Zt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=Tw(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Aw),this.ar=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const a=e.getItem(Tw(e.persistenceKey,i));if(a){const c=Mu.Ji(i,a);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(z_(this.persistenceKey,e));if(r){const i=Jr.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(z_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let c=Ts.A;if(null!=a)try{const p=JSON.parse(a);xt("number"==typeof p),c=p}catch(p){ur("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==Ts.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new K_(this.currentUser,e,t,r),a=II(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=II(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=z_(this.persistenceKey,e),a=new Jr(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Mu.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return K_.Ji(new mi(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return Jr.Ji(i,t)}wr(e){return Dw.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),c=[],p=[];return a.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{a.has(_)||p.push(_)}),this.syncEngine.Or(c,p).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=U_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class df{constructor(){this.Fr=new Aw,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Aw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lS{Br(e){}shutdown(){}}class Y_{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const cS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class DI{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class dS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const c=this.oo(e,t);ke("RestConnection","Sending: ",c,r);const p={};return this.uo(p,i,a),this.ao(e,c,p,r).then(_=>(ke("RestConnection","Received: ",_),_),_=>{throw hd("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}co(e,t,r,i,a){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+dd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${cS[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((a,c)=>{const p=new nA;p.listenOnce(lb.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case g0.NO_ERROR:const E=p.getResponseJson();ke("Connection","XHR received:",JSON.stringify(E)),a(E);break;case g0.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),c(new Me(se.DEADLINE_EXCEEDED,"Request time out"));break;case g0.HTTP_ERROR:const A=p.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',A,"response text:",p.getResponseText()),A>0){const S=p.getResponseJson().error;if(S&&S.status&&S.message){const P=function(V){const G=V.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(G)>=0?G:se.UNKNOWN}(S.status);c(new Me(P,S.message))}else c(new Me(se.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Me(se.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ab(),c=ub(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new cb({})),this.uo(p.initMessageHeaders,t,r),(0,O.uI)()||(0,O.b$)()||(0,O.d)()||(0,O.w1)()||(0,O.Mn)()||(0,O.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");ke("Connection","Creating WebChannel: "+_,p);const E=a.createWebChannel(_,p);let A=!1,S=!1;const P=new DI({jr:G=>{S?ke("Connection","Not sending because WebChannel is closed:",G):(A||(ke("Connection","Opening WebChannel transport."),E.open(),A=!0),ke("Connection","WebChannel sending:",G),E.send(G))},Wr:()=>E.close()}),V=(G,fe,Te)=>{G.listen(fe,dt=>{try{Te(dt)}catch(ze){setTimeout(()=>{throw ze},0)}})};return V(E,E_.EventType.OPEN,()=>{S||ke("Connection","WebChannel transport opened.")}),V(E,E_.EventType.CLOSE,()=>{S||(S=!0,ke("Connection","WebChannel transport closed"),P.eo())}),V(E,E_.EventType.ERROR,G=>{S||(S=!0,hd("Connection","WebChannel transport errored:",G),P.eo(new Me(se.UNAVAILABLE,"The operation could not be completed")))}),V(E,E_.EventType.MESSAGE,G=>{var fe;if(!S){const Te=G.data[0];xt(!!Te);const dt=Te,ze=dt.error||(null===(fe=dt[0])||void 0===fe?void 0:fe.error);if(ze){ke("Connection","WebChannel received error:",ze);const ft=ze.status;let Ke=function(Ft){const _o=Pr[Ft];if(void 0!==_o)return gA(_o)}(ft),Mt=ze.message;void 0===Ke&&(Ke=se.INTERNAL,Mt="Unknown error status: "+ft+" with message "+ze.message),S=!0,P.eo(new Me(Ke,Mt)),E.close()}else ke("Connection","WebChannel received:",Te),P.no(Te)}}),V(c,tA.STAT_EVENT,G=>{G.stat===m0.PROXY?ke("Connection","Detected buffering proxy"):G.stat===m0.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.Zr()},0),P}}function AI(){return"undefined"!=typeof window?window:null}function hf(){return"undefined"!=typeof document?document:null}function ff(n){return new wA(n,!0)}class Q_{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Lg{constructor(e,t,r,i,a,c,p,_){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Q_(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ge.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ge.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(ur(t.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===se.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Me(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ge.Z)(function*(){e.state=0,e.start()}))}qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sw extends Lg{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=a}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function EA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:st(),i=e.targetChange.targetIds||[],a=function(_,E){return _.N?(xt(void 0===E||"string"==typeof E),Gr.fromBase64String(E||"")):(xt(void 0===E||E instanceof Uint8Array),Gr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(_){const E=void 0===_.code?se.UNKNOWN:gA(_.code);return new Me(E,_.message||"")}(c);t=new z0(r,i,a,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Sa(n,r.document.name),a=Wr(r.document.updateTime),c=new Xi({mapValue:{fields:r.document.fields}}),p=$n.newFoundDocument(i,a,c);t=new _g(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Sa(n,r.document),a=r.readTime?Wr(r.readTime):Tt.min(),c=$n.newNoDocument(i,a);t=new _g([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Sa(n,r.document);t=new _g([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,a=new Ed(r.count||0);t=new W0(r.targetId,a)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Tt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Tt.min():a.readTime?Wr(a.readTime):Tt.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=Xh(this.M),t.addTarget=function(i,a){let c;const p=a.target;return c=T_(p)?{documents:CA(i,p)}:{query:bA(i,p)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=K0(i,a.resumeToken):a.snapshotVersion.compareTo(Tt.min())>0&&(c.readTime=Bl(i,a.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function V_(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=Xh(this.M),t.removeTarget=e,this.Oo(t)}}class xR extends Lg{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function SR(n,e){return n&&n.length>0?(xt(void 0!==e),n.map(t=>function(r,i){let a=Wr(r.updateTime?r.updateTime:i);return a.isEqual(Tt.min())&&(a=Wr(i)),new fA(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.Jo(r,t)}return xt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Xh(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>yg(this.M,r))};this.Oo(t)}}class SI extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new Me(se.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(se.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(se.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class hS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(ur(t),this.su=!1):ke("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class xI{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(p=>{r.enqueueAndForget((0,ge.Z)(function*(){var _;Yl(c)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ge.Z)(function*(E){const A=He(E);A.lu.add(4),yield pf(A),A._u.set("Unknown"),A.lu.delete(4),yield Kl(A)}),function(E){return _.apply(this,arguments)})(c))}))}),this._u=new hS(r,i)}}function Kl(n){return J_.apply(this,arguments)}function J_(){return J_=(0,ge.Z)(function*(n){if(Yl(n))for(const e of n.fu)yield e(!0)}),J_.apply(this,arguments)}function pf(n){return Ug.apply(this,arguments)}function Ug(){return Ug=(0,ge.Z)(function*(n){for(const e of n.fu)yield e(!1)}),Ug.apply(this,arguments)}function gf(n,e){const t=He(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),ty(t)?ey(t):_f(t).Co()&&xw(t,e))}function X_(n,e){const t=He(n),r=_f(t);t.hu.delete(e),r.Co()&&MI(t,e),0===t.hu.size&&(r.Co()?r.ko():Yl(t)&&t._u.set("Unknown"))}function xw(n,e){n.wu.Z(e.targetId),_f(n).Qo(e)}function MI(n,e){n.wu.Z(e),_f(n).jo(e)}function ey(n){n.wu=new _A({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),_f(n).start(),n._u.iu()}function ty(n){return Yl(n)&&!_f(n).Do()&&n.hu.size>0}function Yl(n){return 0===He(n).lu.size}function Mw(n){n.wu=void 0}function RI(n){return Rw.apply(this,arguments)}function Rw(){return Rw=(0,ge.Z)(function*(n){n.hu.forEach((e,t)=>{xw(n,e)})}),Rw.apply(this,arguments)}function fS(n,e){return ny.apply(this,arguments)}function ny(){return ny=(0,ge.Z)(function*(n,e){Mw(n),ty(n)?(n._u.uu(e),ey(n)):n._u.set("Unknown")}),ny.apply(this,arguments)}function pS(n,e,t){return ry.apply(this,arguments)}function ry(){return ry=(0,ge.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof z0&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(i,a){const c=a.cause;for(const p of a.targetIds)i.hu.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.hu.delete(p),i.wu.removeTarget(p))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Vg(n,r)}else if(e instanceof _g?n.wu.ut(e):e instanceof W0?n.wu._t(e):n.wu.ht(e),!t.isEqual(Tt.min()))try{const r=yield yI(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.wu.yt(a);return c.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const E=i.hu.get(_);E&&i.hu.set(_,E.withResumeToken(p.resumeToken,a))}}),c.targetMismatches.forEach(p=>{const _=i.hu.get(p);if(!_)return;i.hu.set(p,_.withResumeToken(Gr.EMPTY_BYTE_STRING,_.snapshotVersion)),MI(i,p);const E=new Ma(_.target,p,1,_.sequenceNumber);xw(i,E)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield Vg(n,r)}var r}),ry.apply(this,arguments)}function Vg(n,e,t){return iy.apply(this,arguments)}function iy(){return iy=(0,ge.Z)(function*(n,e,t){if(!jl(e))throw e;n.lu.add(1),yield pf(n),n._u.set("Offline"),t||(t=()=>yI(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Kl(n)}))}),iy.apply(this,arguments)}function Nw(n,e){return e().catch(t=>Vg(n,t,e))}function mf(n){return Pw.apply(this,arguments)}function Pw(){return Pw=(0,ge.Z)(function*(n){const e=He(n),t=Ra(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;MR(e);)try{const i=yield vI(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,NI(e,i)}catch(i){yield Vg(e,i)}gS(e)&&mS(e)}),Pw.apply(this,arguments)}function MR(n){return Yl(n)&&n.cu.length<10}function NI(n,e){n.cu.push(e);const t=Ra(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function gS(n){return Yl(n)&&!Ra(n).Do()&&n.cu.length>0}function mS(n){Ra(n).start()}function RR(n){return PI.apply(this,arguments)}function PI(){return PI=(0,ge.Z)(function*(n){Ra(n).Xo()}),PI.apply(this,arguments)}function NR(n){return OI.apply(this,arguments)}function OI(){return OI=(0,ge.Z)(function*(n){const e=Ra(n);for(const t of n.cu)e.Ho(t.mutations)}),OI.apply(this,arguments)}function PR(n,e,t){return kI.apply(this,arguments)}function kI(){return kI=(0,ge.Z)(function*(n,e,t){const r=n.cu.shift(),i=rw.from(r,e,t);yield Nw(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield mf(n)}),kI.apply(this,arguments)}function sy(n,e){return FI.apply(this,arguments)}function FI(){return FI=(0,ge.Z)(function*(n,e){var t;e&&Ra(n).zo&&(yield(t=(0,ge.Z)(function*(r,i){if(Cd(a=i.code)&&a!==se.ABORTED){const c=r.cu.shift();Ra(r).No(),yield Nw(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield mf(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),gS(n)&&mS(n)}),FI.apply(this,arguments)}function oy(n,e){return Ql.apply(this,arguments)}function Ql(){return Ql=(0,ge.Z)(function*(n,e){const t=He(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Yl(t);t.lu.add(3),yield pf(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Kl(t)}),Ql.apply(this,arguments)}function ay(n,e){return Ow.apply(this,arguments)}function Ow(){return Ow=(0,ge.Z)(function*(n,e){const t=He(n);e?(t.lu.delete(2),yield Kl(t)):e||(t.lu.add(2),yield pf(t),t._u.set("Unknown"))}),Ow.apply(this,arguments)}function _f(n){return n.mu||(n.mu=function(e,t,r){const i=He(e);return i.tu(),new Sw(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:RI.bind(null,n),Jr:fS.bind(null,n),Ko:pS.bind(null,n)}),n.fu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.mu.No(),ty(n)?ey(n):n._u.set("Unknown")):(yield n.mu.stop(),Mw(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Ra(n){return n.gu||(n.gu=function(e,t,r){const i=He(e);return i.tu(),new xR(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:RR.bind(null,n),Jr:sy.bind(null,n),Yo:NR.bind(null,n),Jo:PR.bind(null,n)}),n.fu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.gu.No(),yield mf(n)):(yield n.gu.stop(),n.cu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class uy{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,p=new uy(e,t,c,i,a);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xd(n,e){if(ur("AsyncQueue",`${e}: ${n}`),jl(n))return new Me(se.UNAVAILABLE,`${e}: ${n}`);throw n}class Md{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=G0(),this.sortedSet=new Or(this.comparator)}static emptySet(e){return new Md(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Md)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Md;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class _S{constructor(){this.yu=new Or(Be.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):st():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Rd{constructor(e,t,r,i,a,c,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new Rd(e,t,Md.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class ly{constructor(){this.Iu=void 0,this.listeners=[]}}class LI{constructor(){this.queries=new Aa(e=>M_(e),$h),this.onlineState="Unknown",this.Tu=new Set}}function UI(n,e){return VI.apply(this,arguments)}function VI(){return VI=(0,ge.Z)(function*(n,e){const t=He(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new ly),i)try{a.Iu=yield t.onListen(r)}catch(c){const p=xd(c,`Initialization of query '${Zh(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&jI(t)}),VI.apply(this,arguments)}function BI(n,e){return kw.apply(this,arguments)}function kw(){return kw=(0,ge.Z)(function*(n,e){const t=He(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),kw.apply(this,arguments)}function Fw(n,e){const t=He(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Au(i)&&(r=!0);c.Iu=i}}r&&jI(t)}function yS(n,e,t){const r=He(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function jI(n){n.Tu.forEach(e=>{e.next()})}class Lw{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Rd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Rd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class Uw{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class qI{constructor(e){this.M=e}li(e){return Sa(this.M,e)}fi(e){return e.metadata.exists?Bb(this.M,e.document,!1):$n.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Wr(e)}}class Ds{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$I(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=cn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new qI(this.M);for(const i of e)if(i.metadata.queries){const a=r.li(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||En()).add(a);t.set(c,p)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function wI(n,e,t,r){return Fg.apply(this,arguments)}(e.localStore,new qI(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield Ew(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function $I(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class cy{constructor(e){this.key=e}}class ZI{constructor(e){this.key=e}}class HI{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=En(),this.mutatedKeys=En(),this.Lu=L0(e),this.Uu=new Md(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new _S,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const _=A_(this.query)&&i.size===this.query.limit?i.last():null,E=hg(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,S)=>{const P=i.get(A),V=R_(this.query,S)?S:null,G=!!P&&this.mutatedKeys.has(P.key),fe=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Te=!1;P&&V?P.data.isEqual(V.data)?G!==fe&&(r.track({type:3,doc:V}),Te=!0):this.Qu(P,V)||(r.track({type:2,doc:V}),Te=!0,(_&&this.Lu(V,_)>0||E&&this.Lu(V,E)<0)&&(p=!0)):!P&&V?(r.track({type:0,doc:V}),Te=!0):P&&!V&&(r.track({type:1,doc:P}),Te=!0,(_||E)&&(p=!0)),Te&&(V?(c=c.add(V),a=fe?a.add(A):a.delete(A)):(c=c.delete(A),a=a.delete(A)))}),A_(this.query)||hg(this.query))for(;c.size>this.query.limit;){const A=A_(this.query)?c.last():c.first();c=c.delete(A.key),a=a.delete(A.key),r.track({type:1,doc:A})}return{Uu:c,Ku:r,ei:p,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Ku.pu();a.sort((E,A)=>function(S,P){const V=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return V(S)-V(P)}(E.type,A.type)||this.Lu(E.doc,A.doc)),this.ju(r);const c=t?this.Wu():[],p=0===this.Bu.size&&this.current?1:0,_=p!==this.$u;return this.$u=p,0!==a.length||_?{snapshot:new Rd(this.query,e.Uu,i,a,e.mutatedKeys,0===p,_,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new _S,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=En(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new ZI(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new cy(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=En();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Rd.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Vw{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class GI{constructor(e){this.key=e,this.Xu=!1}}class WI{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Zu={},this.ta=new Aa(p=>M_(p),$h),this.ea=new Map,this.na=new Set,this.sa=new Or(Be.comparator),this.ia=new Map,this.ra=new bw,this.oa={},this.ua=new Map,this.aa=xu.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function vS(n,e){return dy.apply(this,arguments)}function dy(){return dy=(0,ge.Z)(function*(n,e){const t=qg(n);let r,i;const a=t.ta.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const c=yield zl(t.localStore,lo(e));t.isPrimaryClient&&gf(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield hy(t,e,r,"current"===p)}return i}),dy.apply(this,arguments)}function hy(n,e,t,r){return Bw.apply(this,arguments)}function Bw(){return Bw=(0,ge.Z)(function*(n,e,t,r){n.ha=(A,S,P)=>{return(V=(0,ge.Z)(function*(G,fe,Te,dt){let ze=fe.view.Gu(Te);ze.ei&&(ze=yield Z_(G.localStore,fe.query,!1).then(({documents:Mt})=>fe.view.Gu(Mt,ze)));const ft=dt&&dt.targetChanges.get(fe.targetId),Ke=fe.view.applyChanges(ze,G.isPrimaryClient,ft);return my(G,fe.targetId,Ke.zu),Ke.snapshot}),function(G,fe,Te,dt){return V.apply(this,arguments)})(n,A,S,P);var V};const i=yield Z_(n.localStore,e,!0),a=new HI(e,i.hi),c=a.Gu(i.documents),p=Yh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(c,n.isPrimaryClient,p);my(n,t,_.zu);const E=new Vw(e,t,a);return n.ta.set(e,E),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),_.snapshot}),Bw.apply(this,arguments)}function wS(n,e){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,ge.Z)(function*(n,e){const t=He(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(a=>!$h(a,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Sd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),X_(t.remoteStore,r.targetId),Na(t,r.targetId)}).catch(Td))):(Na(t,r.targetId),yield Sd(t.localStore,r.targetId,!0))}),Bg.apply(this,arguments)}function jw(){return jw=(0,ge.Z)(function*(n,e,t){const r=$g(n);try{const i=yield function(a,c){const p=He(a),_=lr.now(),E=c.reduce((S,P)=>S.add(P.key),En());let A;return p.persistence.runTransaction("Locally write mutations","readwrite",S=>p.ai.qs(S,E).next(P=>{A=P;const V=[];for(const G of c){const fe=Ob(G,A.get(G.key));null!=fe&&V.push(new Ul(G.key,fe,vb(fe.value.mapValue),Nr.exists(!0)))}return p.$s.addMutationBatch(S,_,V,c)})).then(S=>(S.applyToLocalDocumentSet(A),{batchId:S.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,p){let _=a.oa[a.currentUser.toKey()];_||(_=new Or(Zt)),_=_.insert(c,p),a.oa[a.currentUser.toKey()]=_}(r,i.batchId,t),yield Pa(r,i.changes),yield mf(r.remoteStore)}catch(i){const a=xd(i,"Failed to persist write");t.reject(a)}}),jw.apply(this,arguments)}function ES(n,e){return qw.apply(this,arguments)}function qw(){return qw=(0,ge.Z)(function*(n,e){const t=He(n);try{const r=yield rS(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.ia.get(a);c&&(xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?xt(c.Xu):i.removedDocuments.size>0&&(xt(c.Xu),c.Xu=!1))}),yield Pa(t,r,e)}catch(r){yield Td(r)}}),qw.apply(this,arguments)}function $w(n,e,t){const r=He(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((a,c)=>{const p=c.view.Eu(e);p.snapshot&&i.push(p.snapshot)}),function(a,c){const p=He(a);p.onlineState=c;let _=!1;p.queries.forEach((E,A)=>{for(const S of A.listeners)S.Eu(c)&&(_=!0)}),_&&jI(p)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function CS(n,e,t){return Zw.apply(this,arguments)}function Zw(){return Zw=(0,ge.Z)(function*(n,e,t){const r=He(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),a=i&&i.key;if(a){let c=new Or(Be.comparator);c=c.insert(a,$n.newNoDocument(a,Tt.min()));const p=En().add(a),_=new mg(Tt.min(),new Map,new Wn(Zt),c,p);yield ES(r,_),r.sa=r.sa.remove(a),r.ia.delete(e),_y(r)}else yield Sd(r.localStore,e,!1).then(()=>Na(r,e,t)).catch(Td)}),Zw.apply(this,arguments)}function zI(n,e){return Hw.apply(this,arguments)}function Hw(){return Hw=(0,ge.Z)(function*(n,e){const t=He(n),r=e.batch.batchId;try{const i=yield $_(t.localStore,e);py(t,r,null),Ww(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pa(t,i)}catch(i){yield Td(i)}}),Hw.apply(this,arguments)}function OR(n,e,t){return fy.apply(this,arguments)}function fy(){return fy=(0,ge.Z)(function*(n,e,t){const r=He(n);try{const i=yield function(a,c){const p=He(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return p.$s.lookupMutationBatch(_,c).next(A=>(xt(null!==A),E=A.keys(),p.$s.removeMutationBatch(_,A))).next(()=>p.$s.performConsistencyCheck(_)).next(()=>p.ai.qs(_,E))})}(r.localStore,e);py(r,e,t),Ww(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pa(r,i)}catch(i){yield Td(i)}}),fy.apply(this,arguments)}function Gw(){return Gw=(0,ge.Z)(function*(n,e){const t=He(n);Yl(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=He(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.$s.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=xd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Gw.apply(this,arguments)}function Ww(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function py(n,e,t){const r=He(n);let i=r.oa[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function Na(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||gy(n,r)})}function gy(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(X_(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),_y(n))}function my(n,e,t){for(const r of t)r instanceof cy?(n.ra.addReference(r.key,e),bS(n,r)):r instanceof ZI?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||gy(n,r.key)):st()}function bS(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.na.add(r),_y(n))}function _y(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Be(cn.fromString(e)),r=n.aa.next();n.ia.set(r,new GI(t)),n.sa=n.sa.insert(t,r),gf(n.remoteStore,new Ma(lo(Da(t.path)),r,2,Ts.A))}}function Pa(n,e,t){return zw.apply(this,arguments)}function zw(){return zw=(0,ge.Z)(function*(n,e,t){const r=He(n),i=[],a=[],c=[];var p;r.ta.isEmpty()||(r.ta.forEach((p,_)=>{c.push(r.ha(_,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,E.fromCache?"not-current":"current"),i.push(E);const A=kg.Js(_.targetId,E);a.push(A)}}))}),yield Promise.all(c),r.Zu.Ko(i),yield(p=(0,ge.Z)(function*(_,E){const A=He(_);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>le.forEach(E,P=>le.forEach(P.zs,V=>A.persistence.referenceDelegate.addReference(S,P.targetId,V)).next(()=>le.forEach(P.Hs,V=>A.persistence.referenceDelegate.removeReference(S,P.targetId,V)))))}catch(S){if(!jl(S))throw S;ke("LocalStore","Failed to update sequence numbers: "+S)}for(const S of E){const P=S.targetId;if(!S.fromCache){const V=A.si.get(P),fe=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);A.si=A.si.insert(P,fe)}}}),function(_,E){return p.apply(this,arguments)})(r.localStore,a))}),zw.apply(this,arguments)}function IS(n,e){return YI.apply(this,arguments)}function YI(){return YI=(0,ge.Z)(function*(n,e){const t=He(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield _I(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(c=>{c.forEach(p=>{p.reject(new Me(se.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pa(t,r.ci)}var i}),YI.apply(this,arguments)}function kR(n,e){const t=He(n),r=t.ia.get(e);if(r&&r.Xu)return En().add(r.key);{let i=En();const a=t.ea.get(e);if(!a)return i;for(const c of a){const p=t.ta.get(c);i=i.unionWith(p.view.qu)}return i}}function QI(n,e){return Kw.apply(this,arguments)}function Kw(){return Kw=(0,ge.Z)(function*(n,e){const t=He(n),r=yield Z_(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&my(t,e.targetId,i.zu),i}),Kw.apply(this,arguments)}function TS(n,e){return Yw.apply(this,arguments)}function Yw(){return Yw=(0,ge.Z)(function*(n,e){const t=He(n);return H_(t.localStore,e).then(r=>Pa(t,r))}),Yw.apply(this,arguments)}function FR(n,e,t,r){return JI.apply(this,arguments)}function JI(){return JI=(0,ge.Z)(function*(n,e,t,r){const i=He(n),a=yield function(c,p){const _=He(c),E=He(_.$s);return _.persistence.runTransaction("Lookup mutation documents","readonly",A=>E.ln(A,p).next(S=>S?_.ai.qs(A,S):le.resolve(null)))}(i.localStore,e);var p;null!==a?("pending"===t?yield mf(i.remoteStore):"acknowledged"===t||"rejected"===t?(py(i,e,r||null),Ww(i,e),p=e,He(He(i.localStore).$s).dn(p)):st(),yield Pa(i,a)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),JI.apply(this,arguments)}function XI(){return XI=(0,ge.Z)(function*(n,e){const t=He(n);if(qg(t),$g(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield DS(t,r.toArray());t.ca=!0,yield ay(t.remoteStore,!0);for(const a of i)gf(t.remoteStore,a)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Na(t,c),Sd(t.localStore,c,!0))),X_(t.remoteStore,c)}),yield i,yield DS(t,r),function(a){const c=He(a);c.ia.forEach((p,_)=>{X_(c.remoteStore,_)}),c.ra.bi(),c.ia=new Map,c.sa=new Or(Be.comparator)}(t),t.ca=!1,yield ay(t.remoteStore,!1)}}),XI.apply(this,arguments)}function DS(n,e,t){return Qw.apply(this,arguments)}function Qw(){return Qw=(0,ge.Z)(function*(n,e,t){const r=He(n),i=[],a=[];for(const c of e){let p;const _=r.ea.get(c);if(_&&0!==_.length){p=yield zl(r.localStore,lo(_[0]));for(const E of _){const A=r.ta.get(E),S=yield QI(r,A);S.snapshot&&a.push(S.snapshot)}}else{const E=yield iS(r.localStore,c);p=yield zl(r.localStore,E),yield hy(r,jg(E),c,!1)}i.push(p)}return r.Zu.Ko(a),i}),Qw.apply(this,arguments)}function jg(n){return D_(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function AS(n){const e=He(n);return He(He(e.localStore).persistence).Os()}function SS(n,e,t,r){return yy.apply(this,arguments)}function yy(){return yy=(0,ge.Z)(function*(n,e,t,r){const i=He(n);if(i.ca)return void ke("SyncEngine","Ignoring unexpected query state notification.");const a=i.ea.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield H_(i.localStore,F0(a[0])),p=mg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Pa(i,c,p);break}case"rejected":yield Sd(i.localStore,e,!0),Na(i,e,r);break;default:st()}}),yy.apply(this,arguments)}function Nd(n,e,t){return vy.apply(this,arguments)}function vy(){return vy=(0,ge.Z)(function*(n,e,t){const r=qg(n);if(r.ca){for(const i of e){if(r.ea.has(i)){ke("SyncEngine","Adding an already active target "+i);continue}const a=yield iS(r.localStore,i),c=yield zl(r.localStore,a);yield hy(r,jg(a),c.targetId,!1),gf(r.remoteStore,c)}for(const i of t)r.ea.has(i)&&(yield Sd(r.localStore,i,!1).then(()=>{X_(r.remoteStore,i),Na(r,i)}).catch(Td))}}),vy.apply(this,arguments)}function qg(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ES.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CS.bind(null,e),e.Zu.Ko=Fw.bind(null,e.eventManager),e.Zu.la=yS.bind(null,e.eventManager),e}function $g(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OR.bind(null,e),e}class wy{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.M=ff(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return mI(this.persistence,new lf,e.initialUser,this.M)}_a(e){return new bI(W_.Wi,this.M)}da(e){return new df}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ey extends wy{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield $g(r.ga.syncEngine),yield mf(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return mI(this.persistence,new lf,e.initialUser,this.M)}wa(e){return new JA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=fo(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Yr.withCacheSize(this.cacheSizeBytes):Yr.DEFAULT;return new Ad(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,AI(),hf(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new df}}class eT extends Ey{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof TI&&(r.sharedClientState.syncEngine={kr:FR.bind(null,i),Mr:SS.bind(null,i),Or:Nd.bind(null,i),Os:AS.bind(null,i),Nr:TS.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var a=(0,ge.Z)(function*(c){yield function LR(n,e){return XI.apply(this,arguments)}(r.ga.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}da(e){const t=AI();if(!TI.vt(t))throw new Me(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=fo(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new TI(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Cy{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>$w(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=IS.bind(null,r.syncEngine),yield ay(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new LI}createDatastore(e){const t=ff(e.databaseInfo.databaseId),r=new dS(e.databaseInfo);return new SI(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=p=>$w(this.syncEngine,p,0),c=Y_.vt()?new Y_:new lS,new xI(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,p,_,E){const A=new WI(r,i,a,c,p,_);return E&&(A.ca=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=He(t);ke("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield pf(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function MS(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Jw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class UR{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new si,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const a=yield e.ba(i);return new Uw(JSON.parse(a),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ge.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class VR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ge.Z)(function*(a,c){const p=He(a),_=Xh(p.M)+"/documents",E={documents:c.map(V=>Du(p.M,V))},A=yield p.co("BatchGetDocuments",_,E),S=new Map;A.forEach(V=>{const G=function jb(n,e){return"found"in e?function(t,r){xt(!!r.found);const i=Sa(t,r.found.name),a=Wr(r.found.updateTime),c=new Xi({mapValue:{fields:r.found.fields}});return $n.newFoundDocument(i,a,c)}(n,e):"missing"in e?function(t,r){xt(!!r.missing),xt(!!r.readTime);const i=Sa(t,r.missing),a=Wr(r.readTime);return $n.newNoDocument(i,a)}(n,e):st()}(p.M,V);S.set(G.key.toString(),G)});const P=[];return c.forEach(V=>{const G=S.get(V.toString());xt(!!G),P.push(G)}),P}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new zh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Be.fromPath(i);e.mutations.push(new k_(a,e.precondition(a)))}),yield(r=(0,ge.Z)(function*(i,a){const c=He(i),p=Xh(c.M)+"/documents",_={writes:a.map(E=>yg(c.M,E))};yield c.ro("Commit",p,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Nr.updateTime(t):Nr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new Me(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nr.updateTime(t)}return Nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class BR{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new Q_(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ge.Z)(function*(){const t=new VR(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ca(a)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!wu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Cd(t)}return!1}}class jR{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=mi.UNAUTHENTICATED,this.clientId=gb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ge.Z)(function*(p){ke("FirestoreClient","Received user=",p.uid),yield a.authCredentialListener(p),a.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ke("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=xd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function RS(n,e){return by.apply(this,arguments)}function by(){return by=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ge.Z)(function*(a){r.isEqual(a)||(yield _I(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),by.apply(this,arguments)}function tT(n,e){return Xw.apply(this,arguments)}function Xw(){return Xw=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield eE(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>oy(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>oy(e.remoteStore,a)),n.onlineComponents=e}),Xw.apply(this,arguments)}function eE(n){return tE.apply(this,arguments)}function tE(){return tE=(0,ge.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield RS(n,new wy)),n.offlineComponents}),tE.apply(this,arguments)}function Zg(n){return Iy.apply(this,arguments)}function Iy(){return Iy=(0,ge.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield tT(n,new Cy)),n.onlineComponents}),Iy.apply(this,arguments)}function nE(n){return eE(n).then(e=>e.persistence)}function rE(n){return eE(n).then(e=>e.localStore)}function nT(n){return Zg(n).then(e=>e.remoteStore)}function Ty(n){return Zg(n).then(e=>e.syncEngine)}function Ru(n){return rT.apply(this,arguments)}function rT(){return rT=(0,ge.Z)(function*(n){const e=yield Zg(n),t=e.eventManager;return t.onListen=vS.bind(null,e.syncEngine),t.onUnlisten=wS.bind(null,e.syncEngine),t}),rT.apply(this,arguments)}function sT(n,e,t={}){const r=new si;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,a,c,p,_){const E=new Jw({next:S=>{a.enqueueAndForget(()=>BI(i,A));const P=S.docs.has(c);!P&&S.fromCache?_.reject(new Me(se.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&p&&"server"===p.source?_.reject(new Me(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),A=new Lw(Da(c.path),E,{includeMetadataChanges:!0,Du:!0});return UI(i,A)}(yield Ru(n),n.asyncQueue,e,t,r)})),r.promise}function oT(n,e,t={}){const r=new si;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,a,c,p,_){const E=new Jw({next:S=>{a.enqueueAndForget(()=>BI(i,A)),S.fromCache&&"server"===p.source?_.reject(new Me(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),A=new Lw(c,E,{includeMetadataChanges:!0,Du:!0});return UI(i,A)}(yield Ru(n),n.asyncQueue,e,t,r)})),r.promise}const aT=new Map;function iE(n,e,t){if(!t)throw new Me(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uT(n,e,t,r){if(!0===e&&!0===r)throw new Me(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lT(n){if(!Be.isDocumentKey(n))throw new Me(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cT(n){if(Be.isDocumentKey(n))throw new Me(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sE(n);throw new Me(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function LS(n,e){if(e<=0)throw new Me(se.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class US{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,uT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ay{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new US({}),this._settingsFrozen=!1,e instanceof ba?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Me(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(i.options.projectId)}(e))}get app(){if(!this._app)throw new Me(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new US(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new rA;switch(t.type){case"gapi":const r=t.client;return xt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new C_(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=aT.get(e);t&&(ke("ComponentProvider","Removing Datastore"),aT.delete(e),t.terminate())}(this),Promise.resolve()}}class zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class es{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new es(this.firestore,e,this._query)}}class Nu extends es{constructor(e,t,r){super(e,t,Da(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new Be(e))}withConverter(e){return new Nu(this.firestore,e,this._path)}}function BS(n,e,...t){if(n=(0,O.m9)(n),iE("collection","path",e),n instanceof Ay){const r=cn.fromString(e,...t);return cT(r),new Nu(n,null,r)}{if(!(n instanceof zn||n instanceof Nu))throw new Me(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return cT(r),new Nu(n.firestore,null,r)}}function o(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=gb.R()),iE("doc","path",e),n instanceof Ay){const r=cn.fromString(e,...t);return lT(r),new zn(n,null,new Be(r))}{if(!(n instanceof zn||n instanceof Nu))throw new Me(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return lT(r),new zn(n.firestore,n instanceof Nu?n.converter:null,new Be(r))}}function u(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof zn||n instanceof Nu)&&(e instanceof zn||e instanceof Nu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function d(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof es&&e instanceof es&&n.firestore===e.firestore&&$h(n._query,e._query)&&n.converter===e.converter}class h{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Q_(this,"async_queue_retry"),this.Ua=()=>{const t=hf();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=hf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=hf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new si;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ge.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!jl(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,ur("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=uy.createAndSchedule(this,e,t,r,a=>this.Qa(a));return this.Oa.push(i),i}qa(){this.Fa&&st()}verifyOperationInProgress(){}ja(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function m(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class v{constructor(){this._progressObserver={},this._taskCompletionResolver=new si,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class b extends Ay{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new h,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||q(this),this._firestoreClient.terminate()}}function k(n){return n._firestoreClient||q(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function q(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new oA(n._databaseId,a,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var a,p;n._firestoreClient=new jR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Fe(n,e,t){const r=new si;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield RS(n,t),yield tT(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===se.FAILED_PRECONDITION||a.code===se.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function Jl(n){if(n._initialized||n._terminated)throw new Me(se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class $o{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new po(Gr.fromBase64String(e))}catch(t){throw new Me(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new po(Gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pu{constructor(e){this._methodName=e}}class yf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}}const oE=/^__.*__$/;class aE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ul(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wh(e,this.data,t,this.fieldTransforms)}}class Sy{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ul(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xy(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class hT{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new hT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return gT(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(xy(this.Ya)&&oE.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class eF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||ff(e)}uc(e,t,r,i=!1){return new hT({Ya:e,methodName:t,oc:r,path:Hr.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Hg(n){const e=n._freezeSettings(),t=ff(n._databaseId);return new eF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fT(n,e,t,r,i,a={}){const c=n.uc(a.merge||a.mergeFields?2:0,e,t,i);ZS("Data must be an object, but it was:",c,r);const p=HR(r,c);let _,E;if(a.merge)_=new kl(c.fieldMask),E=c.fieldTransforms;else if(a.mergeFields){const A=[];for(const S of a.mergeFields){const P=HS(e,S,t);if(!c.contains(P))throw new Me(se.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);WR(A,P)||A.push(P)}_=new kl(A),E=c.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,E=c.fieldTransforms;return new aE(new Xi(p),_,E)}class uE extends Pu{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uE}}function $R(n,e,t){return new hT({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class jS extends Pu{_toFieldTransform(e){return new pg(e.path,new Hh)}isEqual(e){return e instanceof jS}}class tF extends Pu{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=$R(this,e,!0),r=this.ac.map(a=>Gg(a,t)),i=new vd(r);return new pg(e.path,i)}isEqual(e){return this===e}}class nF extends Pu{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=$R(this,e,!0),r=this.ac.map(a=>Gg(a,t)),i=new wd(r);return new pg(e.path,i)}isEqual(e){return this===e}}class rF extends Pu{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Gh(e.M,B0(e.M,this.cc));return new pg(e.path,t)}isEqual(e){return this===e}}function qS(n,e,t,r){const i=n.uc(1,e,t);ZS("Data must be an object, but it was:",i,r);const a=[],c=Xi.empty();kh(r,(_,E)=>{const A=pT(e,_,t);E=(0,O.m9)(E);const S=i.nc(A);if(E instanceof uE)a.push(A);else{const P=Gg(E,S);null!=P&&(a.push(A),c.set(A,P))}});const p=new kl(a);return new Sy(c,p,i.fieldTransforms)}function $S(n,e,t,r,i,a){const c=n.uc(1,e,t),p=[HS(e,r,t)],_=[i];if(a.length%2!=0)throw new Me(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)p.push(HS(e,a[P])),_.push(a[P+1]);const E=[],A=Xi.empty();for(let P=p.length-1;P>=0;--P)if(!WR(E,p[P])){const V=p[P];let G=_[P];G=(0,O.m9)(G);const fe=c.nc(V);if(G instanceof uE)E.push(V);else{const Te=Gg(G,fe);null!=Te&&(E.push(V),A.set(V,Te))}}const S=new kl(E);return new Sy(A,S,c.fieldTransforms)}function ZR(n,e,t,r=!1){return Gg(t,n.uc(r?4:3,e))}function Gg(n,e){if(GR(n=(0,O.m9)(n)))return ZS("Unsupported field value:",e,n),HR(n,e);if(n instanceof Pu)return function(t,r){if(!xy(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let p=Gg(c,r.sc(a));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return B0(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=lr.fromDate(t);return{timestampValue:Bl(r.M,i)}}if(t instanceof lr){const i=new lr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Bl(r.M,i)}}if(t instanceof yf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof po)return{bytesValue:K0(r.M,t._byteString)};if(t instanceof zn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ic(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Y0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${sE(t)}`)}(n,e)}function HR(n,e){const t={};return I_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kh(n,(r,i)=>{const a=Gg(i,e.Za(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function GR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof lr||n instanceof yf||n instanceof po||n instanceof zn||n instanceof Pu)}function ZS(n,e,t){if(!GR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=sE(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function HS(n,e,t){if((e=(0,O.m9)(e))instanceof $o)return e._internalPath;if("string"==typeof e)return pT(n,e);throw gT("Field path arguments must be of type string or ",n,!1,void 0,t)}const iF=new RegExp("[~\\*/\\[\\]]");function pT(n,e,t){if(e.search(iF)>=0)throw gT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $o(...e.split("."))._internalPath}catch(r){throw gT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gT(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(a||c)&&(_+=" (found",a&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Me(se.INVALID_ARGUMENT,p+n+_)}function WR(n,e){return n.some(t=>t.isEqual(e))}class lE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sF extends lE{data(){return super.data()}}function mT(n,e){return"string"==typeof e?pT(n,e):e instanceof $o?e._internalPath:e._delegate._internalPath}class Wg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pd extends lE{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(mT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class cE extends Pd{data(e={}){return super.data(e)}}class vf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new cE(this._firestore,this._userDataWriter,r.key,r,new Wg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new cE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Wg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new cE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Wg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,E=-1;return 0!==c.type&&(_=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),E=a.indexOf(c.doc.key)),{type:oF(c.type),doc:p,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function oF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function zR(n,e){return n instanceof Pd&&e instanceof Pd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof vf&&e instanceof vf&&n._firestore===e._firestore&&d(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function KR(n){if(hg(n)&&0===n.explicitOrderBy.length)throw new Me(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dE{}function wf(n,...e){for(const t of e)n=t._apply(n);return n}class aF extends dE{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=Hg(e.firestore),r=function(i,a,c,p,_,E,A){let S;if(_.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Me(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){t1(A,E);const V=[];for(const G of A)V.push(e1(p,i,G));S={arrayValue:{values:V}}}else S=e1(p,i,A)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||t1(A,E),S=ZR(c,"where",A,"in"===E||"not-in"===E);const P=Mi.create(_,E,S);return function(V,G){if(G.S()){const Te=S_(V);if(null!==Te&&!Te.isEqual(G.field))throw new Me(se.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Te.toString()}' and '${G.field.toString()}'`);const dt=O0(V);null!==dt&&n1(0,G.field,dt)}const fe=function(Te,dt){for(const ze of Te.filters)if(dt.indexOf(ze.op)>=0)return ze.op;return null}(V,function(Te){switch(Te){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==fe)throw new Me(se.INVALID_ARGUMENT,fe===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${fe.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new es(e.firestore,e.converter,function(i,a){const c=i.filters.concat([a]);return new Iu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class lF extends dE{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Me(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new yd(i,a);return function(p,_){if(null===O0(p)){const E=S_(p);null!==E&&n1(0,E,_.field)}}(r,c),c}(e._query,this.hc,this.dc);return new es(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Iu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class YR extends dE{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new es(e.firestore,e.converter,k0(e._query,this._c,this.wc))}}class QR extends dE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=XR(e,this.type,this.mc,this.gc);return new es(e.firestore,e.converter,(i=t,new Iu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class JR extends dE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=XR(e,this.type,this.mc,this.gc);return new es(e.firestore,e.converter,(i=t,new Iu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function XR(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof lE)return function(i,a,c,p,_){if(!p)throw new Me(se.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const E=[];for(const A of Tu(i))if(A.field.isKeyField())E.push(Ll(a,p.key));else{const S=p.data.field(A.field);if(C0(S))throw new Me(se.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=A.field.canonicalString();throw new Me(se.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}E.push(S)}return new bu(E,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Hg(n.firestore);return function(a,c,p,_,E,A){const S=a.explicitOrderBy;if(E.length>S.length)throw new Me(se.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let V=0;V<E.length;V++){const G=E[V];if(S[V].field.isKeyField()){if("string"!=typeof G)throw new Me(se.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof G}`);if(!x_(a)&&-1!==G.indexOf("/"))throw new Me(se.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${G}' contains a slash.`);const fe=a.path.child(cn.fromString(G));if(!Be.isDocumentKey(fe))throw new Me(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${fe}' is not because it contains an odd number of segments.`);const Te=new Be(fe);P.push(Ll(c,Te))}else{const fe=ZR(p,_,G);P.push(fe)}}return new bu(P,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function e1(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Me(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x_(e)&&-1!==t.indexOf("/"))throw new Me(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!Be.isDocumentKey(r))throw new Me(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ll(n,new Be(r))}if(t instanceof zn)return Ll(n,t._key);throw new Me(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sE(t)}.`)}function t1(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(se.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function n1(n,e,t){if(!t.isEqual(e))throw new Me(se.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class GS{convertValue(e,t="none"){switch(Fl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return kh(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new yf(nr(e.latitude),nr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=b0(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Lh(e));default:return null}}convertTimestamp(e){const t=Ca(e);return new lr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);xt(Hb(r));const i=new ba(r.get(1),r.get(3)),a=new Be(r.popFirst(5));return i.isEqual(t)||ur(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function _T(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class _F extends GS{constructor(e){super(),this.firestore=e}convertBytes(e){return new po(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}class r1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hg(e)}set(e,t,r){this._verifyNotCommitted();const i=Ef(e,this._firestore),a=_T(i.converter,t,r),c=fT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Nr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Ef(e,this._firestore);let c;return c="string"==typeof(t=(0,O.m9)(t))||t instanceof $o?$S(this._dataReader,"WriteBatch.update",a._key,t,r,i):qS(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ef(e,this._firestore);return this._mutations=this._mutations.concat(new zh(t._key,Nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ef(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Me(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class zg extends GS{constructor(e){super(),this.firestore=e}convertBytes(e){return new po(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function i1(n,e,t){n=on(n,zn);const r=on(n.firestore,b),i=_T(n.converter,e,t);return My(r,[fT(Hg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Nr.none())])}function s1(n,e,t,...r){n=on(n,zn);const i=on(n.firestore,b),a=Hg(i);let c;return c="string"==typeof(e=(0,O.m9)(e))||e instanceof $o?$S(a,"updateDoc",n._key,e,t,r):qS(a,"updateDoc",n._key,e),My(i,[c.toMutation(n._key,Nr.exists(!0))])}function o1(n,...e){var t,r,i;n=(0,O.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||m(e[c])||(a=e[c],c++);const p={includeMetadataChanges:a.includeMetadataChanges};if(m(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,E,A;if(n instanceof zn)E=on(n.firestore,b),A=Da(n._key.path),_={next:S=>{e[c]&&e[c](WS(E,n,S))},error:e[c+1],complete:e[c+2]};else{const S=on(n,es);E=on(S.firestore,b),A=S._query;const P=new zg(E);_={next:V=>{e[c]&&e[c](new vf(E,P,S,V))},error:e[c+1],complete:e[c+2]},KR(n._query)}return function(S,P,V,G){const fe=new Jw(G),Te=new Lw(P,fe,V);return S.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return UI(yield Ru(S),Te)})),()=>{fe.pa(),S.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return BI(yield Ru(S),Te)}))}}(k(E),A,p,_)}function My(n,e){return function(t,r){const i=new si;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function qo(n,e,t){return jw.apply(this,arguments)}(yield Ty(t),r,i)})),i.promise}(k(n),e)}function WS(n,e,t){const r=t.docs.get(e._key),i=new zg(n);return new Pd(n,i,e._key,r,new Wg(t.hasPendingWrites,t.fromCache),e.converter)}class AF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hg(e)}get(e){const t=Ef(e,this._firestore),r=new _F(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const a=i[0];if(a.isFoundDocument())return new lE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new lE(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=Ef(e,this._firestore),a=_T(i.converter,t,r),c=fT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Ef(e,this._firestore);let c;return c="string"==typeof(t=(0,O.m9)(t))||t instanceof $o?$S(this._dataReader,"Transaction.update",a._key,t,r,i):qS(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Ef(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ef(e,this._firestore),r=new zg(this._firestore);return super.get(e).then(i=>new Pd(this._firestore,r,t._key,i._document,new Wg(!1,!1),t.converter))}}function zS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function u1(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function l1(){if(!function w0(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){dd=Qi.SDK_VERSION,(0,Qi._registerComponent)(new ko.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new b(i,new iA(t.getProvider("auth-internal")),new pb(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Qi.registerVersion)(_0,"3.4.7",n),(0,Qi.registerVersion)(_0,"3.4.7","esm2017")}();class hE{constructor(e){this._delegate=e}static fromBase64String(e){return l1(),new hE(po.fromBase64String(e))}static fromUint8Array(e){return u1(),new hE(po.fromUint8Array(e))}toBase64(){return l1(),this._delegate.toBase64()}toUint8Array(){return u1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function KS(n){return function FF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class LF{enableIndexedDbPersistence(e,t){return function K(n,e){Jl(n=on(n,b));const t=k(n),r=n._freezeSettings(),i=new Cy;return Fe(t,i,new Ey(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function _e(n){Jl(n=on(n,b));const e=k(n),t=n._freezeSettings(),r=new Cy;return Fe(e,r,new eT(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function qe(n){if(n._initialized&&!n._terminated)throw new Me(se.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new si;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!ho.vt())return Promise.resolve();const i=r+"main";yield ho.delete(i)}),function(r){return t.apply(this,arguments)})(fo(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class c1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ba||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&hd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function VS(n,e,t,r={}){var i;const a=(n=on(n,Ay))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&hd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=mi.MOCK_USER;else{c=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Me(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new mi(_)}n._authCredentials=new db(new fd(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function Ee(n){return function iT(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield nE(n),t=yield nT(n);return e.setNetworkEnabled(!0),function(r){const i=He(r);return i.lu.delete(0),Kl(i)}(t)}))}(k(n=on(n,b)))}(this._delegate)}disableNetwork(){return function vt(n){return function Dy(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield nE(n),t=yield nT(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(i){const a=He(i);a.lu.add(0),yield pf(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(k(n=on(n,b)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,uT("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function nt(n){return function(e){const t=new si;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function KI(n,e){return Gw.apply(this,arguments)}(yield Ty(e),t)})),t.promise}(k(n=on(n,b)))}(this._delegate)}onSnapshotsInSync(e){return function DF(n,e){return function qR(n,e){const t=new Jw(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Ru(n),i=t,He(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Ru(n),i=t,void He(r).Tu.delete(i);var r,i}))}}(k(n=on(n,b)),m(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ry(this,BS(this._delegate,e))}catch(t){throw Ss(t,"collection()","Firestore.collection()")}}doc(e){try{return new Oa(this,o(this._delegate,e))}catch(t){throw Ss(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xs(this,function s(n,e){if(n=on(n,Ay),iE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new es(n,null,(t=e,new Iu(cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ss(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function SF(n,e){return function OS(n,e){const t=new si;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const r=yield(i=n,Zg(i).then(a=>a.datastore));var i;new BR(n.asyncQueue,r,e,t).run()})),t.promise}(k(n=on(n,b)),t=>e(new AF(n,t)))}(this._delegate,t=>e(new d1(this,t)))}batch(){return k(this._delegate),new h1(new r1(this._delegate,e=>My(this._delegate,e)))}loadBundle(e){return function gn(n,e){const t=k(n=on(n,b)),r=new v;return function kS(n,e,t,r){const i=function(a,c){let p;return p="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,E){if(_ instanceof Uint8Array)return MS(_,E);if(_ instanceof ArrayBuffer)return MS(new Uint8Array(_),E);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new UR(_,c);var _}(t,ff(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function xS(n,e,t){const r=He(n);var i;(i=(0,ge.Z)(function*(a,c,p){try{const _=yield c.getMetadata();if(yield function(P,V){const G=He(P),fe=Wr(V.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",Te=>G.ds.getBundleMetadata(Te,V.id)).then(Te=>!!Te&&Te.createTime.compareTo(fe)>=0)}(a.localStore,_))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(P=_).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);p._updateProgress($I(_));const E=new Ds(_,a.localStore,c.M);let A=yield c.fa();for(;A;){const P=yield E.Nu(A);P&&p._updateProgress(P),A=yield c.fa()}const S=yield E.complete();return yield Pa(a,S.Ou,void 0),yield function(P,V){const G=He(P);return G.persistence.runTransaction("Save bundle","readwrite",fe=>G.ds.saveBundleMetadata(fe,V))}(a.localStore,_),p._completeWith(S.progress),Promise.resolve(S.Mu)}catch(_){return hd("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var P}),function(a,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Ty(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function As(n,e){return function FS(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const i=He(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.ds.getNamedQuery(a,r))}(yield rE(n),e)}))}(k(n=on(n,b)),e).then(t=>t?new es(n,null,t.query):null)}(this._delegate,e).then(t=>t?new xs(this,t):null)}}class yT extends GS{constructor(e){super(),this.firestore=e}convertBytes(e){return new hE(new po(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Oa.forKey(t,this.firestore,null)}}class d1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new yT(e)}get(e){const t=Yg(e);return this._delegate.get(t).then(r=>new fE(this._firestore,new Pd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Yg(e);return r?(zS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Yg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Yg(e);return this._delegate.delete(t),this}}class h1{constructor(e){this._delegate=e}set(e,t,r){const i=Yg(e);return r?(zS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Yg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Yg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Kg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new cE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new pE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Kg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Kg(e,new yT(e),t),i.set(t,a)),a}}Kg.INSTANCES=new WeakMap;class Oa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Oa(t,new zn(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new Oa(t,new zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ry(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ry(this.firestore,BS(this._delegate,e))}catch(t){throw Ss(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof zn&&u(this._delegate,e)}set(e,t){t=zS("DocumentReference.set",t);try{return t?i1(this._delegate,e,t):i1(this._delegate,e)}catch(r){throw Ss(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?s1(this._delegate,e):s1(this._delegate,e,t,...r)}catch(i){throw Ss(i,"updateDoc()","DocumentReference.update()")}}delete(){return function IF(n){return My(on(n.firestore,b),[new zh(n._key,Nr.none())])}(this._delegate)}onSnapshot(...e){const t=f1(e),r=p1(e,i=>new fE(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return o1(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function vF(n){n=on(n,zn);const e=on(n.firestore,b),t=k(e),r=new zg(e);return function NS(n,e){const t=new si;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,a,c){try{const p=yield function(_,E){const A=He(_);return A.persistence.runTransaction("read document","readonly",S=>A.ai.Bs(S,E))}(i,a);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Me(se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=xd(p,`Failed to get document '${a} from cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield rE(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Pd(e,r,n._key,i,new Wg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function wF(n){n=on(n,zn);const e=on(n.firestore,b);return sT(k(e),n._key,{source:"server"}).then(t=>WS(e,n,t))}(this._delegate):function yF(n){n=on(n,zn);const e=on(n.firestore,b);return sT(k(e),n._key).then(t=>WS(e,n,t))}(this._delegate),t.then(r=>new fE(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Oa(this.firestore,this._delegate.withConverter(e?Kg.getInstance(this.firestore,e):null))}}function Ss(n,e,t){return n.message=n.message.replace(e,t),n}function f1(n){for(const e of n)if("object"==typeof e&&!KS(e))return e;return{}}function p1(n,e){var t,r;let i;return i=KS(n[0])?n[0]:KS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class fE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Oa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zR(this._delegate,e._delegate)}}class pE extends fE{data(e){const t=this._delegate.data(e);return function DR(n,e){n||st()}(void 0!==t),t}}class xs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yT(e)}where(e,t,r){try{return new xs(this.firestore,wf(this._delegate,function uF(n,e,t){const r=e,i=mT("where",n);return new aF(i,r,t)}(e,t,r)))}catch(i){throw Ss(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new xs(this.firestore,wf(this._delegate,function cF(n,e="asc"){const t=e,r=mT("orderBy",n);return new lF(r,t)}(e,t)))}catch(r){throw Ss(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xs(this.firestore,wf(this._delegate,function dF(n){return LS("limit",n),new YR("limit",n,"F")}(e)))}catch(t){throw Ss(t,"limit()","Query.limit()")}}limitToLast(e){try{return new xs(this.firestore,wf(this._delegate,function hF(n){return LS("limitToLast",n),new YR("limitToLast",n,"L")}(e)))}catch(t){throw Ss(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new xs(this.firestore,wf(this._delegate,function fF(...n){return new QR("startAt",n,!0)}(...e)))}catch(t){throw Ss(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new xs(this.firestore,wf(this._delegate,function pF(...n){return new QR("startAfter",n,!1)}(...e)))}catch(t){throw Ss(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new xs(this.firestore,wf(this._delegate,function gF(...n){return new JR("endBefore",n,!1)}(...e)))}catch(t){throw Ss(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new xs(this.firestore,wf(this._delegate,function mF(...n){return new JR("endAt",n,!0)}(...e)))}catch(t){throw Ss(t,"endAt()","Query.endAt()")}}isEqual(e){return d(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function CF(n){n=on(n,es);const e=on(n.firestore,b),t=k(e),r=new zg(e);return function PS(n,e){const t=new si;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,a,c){try{const p=yield Z_(i,a,!0),_=new HI(a,p.hi),E=_.Gu(p.documents),A=_.applyChanges(E,!1);c.resolve(A.snapshot)}catch(p){const _=xd(p,`Failed to execute query '${a} against cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield rE(n),e,t);var r})),t.promise}(t,n._query).then(i=>new vf(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function bF(n){n=on(n,es);const e=on(n.firestore,b),t=k(e),r=new zg(e);return oT(t,n._query,{source:"server"}).then(i=>new vf(e,r,n,i))}(this._delegate):function EF(n){n=on(n,es);const e=on(n.firestore,b),t=k(e),r=new zg(e);return KR(n._query),oT(t,n._query).then(i=>new vf(e,r,n,i))}(this._delegate),t.then(r=>new YS(this.firestore,new vf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=f1(e),r=p1(e,i=>new YS(this.firestore,new vf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return o1(this._delegate,t,r)}withConverter(e){return new xs(this.firestore,this._delegate.withConverter(e?Kg.getInstance(this.firestore,e):null))}}class VF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new pE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class YS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new pE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new VF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new pE(this._firestore,r))})}isEqual(e){return zR(this._delegate,e._delegate)}}class Ry extends xs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Oa(this.firestore,e):null}doc(e){try{return new Oa(this.firestore,void 0===e?o(this._delegate):o(this._delegate,e))}catch(t){throw Ss(t,"doc()","CollectionReference.doc()")}}add(e){return function TF(n,e){const t=on(n.firestore,b),r=o(n),i=_T(n.converter,e);return My(t,[fT(Hg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Nr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Oa(this.firestore,t))}isEqual(e){return u(this._delegate,e._delegate)}withConverter(e){return new Ry(this.firestore,this._delegate.withConverter(e?Kg.getInstance(this.firestore,e):null))}}function Yg(n){return on(n,zn)}class QS{constructor(...e){this._delegate=new $o(...e)}static documentId(){return new QS(Hr.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof $o&&this._delegate._internalPath.isEqual(e._internalPath)}}class Qg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function MF(){return new jS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Qg(e)}static delete(){const e=function xF(){return new uE("deleteField")}();return e._methodName="FieldValue.delete",new Qg(e)}static arrayUnion(...e){const t=function RF(...n){return new tF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Qg(t)}static arrayRemove(...e){const t=function NF(...n){return new nF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Qg(t)}static increment(e){const t=function PF(n){return new rF("increment",n)}(e);return t._methodName="FieldValue.increment",new Qg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const BF={Firestore:c1,GeoPoint:yf,Timestamp:lr,Blob:hE,Transaction:d1,WriteBatch:h1,DocumentReference:Oa,DocumentSnapshot:fE,Query:xs,QueryDocumentSnapshot:pE,QuerySnapshot:YS,CollectionReference:Ry,FieldPath:QS,FieldValue:Qg,setLogLevel:function UF(n){!function TR(n){Ol.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function qF(n){(function jF(n,e){n.INTERNAL.registerComponent(new ko.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},BF)))})(n,(e,t)=>new c1(e,t,new LF)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(Dv.Z);var JS=L(6451),vT=L(5363),$F=L(6063);class ZF extends Ys.x{constructor(e=1/0,t=1/0,r=$F.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)p=_;p&&r.splice(0,p+1)}}}var g1=L(3099);function m1(n,e,t){var r,i;let a,c=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,c=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,g1.B)({connector:()=>new ZF(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}function _1(n,e){return(0,Dc.m)(e)?Dn(()=>n,e):Dn(()=>n)}var XS=L(9468);L(5867);const v1=new Map,KF={activated:!1,tokenObservers:[]},YF={initialized:!1,enabled:!1};function Ni(n){return v1.get(n)||KF}function Ou(n,e){v1.set(n,e)}function ET(){return YF}class tL{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function nL(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ms=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function E1(n){if(!Ni(n).activated)throw Ms.create("use-before-activation",{appName:n.name})}function rx(n,e){return ix.apply(this,arguments)}function ix(){return ix=(0,ge.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,a)}catch(S){throw Ms.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==c.status)throw Ms.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(S){throw Ms.create("fetch-parse-error",{originalErrorMessage:S.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Ms.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const E=1e3*Number(_[1]),A=Date.now();return{token:p.attestationToken,expireTimeMillis:A+E,issuedAtTimeMillis:A}}),ix.apply(this,arguments)}function aL(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const gE="firebase-app-check-store";let IT=null;function b1(){return IT||(IT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ms.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(gE,{keyPath:"compositeKey"})}}catch(t){e(Ms.create("storage-open",{originalErrorMessage:t.message}))}}),IT)}function sx(){return sx=(0,ge.Z)(function*(n,e){const r=(yield b1()).transaction(gE,"readwrite"),a=r.objectStore(gE).put({compositeKey:n,value:e});return new Promise((c,p)=>{a.onsuccess=_=>{c()},r.onerror=_=>{var E;p(Ms.create("storage-set",{originalErrorMessage:null===(E=_.target.error)||void 0===E?void 0:E.message}))}})}),sx.apply(this,arguments)}const mE=new wr.Yd("@firebase/app-check");function A1(n,e){return(0,O.hl)()?function dL(n,e){return function I1(n,e){return sx.apply(this,arguments)}(function D1(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{mE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function S1(){return ET().enabled}function x1(){return lx.apply(this,arguments)}function lx(){return lx=(0,ge.Z)(function*(){const n=ET();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),lx.apply(this,arguments)}const _L={error:"UNKNOWN_ERROR"};function yL(n){return O.US.encodeString(JSON.stringify(n),!1)}function TT(n){return cx.apply(this,arguments)}function cx(){return cx=(0,ge.Z)(function*(n,e=!1){const t=n.app;E1(t);const r=Ni(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&DT(_)&&(i=_)}if(!e&&i&&DT(i))return{token:i.token};let p,c=!1;if(S1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=rx(aL(t,yield x1()),n.heartbeatServiceProvider).then(E=>(r.exchangeTokenPromise=void 0,E)),c=!0);const _=yield r.exchangeTokenPromise;return yield A1(t,_),Ou(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?mE.warn(_.message):mE.error(_),a=_}return i?(p={token:i.token},Ou(t,Object.assign(Object.assign({},r),{token:i})),yield A1(t,i)):p=wL(a),c&&R1(t,p),p}),cx.apply(this,arguments)}function hx(n,e){const t=Ni(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ou(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function M1(n){const{app:e}=n,t=Ni(e);let r=t.tokenRefresher;r||(r=function vL(n){const{app:e}=n;return new tL((0,ge.Z)(function*(){let r;if(r=Ni(e).token?yield TT(n,!0):yield TT(n),r.error)throw r.error}),()=>!0,()=>{const t=Ni(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ou(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function R1(n,e){const t=Ni(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function DT(n){return n.expireTimeMillis-Date.now()>0}function wL(n){return{token:yL(_L),error:n}}class EL{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ni(this.app);for(const t of e)hx(this.app,t.next);return Promise.resolve()}}const V1="app-check-internal";!function kL(){(0,Qi._registerComponent)(new ko.wA("app-check",n=>function CL(n,e){return new EL(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(V1).initialize()})),(0,Qi._registerComponent)(new ko.wA(V1,n=>function bL(n){return{getToken:e=>TT(n,e),addTokenListener:e=>function dx(n,e,t,r){const{app:i}=n,a=Ni(i),c={next:t,error:r,type:e};if(Ou(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&DT(a.token)){const p=a.token;Promise.resolve().then(()=>{t({token:p.token}),M1(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>M1(n))}(n,"INTERNAL",e),removeTokenListener:e=>hx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Qi.registerVersion)("@firebase/app-check","0.5.5")}();class _E{constructor(){return(0,dn.vb)("app-check")}}"undefined"!=typeof window&&window;const _x=new l.OlP("angularfire2.auth.use-emulator"),yx=new l.OlP("angularfire2.auth.settings"),vx=new l.OlP("angularfire2.auth.tenant-id"),wx=new l.OlP("angularfire2.auth.langugage-code"),Ex=new l.OlP("angularfire2.auth.use-device-language"),Cx=new l.OlP("angularfire.auth.persistence"),bx=(n,e,t,r,i,a,c,p)=>(0,ti.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),c)for(const[E,A]of Object.entries(c))_.settings[E]=A;return p&&_.setPersistence(p),_},[t,r,i,a,c,p]);let yE=(()=>{class n{constructor(t,r,i,a,c,p,_,E,A,S,P,V){const G=new Ys.x,fe=gt(void 0).pipe((0,vT.Q)(c.outsideAngular),Dn(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,1254)))),(0,Dt.U)(()=>(0,ti.on)(t,a,r)),(0,Dt.U)(Te=>bx(Te,a,p,E,A,S,_,P)),m1({bufferSize:1,refCount:!1}));if(Yo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{fe.pipe(da()).subscribe();const dt=fe.pipe(Dn(Ke=>Ke.getRedirectResult().then(Mt=>Mt,()=>null)),dn.iC,m1({bufferSize:1,refCount:!1})),ze=fe.pipe(Dn(Ke=>new tr.y(Mt=>({unsubscribe:a.runOutsideAngular(()=>Ke.onAuthStateChanged(Ft=>Mt.next(Ft),Ft=>Mt.error(Ft),()=>Mt.complete()))})))),ft=fe.pipe(Dn(Ke=>new tr.y(Mt=>({unsubscribe:a.runOutsideAngular(()=>Ke.onIdTokenChanged(Ft=>Mt.next(Ft),Ft=>Mt.error(Ft),()=>Mt.complete()))}))));this.authState=dt.pipe(_1(ze),(0,XS.R)(c.outsideAngular),(0,vT.Q)(c.insideAngular)),this.user=dt.pipe(_1(ft),(0,XS.R)(c.outsideAngular),(0,vT.Q)(c.insideAngular)),this.idToken=this.user.pipe(Dn(Ke=>Ke?(0,hn.D)(Ke.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(Dn(Ke=>Ke?(0,hn.D)(Ke.getIdTokenResult()):gt(null))),this.credential=(0,JS.T)(dt,G,this.authState.pipe(Ai(Ke=>!Ke))).pipe((0,Dt.U)(Ke=>(null==Ke?void 0:Ke.user)?Ke:null),(0,XS.R)(c.outsideAngular),(0,vT.Q)(c.insideAngular))}return(0,ti.pX)(this,fe,a,{spy:{apply:(Te,dt,ze)=>{(Te.startsWith("signIn")||Te.startsWith("createUser"))&&ze.then(ft=>G.next(ft))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ti.Dh),l.LFG(ti.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(dn.HU),l.LFG(_x,8),l.LFG(yx,8),l.LFG(vx,8),l.LFG(wx,8),l.LFG(Ex,8),l.LFG(Cx,8),l.LFG(_E,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jL=(()=>{class n{constructor(){Ch.Z.registerVersion("angularfire",dn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[yE]}),n})();function j1(n,e){return function qL(n,e=Tv.z){return new tr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Ix(n,e){return j1(n,e).pipe((0,Dt.U)(t=>({payload:t,type:"query"})))}function ST(n,e){return Ix(n,e).pipe(li(void 0),$m(),(0,Dt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const _=i.find(A=>A.doc.ref.isEqual(c.ref)),E=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&E&&JSON.stringify(E.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),a}))}function q1(n,e,t){return ST(n,t).pipe(ss((r,i)=>function ZL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function HL(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Tx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Tx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Tx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Zm(),(0,Dt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Tx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function $1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Z1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ST(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Dt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(li(void 0),$m(),Ai(([r,i])=>i.length>0||!r),(0,Dt.U)(([r,i])=>i),dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ss((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$1(e);return q1(this.query,t,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(e={}){return Ix(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),dn.iC)}get(e){return(0,hn.D)(this.query.get(e)).pipe(dn.iC)}add(e){return this.ref.add(e)}doc(e){return new H1(this.ref.doc(e),this.afs)}}class H1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=z1(r,t);return new Z1(i,a,this.afs)}snapshotChanges(){return function $L(n,e){return j1(n,e).pipe(li(void 0),$m(),(0,Dt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,hn.D)(this.ref.get(e)).pipe(dn.iC)}}class GL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ST(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ai(t=>t.length>0),dn.iC):ST(this.query,this.afs.schedulers.outsideAngular).pipe(dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ss((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$1(e);return q1(this.query,t,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(e={}){return Ix(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),dn.iC)}get(e){return(0,hn.D)(this.query.get(e)).pipe(dn.iC)}}const G1=new l.OlP("angularfire2.enableFirestorePersistence"),W1=new l.OlP("angularfire2.firestore.persistenceSettings"),WL=new l.OlP("angularfire2.firestore.settings"),zL=new l.OlP("angularfire2.firestore.use-emulator");function z1(n,e=(t=>t)){return{query:e(n),ref:n}}let xT=(()=>{class n{constructor(t,r,i,a,c,p,_,E,A,S,P,V,G,fe,Te,dt,ze){this.schedulers=_;const ft=(0,ti.on)(t,p,r),Ke=A;S&&bx(ft,p,P,G,fe,Te,V,dt),[this.firestore,this.persistenceEnabled$]=(0,ti.cc)(`${ft.name}.firestore`,"AngularFirestore",ft.name,()=>{const Mt=p.runOutsideAngular(()=>ft.firestore());if(a&&Mt.settings(a),Ke&&Mt.useEmulator(...Ke),i&&!Yo(c)){const Ft=()=>{try{return(0,hn.D)(Mt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(_o){return"undefined"!=typeof console&&console.warn(_o),gt(!1)}};return[Mt,p.runOutsideAngular(Ft)]}return[Mt,gt(!1)]},[a,Ke,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=z1(i,r),p=this.schedulers.ngZone.run(()=>a);return new Z1(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new GL(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new H1(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ti.Dh),l.LFG(ti.xv,8),l.LFG(G1,8),l.LFG(WL,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(dn.HU),l.LFG(W1,8),l.LFG(zL,8),l.LFG(yE,8),l.LFG(_x,8),l.LFG(yx,8),l.LFG(vx,8),l.LFG(wx,8),l.LFG(Ex,8),l.LFG(Cx,8),l.LFG(_E,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),KL=(()=>{class n{constructor(){Ch.Z.registerVersion("angularfire",dn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:G1,useValue:!0},{provide:W1,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[xT]}),n})(),Rs=(()=>{class n{constructor(t,r,i,a){this.firestore=t,this.fireAuth=r,this.router=i,this.ngZone=a,this.fireAuth.authState.subscribe(c=>{c?(this.userState=c,localStorage.setItem("user",JSON.stringify(this.userState)),JSON.parse(localStorage.getItem("user")),this.setTipo(this.userState.uid)):(localStorage.setItem("user",null),JSON.parse(localStorage.getItem("user")))})}login(t,r){return this.fireAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{var a;(null===(a=i.additionalUserInfo)||void 0===a?void 0:a.isNewUser)?this.router.navigate(["datos-usuario"]):this.router.navigate(["home"])}),this.setUserData(i.user)}).catch(i=>{window.alert(i.message)})}registrar(t,r){return this.fireAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.sendVerificationMail(),this.setUserData(i.user)}).catch(i=>{window.alert(i.message)})}sendVerificationMail(){return this.fireAuth.currentUser.then(t=>null==t?void 0:t.sendEmailVerification()).then(()=>{this.router.navigate(["validar-email"])})}forgotPassword(t){return this.fireAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Se envi\xf3 correo para restablecer password")}).catch(r=>{window.alert(r.message)})}get isLoggedIn(){return null!=JSON.parse(localStorage.getItem("user"))}googleAuth(){return this.authLogin(new Ch.Z.auth.GoogleAuthProvider)}authLogin(t){return this.fireAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["home"])}),this.setUserData(r.user),this.setTipo(r.user.uid)}).catch(r=>{window.alert(r.message)})}setTipo(t){this.firestore.collection("datos_usuario").ref.where("id_user","==",t).limit(1).get().then(r=>{r.empty||r.forEach(i=>this.tipo=i.data().tipo_usuario)})}setUserData(t){const r=this.firestore.doc(`users/${t.uid}`),i={uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified};return localStorage.setItem("user",JSON.stringify(i)),r.set(i,{merge:!0})}getUserData(){return JSON.parse(localStorage.getItem("user"))}logout(){return this.fireAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["home"])})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(xT),l.LFG(yE),l.LFG(vr),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MT=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return 1!=this.authService.isLoggedIn&&this.router.navigate(["login"]),!0}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Rs),l.LFG(vr))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RT=(()=>{class n{constructor(t,r,i){this.firestore=t,this.authService=r,this.router=i}agregarDomicilio(t){this.firestore.collection("datos_usuario").add(Object.assign({},t)).then(()=>{this.router.navigate(["confirmar-pedido"])})}obtenerDomicilio(){const t=this.authService.getUserData();return this.firestore.collection("datos_usuario",r=>r.where("id_user","==",t.uid).limit(1)).get()}existeDomicilio(){const t=this.authService.getUserData();return this.firestore.collection("datos_usuario").ref.where("id_user","==",t.uid).limit(1).get()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(xT),l.LFG(Rs),l.LFG(vr))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YL=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.usuarioService=i}canActivate(t,r){return 1==this.authService.isLoggedIn&&this.usuarioService.existeDomicilio().then(i=>{0!=i.empty&&this.router.navigate(["datos-usuario"])}),!0}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Rs),l.LFG(vr),l.LFG(RT))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Dx=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return 1==this.authService.isLoggedIn&&this.router.navigate(["home"]),!0}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Rs),l.LFG(vr))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QL=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-acerca-de"]],decls:21,vars:0,consts:[[1,"text-center","mt-2"],[1,"text-center","display-4","mb-2",2,"font-size","24px"],[1,"text-center","mb-0",2,"font-size","24px"],[2,"background","rgba(0,0,0,.2)"],[1,"text-center","mt-0",2,"font-size","24px","margin-top","6px!important"],[1,"text-center",2,"font-size","24px"],[1,"text-center","w-50","mx-auto",2,"font-size","24px"]],template:function(t,r){1&t&&(l.TgZ(0,"h2",0),l._uU(1,"Acerca de"),l.qZA(),l._UZ(2,"br"),l.TgZ(3,"p",1),l._uU(4,"Desarrollador por:"),l.qZA(),l.TgZ(5,"p",2),l.TgZ(6,"mark",3),l._uU(7,"Lim\xf3n P\xe9rez Alan"),l.qZA(),l.qZA(),l.TgZ(8,"p",4),l.TgZ(9,"mark",3),l._uU(10,"Raymundo Garc\xeda Jos\xe9 Abraham"),l.qZA(),l.qZA(),l.TgZ(11,"p",5),l.TgZ(12,"strong"),l._uU(13,"Grupo:"),l.qZA(),l._uU(14," DS01SV-21"),l.qZA(),l.TgZ(15,"p",5),l.TgZ(16,"strong"),l._uU(17,"Carrera:"),l.qZA(),l._uU(18," Desarrollo y Gesti\xf3n de Software"),l.qZA(),l.TgZ(19,"p",6),l._uU(20,"Aplicaci\xf3n web desarrollada para la acreditaci\xf3n del tercer parcial en la asignatura de Desarrollo Web Profesional"),l.qZA())},styles:[""]}),n})();class vE{}class Cf{}let Ny=(()=>{class n{constructor(t,r,i){this.firestore=t,this.authService=r,this.router=i,this.producto=new Cf}createProducto(t){return this.firestore.collection("productos").add(Object.assign({},t))}getProductos(){return this.firestore.collection("productos").snapshotChanges()}updateProducto(t){return this.firestore.doc("productos/"+t.id).update(t)}deleteProducto(t){this.firestore.doc("productos/"+t).delete()}getProductosCarrito(){const t=this.authService.getUserData();return this.firestore.collection("carrito",r=>r.where("id_usuario","==",t.uid)).snapshotChanges()}getProducto(t){return this.firestore.collection("productos").doc(t).get()}removerProducto(t){this.firestore.doc("/carrito/"+t).delete()}agregarPedido(){const t=this.authService.getUserData();this.firestore.collection("carrito",r=>r.where("id_usuario","==",t.uid)).get().subscribe(r=>{r.forEach(i=>{i.ref.delete()})}),this.router.navigate(["confirmacion"])}mandarLogin(){this.router.navigate(["login"])}getCategorias(){return this.firestore.collection("categorias").snapshotChanges()}agregarCategoria(t){this.firestore.collection("categorias").add(Object.assign({},t))}actualizarCategoria(t){this.firestore.doc("categorias/"+t.id).update(t)}eliminarCategoria(t){this.firestore.collection("categorias").doc(t).delete()}verProducto(t){this.producto=t,localStorage.setItem("producto",JSON.stringify(t)),this.router.navigate(["ver-producto"])}agregarCarrito(t){console.log("agregando carro: "+t.id),this.firestore.collection("carrito").add(Object.assign({},t)),this.router.navigate(["carrito"])}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(xT),l.LFG(Rs),l.LFG(vr))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),K1=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),Jg=(()=>{class n extends K1{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Xl=new l.OlP("NgValueAccessor"),eU={provide:Xl,useExisting:(0,l.Gpc)(()=>Xg),multi:!0},nU=new l.OlP("CompositionEventMode");let Xg=(()=>{class n extends K1{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function tU(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(nU,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&l.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[l._Bn([eU]),l.qOj]}),n})();function bf(n){return null==n||0===n.length}const ps=new l.OlP("NgValidators"),If=new l.OlP("NgAsyncValidators");function wE(n){return null}function oN(n){return null!=n}function aN(n){const e=(0,l.QGY)(n)?(0,hn.D)(n):n;return(0,l.CqO)(e),e}function uN(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function lN(n,e){return e.map(t=>t(n))}function cN(n){return n.map(e=>function iU(n){return!n.validate}(e)?e:t=>e.validate(t))}function Ax(n){return null!=n?function dN(n){if(!n)return null;const e=n.filter(oN);return 0==e.length?null:function(t){return uN(lN(t,e))}}(cN(n)):null}function Sx(n){return null!=n?function hN(n){if(!n)return null;const e=n.filter(oN);return 0==e.length?null:function(t){return function JL(...n){const e=(0,Bn.jO)(n),{args:t,keys:r}=Xa(n),i=new tr.y(a=>{const{length:c}=t;if(!c)return void a.complete();const p=new Array(c);let _=c,E=c;for(let A=0;A<c;A++){let S=!1;(0,ar.Xf)(t[A]).subscribe(new Pn.Q(a,P=>{S||(S=!0,E--),p[A]=P},()=>_--,void 0,()=>{(!_||!S)&&(E||a.next(r?Qs(r,p):p),a.complete())}))}});return e?i.pipe(ol(e)):i}(lN(t,e).map(aN)).pipe((0,Dt.U)(uN))}}(cN(n)):null}function fN(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function xx(n){return n?Array.isArray(n)?n:[n]:[]}function NT(n,e){return Array.isArray(n)?n.includes(e):n===e}function mN(n,e){const t=xx(e);return xx(n).forEach(i=>{NT(t,i)||t.push(i)}),t}function _N(n,e){return xx(e).filter(t=>!NT(n,t))}class yN{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ax(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Sx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Tf extends yN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ns extends yN{get formDirective(){return null}get path(){return null}}class vN{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let EE=(()=>{class n extends vN{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Tf,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[l.qOj]}),n})(),CE=(()=>{class n extends vN{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ns,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[l.qOj]}),n})();function bE(n,e){Nx(n,e),e.valueAccessor.writeValue(n.value),function hU(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&EN(n,e)})}(n,e),function pU(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function fU(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&EN(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function dU(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function FT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Nx(n,e){const t=function pN(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(fN(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function gN(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(fN(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();FT(e._rawValidators,i),FT(e._rawAsyncValidators,i)}function EN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function UT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const IE="VALID",VT="INVALID",Py="PENDING",TE="DISABLED";function Fx(n){return(Ux(n)?n.validators:n)||null}function IN(n){return Array.isArray(n)?Ax(n):n||null}function Lx(n,e){return(Ux(e)?e.asyncValidators:n)||null}function TN(n){return Array.isArray(n)?Sx(n):n||null}function Ux(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Vx=n=>n instanceof jx;function AN(n){return(n=>n instanceof MN)(n)?n.value:n.getRawValue()}function SN(n,e){const t=Vx(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new l.vHH(1e3,"");if(!r[e])throw new l.vHH(1001,"")}function xN(n,e){Vx(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new l.vHH(1002,"")})}class Bx{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=IN(this._rawValidators),this._composedAsyncValidatorFn=TN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===IE}get invalid(){return this.status===VT}get pending(){return this.status==Py}get disabled(){return this.status===TE}get enabled(){return this.status!==TE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=IN(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=TN(e)}addValidators(e){this.setValidators(mN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_N(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_N(e,this._rawAsyncValidators))}hasValidator(e){return NT(this._rawValidators,e)}hasAsyncValidator(e){return NT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Py,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=TE,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=IE,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===IE||this.status===Py)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?TE:IE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Py,this._hasOwnPendingAsyncValidator=!0;const t=aN(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function yU(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Vx(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof wU)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?TE:this.errors?VT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Py)?Py:this._anyControlsHaveStatus(VT)?VT:IE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ux(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class MN extends Bx{constructor(e=null,t,r){super(Fx(t),Lx(r,t)),this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){UT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){UT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class jx extends Bx{constructor(e,t,r){super(Fx(t),Lx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){xN(this,e),Object.keys(e).forEach(r=>{SN(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=AN(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class wU extends Bx{constructor(e,t,r){super(Fx(t),Lx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){xN(this,e),e.forEach((r,i)=>{SN(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>AN(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const EU={provide:Ns,useExisting:(0,l.Gpc)(()=>em)},DE=(()=>Promise.resolve(null))();let em=(()=>{class n extends Ns{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new l.vpe,this.form=new jx({},Ax(t),Sx(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){DE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),bE(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){DE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),UT(this._directives,t)})}addFormGroup(t){DE.then(()=>{const r=this._findContainer(t.path),i=new jx({});(function CN(n,e){Nx(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){DE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){DE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function bN(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ps,10),l.Y36(If,10))},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&l.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([EU]),l.qOj]}),n})();const bU={provide:Tf,useExisting:(0,l.Gpc)(()=>Oy)},PN=(()=>Promise.resolve(null))();let Oy=(()=>{class n extends Tf{constructor(t,r,i,a){super(),this.control=new MN,this._registered=!1,this.update=new l.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Ox(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Xg?t=a:function _U(n){return Object.getPrototypeOf(n.constructor)===Jg}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function Px(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function OT(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){bE(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){PN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;PN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ns,9),l.Y36(ps,10),l.Y36(If,10),l.Y36(Xl,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([bU]),l.qOj,l.TTD]}),n})(),AE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const IU={provide:Xl,useExisting:(0,l.Gpc)(()=>SE),multi:!0};let SE=(()=>{class n extends Jg{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&l.NdJ("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[l._Bn([IU]),l.qOj]}),n})(),ON=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const PU={provide:Xl,useExisting:(0,l.Gpc)(()=>BT),multi:!0};function jN(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let BT=(()=>{class n extends Jg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=this._getOptionId(t);null==r&&this.setProperty("selectedIndex",-1);const i=jN(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function OU(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&l.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[l._Bn([PU]),l.qOj]}),n})(),qN=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(jN(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(BT,9))},n.\u0275dir=l.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const kU={provide:Xl,useExisting:(0,l.Gpc)(()=>Hx),multi:!0};function $N(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Hx=(()=>{class n extends Jg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,c)=>{a._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const c=a;for(let p=0;p<c.length;p++){const E=this._getOptionValue(c[p].value);i.push(E)}}else{const c=r.options;for(let p=0;p<c.length;p++){const _=c[p];if(_.selected){const E=this._getOptionValue(_.value);i.push(E)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function FU(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&l.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[l._Bn([kU]),l.qOj]}),n})(),ZN=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue($N(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue($N(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(Hx,9))},n.\u0275dir=l.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();let xE=(()=>{class n{constructor(){this._validator=wE}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):wE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,features:[l.TTD]}),n})();const UU={provide:ps,useExisting:(0,l.Gpc)(()=>Gx),multi:!0};let Gx=(()=>{class n extends xE{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function GN(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>function J1(n){return e=>{if(bf(e.value)||bf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&l.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[l._Bn([UU]),l.qOj]}),n})();const VU={provide:ps,useExisting:(0,l.Gpc)(()=>tm),multi:!0};let tm=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function eN(n){return bf(n.value)?{required:!0}:null}(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&l.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[l._Bn([VU])]}),n})(),HU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[ON]]}),n})(),GU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[HU]}),n})();function WU(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td",13),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().selectCategoria(a)}),l._uU(2),l.qZA(),l.TgZ(3,"td",13),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().selectCategoria(a)}),l._uU(4),l.qZA(),l.TgZ(5,"td"),l.TgZ(6,"button",14),l.NdJ("click",function(){return l.CHM(t),l.oxw().actualizarCategoria()}),l._uU(7,"Modificar"),l.qZA(),l.TgZ(8,"button",15),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().eliminarCategoria(a.id)}),l._uU(9,"Eliminar"),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=e.$implicit;l.oxw();const r=l.MAs(7);l.xp6(2),l.Oqu(t.id),l.xp6(2),l.Oqu(t.nombre),l.xp6(2),l.Q6J("disabled",!r.form.valid)}}let zU=(()=>{class n{constructor(t){this.productoService=t,this.categoria=new vE,this.categorias=[]}ngOnInit(){this.productoService.getCategorias().subscribe(t=>{this.categorias=t.map(r=>Object.assign(Object.assign({},r.payload.doc.data()),{id:r.payload.doc.id}))})}selectCategoria(t){this.categoria=t}agregarCategoria(){this.productoService.agregarCategoria(this.categoria),this.categoria=new vE}eliminarCategoria(t){this.productoService.eliminarCategoria(t),this.categoria=new vE}actualizarCategoria(){this.productoService.actualizarCategoria(this.categoria),this.categoria=new vE,this.categoria.nombre=""}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ny))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-agregar-categorias"]],decls:26,vars:3,consts:[[1,"container"],[1,"row"],[1,"ms-2","card","text-white","p-0","mt-2","col-sm-12","col-md-6","col-lg-6","col-xl-3"],[1,"card-header","text-center","h5",2,"background","salmon"],[1,"card-body","bg-light","text-dark"],["cats","ngForm"],["for","nombre",1,"form-label"],["type","text","id","nombre","required","","name","nombre",1,"form-control",3,"ngModel","ngModelChange"],["nombre","ngModel"],["id","agregar","type","button",1,"col-12","mx-auto","mt-2","btn","fw-bold",3,"disabled","click"],[1,"col"],[1,"table","table-hover","table-bordered","mt-2"],[4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click"],["id","agregar",1,"me-2","mx-auto","btn","fw-bold",3,"disabled","click"],[1,"btn","btn-danger","fw-bold",3,"click"]],template:function(t,r){if(1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l._uU(4,"AGREGAR CATEGOR\xcdA"),l.qZA(),l.TgZ(5,"div",4),l.TgZ(6,"form",null,5),l.TgZ(8,"label",6),l._uU(9,"Nombre:"),l.qZA(),l.TgZ(10,"input",7,8),l.NdJ("ngModelChange",function(a){return r.categoria.nombre=a}),l.qZA(),l.TgZ(12,"button",9),l.NdJ("click",function(){return r.agregarCategoria()}),l._uU(13,"Agregar"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(14,"div",10),l.TgZ(15,"table",11),l.TgZ(16,"thead"),l.TgZ(17,"tr"),l.TgZ(18,"th"),l._uU(19,"ID"),l.qZA(),l.TgZ(20,"th"),l._uU(21,"Categor\xeda"),l.qZA(),l.TgZ(22,"th"),l._uU(23,"Opciones"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(24,"tbody"),l.YNc(25,WU,10,3,"tr",12),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const i=l.MAs(7);l.xp6(10),l.Q6J("ngModel",r.categoria.nombre),l.xp6(2),l.Q6J("disabled",!i.form.valid),l.xp6(13),l.Q6J("ngForOf",r.categorias)}},directives:[AE,CE,em,Xg,tm,EE,Oy,Xn],styles:[".ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #A94442}"]}),n})();function KU(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"div",5),l.TgZ(2,"div",6),l.TgZ(3,"div",7),l._UZ(4,"img",8),l.qZA(),l.TgZ(5,"div",9),l.TgZ(6,"div",10),l.TgZ(7,"h5",11),l._uU(8),l.qZA(),l.TgZ(9,"p",12),l._uU(10),l.qZA(),l.TgZ(11,"p",12),l.TgZ(12,"strong"),l._uU(13,"Cantidad:"),l.qZA(),l._uU(14),l.qZA(),l.TgZ(15,"div",13),l.TgZ(16,"div",14),l.TgZ(17,"p",15),l._uU(18,"Total: "),l.TgZ(19,"strong"),l._uU(20),l.qZA(),l.qZA(),l.qZA(),l.TgZ(21,"div",16),l.TgZ(22,"button",17),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().removerProducto(a.id)}),l._uU(23,"Remover"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l._UZ(24,"hr",2),l.qZA()}if(2&n){const t=e.$implicit,r=l.oxw();l.xp6(4),l.s9C("src",r.getProducto(t.id_producto).url_img,l.LSH),l.xp6(4),l.Oqu(r.getProducto(t.id_producto).nombre),l.xp6(2),l.Oqu(r.getProducto(t.id_producto).descripcion),l.xp6(4),l.hij(" ",t.cantidad,""),l.xp6(6),l.hij("$",t.cantidad*r.getProducto(t.id_producto).precio,"")}}function YU(n,e){if(1&n&&(l.TgZ(0,"div"),l.TgZ(1,"div",18),l.TgZ(2,"div",14),l.TgZ(3,"p",19),l._uU(4,"Total"),l.qZA(),l.qZA(),l.TgZ(5,"div",14),l.TgZ(6,"p",20),l.TgZ(7,"strong"),l._uU(8),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l._UZ(9,"hr",2),l.TgZ(10,"div",21),l.TgZ(11,"button",22),l._uU(12,"PAGAR"),l.qZA(),l.qZA(),l.TgZ(13,"div",21),l.TgZ(14,"button",23),l._uU(15,"CONTINUAR COMPRANDO"),l.qZA(),l.qZA(),l.qZA()),2&n){const t=l.oxw();l.xp6(8),l.hij("$",t.getTotal(),"")}}function QU(n,e){1&n&&(l.TgZ(0,"div"),l.TgZ(1,"p",24),l._uU(2,"Actualmente no tienes productos agregados a tu carrito de compras"),l.qZA(),l.TgZ(3,"p",25),l._uU(4,"Para continuar, agrega productos a tu carrito de compras"),l.qZA(),l.TgZ(5,"div",21),l.TgZ(6,"button",23),l._uU(7,"CONTINUAR COMPRANDO"),l.qZA(),l.qZA(),l.qZA())}function JU(n,e){1&n&&(l.TgZ(0,"div"),l.TgZ(1,"p",24),l._uU(2,"Aqu\xed aparecer\xe1n todos los productos agregados a tu carrito de compras"),l.qZA(),l.TgZ(3,"p",25),l._uU(4,"Para continuar, debes iniciar sesi\xf3n"),l.qZA(),l.TgZ(5,"div",21),l.TgZ(6,"button",26),l._uU(7,"INICIAR SESI\xd3N"),l.qZA(),l.qZA(),l.qZA())}let XU=(()=>{class n{constructor(t,r){this.authService=t,this.productoService=r,this.carritos=[],this.productos=[],this.carritoProductos=[]}ngOnInit(){1==this.authService.isLoggedIn&&(this.productoService.getProductosCarrito().subscribe(t=>{this.carritos=t.map(r=>Object.assign(Object.assign({},r.payload.doc.data()),{id:r.payload.doc.id}))}),this.productoService.getProductos().subscribe(t=>{this.productos=t.map(r=>Object.assign(Object.assign({},r.payload.doc.data()),{id:r.payload.doc.id}))}))}removerProducto(t){this.productoService.removerProducto(t)}getTotal(){var t=0;return this.carritos.forEach(r=>{t+=this.getProducto(r.id_producto).precio*r.cantidad}),t}getProducto(t){var r=this.productos.find(i=>i.id==t);return null!=r||((r=new Cf).id="",r.descripcion="",r.nombre="",r.precio=0,r.tamano=0,r.tipo="",r.url_img="assets/images/dummy.png"),r}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Rs),l.Y36(Ny))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-carrito"]],decls:8,vars:4,consts:[[1,"container-fluid"],[1,"text-center","mt-2"],[1,"mx-auto","dropdown-divider",2,"max-width","700px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card","mb-3","mx-auto","border-0",2,"max-width","540px"],[1,"row","g-0"],[1,"col-md-4"],["alt","...",1,"img-fluid","rounded-start",3,"src"],[1,"col-md-8"],[1,"card-body"],[1,"card-title"],[1,"card-text","mb-2"],[1,"row"],[1,"col-6"],[1,"card-text","h5"],[1,"col-6","d-flex","justify-content-end"],["id","remover",1,"btn","fw-bold",3,"click"],[1,"row","col-6","mx-auto"],[1,"mt-2","text-start",2,"font-size","22px"],[1,"mt-2","text-end",2,"font-size","22px"],[1,"d-grid","gap-2","col-3","mx-auto","mt-3","mb-3"],["id","pagar","routerLink","/confirmar-pedido",1,"btn"],["id","cc","routerLink","/productos",1,"btn","btn-dark","fw-bold"],[1,"text-center","fw-bold","mb-0",2,"font-size","18px"],[1,"text-center","lead",2,"font-size","20px"],["id","cc","routerLink","/login",1,"btn","btn-dark","fw-bold"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"h3",1),l._uU(2,"Carrito de compras"),l.qZA(),l._UZ(3,"hr",2),l.YNc(4,KU,25,5,"div",3),l.YNc(5,YU,16,1,"div",4),l.YNc(6,QU,8,0,"div",4),l.YNc(7,JU,8,0,"div",4),l.qZA()),2&t&&(l.xp6(4),l.Q6J("ngForOf",r.carritos),l.xp6(1),l.Q6J("ngIf",0!=r.carritos.length),l.xp6(1),l.Q6J("ngIf",0==r.carritos.length&&r.authService.userState),l.xp6(1),l.Q6J("ngIf",!r.authService.userState))},directives:[Xn,Ur,y],styles:[""]}),n})(),eV=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-confirmacion"]],decls:14,vars:0,consts:[[1,"text-center","container"],[1,"bi","bi-check2-circle",2,"font-size","150px","color","#000000"],[1,"row"],[1,"col-lg-6","col-md-8","mx-auto"],[1,"text-center","lead"],[1,"justify-content-center"],[1,"d-grid","gap-2"],["routerLink","/home","id","home",1,"btn","col-12","mt-3"]],template:function(t,r){1&t&&(l.TgZ(0,"section",0),l._UZ(1,"i",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"h2"),l._uU(5,"\xa1Gracias por su pedido!"),l.qZA(),l.TgZ(6,"p",4),l._uU(7,"Tu pedido fue confirmado y nuestro equipo estar\xe1 trabajando para realizarlo."),l.qZA(),l.qZA(),l.qZA(),l.TgZ(8,"div",2),l.TgZ(9,"div",3),l.TgZ(10,"div",5),l.TgZ(11,"div",6),l.TgZ(12,"button",7),l._uU(13,"Volver a la p\xe1gina principal"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA())},directives:[y],styles:[""]}),n})();class Wx{constructor(){this.nombre="",this.apellidos="",this.calle="",this.no_int="",this.no_ext="",this.colonia="",this.cp="",this.ciudad="",this.estado="",this.telefono=""}}function tV(n,e){if(1&n&&(l.TgZ(0,"li",14),l._UZ(1,"img",15),l.TgZ(2,"h5",16),l._uU(3),l.qZA(),l.TgZ(4,"p",17),l.TgZ(5,"strong"),l._uU(6,"Tama\xf1o: "),l.qZA(),l._uU(7),l.qZA(),l.TgZ(8,"p",18),l.TgZ(9,"strong"),l._uU(10,"Cantidad:"),l.qZA(),l._uU(11),l.TgZ(12,"strong"),l._uU(13),l.qZA(),l.qZA(),l.qZA()),2&n){const t=e.$implicit,r=l.oxw();l.xp6(1),l.s9C("src",r.getProducto(t.id_producto).url_img,l.LSH),l.xp6(2),l.Oqu(r.getProducto(t.id_producto).nombre),l.xp6(4),l.Oqu(r.tamanos[r.getProducto(t.id_producto).tamano].nombre),l.xp6(4),l.hij(" ",t.cantidad," | Total: "),l.xp6(2),l.hij("$",t.cantidad*r.getProducto(t.id_producto).precio,"")}}function nV(n,e){if(1&n&&(l.TgZ(0,"li",14),l.TgZ(1,"p",19),l._uU(2,"Total: "),l.TgZ(3,"strong"),l._uU(4),l.qZA(),l.qZA(),l.qZA()),2&n){const t=l.oxw();l.xp6(4),l.hij("$",t.getTotal(),"")}}let rV=(()=>{class n{constructor(t,r){this.productoService=t,this.usuarioService=r,this.carritos=[],this.productos=[],this.tamanos=[],this.usuario=new Wx,this.tamanos=[{id:0,nombre:"Chico"},{id:1,nombre:"Grande"}]}ngOnInit(){this.productoService.getProductosCarrito().subscribe(t=>{this.carritos=t.map(r=>Object.assign(Object.assign({},r.payload.doc.data()),{id:r.payload.doc.id}))}),this.productoService.getProductos().subscribe(t=>{this.productos=t.map(r=>Object.assign(Object.assign({},r.payload.doc.data()),{id:r.payload.doc.id}))}),this.obtenerDomicilio()}getTotal(){var t=0;return this.carritos.forEach(r=>{t+=this.getProducto(r.id_producto).precio*r.cantidad}),t}getProducto(t){var r=this.productos.find(i=>i.id==t);return null!=r?r:new Cf}obtenerDomicilio(){this.usuarioService.obtenerDomicilio().subscribe(t=>{0==t.empty&&(this.usuario=t.docs[0].data())})}agregarPedido(){this.productoService.agregarPedido()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ny),l.Y36(RT))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-confirmar-pedido"]],decls:41,vars:11,consts:[[1,"container"],[1,"text-center","mt-3"],[1,"row","py-lg-3"],[1,"col-sm-8"],[1,"col-12","text-left"],[1,"lead"],[1,"mx-auto","dropdown-divider"],[1,"col-sm-4"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],["class","list-group-item",4,"ngIf"],[1,"justify-content-center","mt-2"],[1,"d-grid","gap-2"],["type","button","id","confirmar-pedido",1,"btn","col-12",3,"click"],[1,"list-group-item"],["alt","...",1,"img-fluid","rounded-start","g-0",2,"width","50px","height","50px","float","left","margin-right","10px",3,"src"],[1,"card-title","small","mb-0"],[1,"mb-0","small"],[1,"card-text","mb-2","small"],[1,"text-end","mb-0"]],template:function(t,r){1&t&&(l.TgZ(0,"section",0),l.TgZ(1,"h2",1),l._uU(2,"Confirmaci\xf3n de pedido"),l.qZA(),l.TgZ(3,"div",2),l.TgZ(4,"div",3),l.TgZ(5,"h4"),l._uU(6,"Informaci\xf3n de env\xedo"),l.qZA(),l.TgZ(7,"div",4),l.TgZ(8,"p",5),l._uU(9),l._UZ(10,"br"),l._uU(11),l._UZ(12,"br"),l._uU(13),l._UZ(14,"br"),l._uU(15),l._UZ(16,"br"),l._uU(17),l._UZ(18,"br"),l._uU(19),l._UZ(20,"br"),l._uU(21),l._UZ(22,"br"),l._uU(23),l._UZ(24,"br"),l._uU(25),l._UZ(26,"br"),l.qZA(),l._UZ(27,"hr",6),l.TgZ(28,"p",5),l._uU(29," Forma de pago: En efectivo "),l.qZA(),l._UZ(30,"hr",6),l.qZA(),l.qZA(),l.TgZ(31,"div",7),l.TgZ(32,"h4"),l._uU(33,"Productos"),l.qZA(),l.TgZ(34,"ul",8),l.YNc(35,tV,14,5,"li",9),l.YNc(36,nV,5,1,"li",10),l.qZA(),l.TgZ(37,"div",11),l.TgZ(38,"div",12),l.TgZ(39,"button",13),l.NdJ("click",function(){return r.agregarPedido()}),l._uU(40,"Confirmar pedido"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(9),l.hij(" Nombre: ",r.usuario.nombre+" "+r.usuario.apellidos,""),l.xp6(2),l.hij(" Calle: ",r.usuario.calle,""),l.xp6(2),l.hij(" N\xfamero exterior: ",r.usuario.no_ext,""),l.xp6(2),l.hij(" N\xfamero interior: ",r.usuario.no_int,""),l.xp6(2),l.hij(" Colonia: ",r.usuario.colonia,""),l.xp6(2),l.hij(" C\xf3digo postal: ",r.usuario.cp,""),l.xp6(2),l.hij(" Ciudad: ",r.usuario.ciudad,""),l.xp6(2),l.hij(" Estado: ",r.usuario.estado,""),l.xp6(2),l.hij(" Tel\xe9fono: ",r.usuario.telefono,""),l.xp6(10),l.Q6J("ngForOf",r.carritos),l.xp6(1),l.Q6J("ngIf",0!=r.carritos.length))},directives:[Xn,Ur],styles:[""]}),n})(),iV=(()=>{class n{constructor(t,r){this.usuarioService=t,this.authService=r,this.usuario=new Wx,this.enviado=!1}ngOnInit(){}agregarDomicilio(){const t=this.authService.getUserData();this.usuario.id_user=t.uid,this.usuario.tipo_usuario="usuario",this.usuarioService.agregarDomicilio(this.usuario),this.usuario=new Wx,this.enviado=!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(RT),l.Y36(Rs))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-datos-usuario"]],decls:84,vars:21,consts:[[1,"container","mt-4"],[3,"hidden"],[1,"row","col-lg-4","mx-auto","mb-5"],["datos","ngForm"],[1,"text-center"],[2,"border","1px solid rgb(180, 180, 180)"],[1,"row","mt-3"],[1,"mt-3","col-12"],["for","nombre",1,"form-label"],["type","text","required","","name","nombre",1,"form-control",3,"ngModel","ngModelChange"],["nombre","ngModel"],[1,"alert","alert-danger","mt-3","mb-0",3,"hidden"],[1,"col-12","mt-3"],["for","paterno",1,"form-label"],["type","text","required","","name","apellidos",1,"form-control",3,"ngModel","ngModelChange"],["apellidos","ngModel"],["for","direccion",1,"form-label"],["type","text","required","","name","calle",1,"form-control",3,"ngModel","ngModelChange"],["calle","ngModel"],[1,"mt-3","col-6"],["for","numcasa",1,"form-label"],["type","text","required","","name","no_ext",1,"form-control",3,"ngModel","ngModelChange"],["no_ext","ngModel"],[1,"col-6","mt-3"],["type","text","name","no_int",1,"form-control",3,"ngModel","ngModelChange"],["no_int","ngModel"],[1,"col-12"],["for","cp",1,"form-label"],["type","text","required","","name","colonia",1,"form-control",3,"ngModel","ngModelChange"],["colonia","ngModel"],["type","number","required","","name","cp",1,"form-control",3,"ngModel","ngModelChange"],["cp","ngModel"],["for","ciudad",1,"form-label"],["type","text","required","","name","ciudad",1,"form-control",3,"ngModel","ngModelChange"],["ciudad","ngModel"],["for","estado",1,"form-label"],["type","text","required","","name","estado",1,"form-control",3,"ngModel","ngModelChange"],["estado","ngModel"],["for","telefono",1,"form-label"],["type","text","required","","name","telefono",1,"form-control",3,"ngModel","ngModelChange"],["telefono","ngModel"],[1,"d-grid","gap-2","col-6","mx-auto","mt-3","mb-3"],["id","continuar",1,"btn",3,"disabled","click"]],template:function(t,r){if(1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"form",2,3),l.TgZ(4,"h4",4),l._uU(5,"Agrega un domicilio para continuar"),l.qZA(),l.TgZ(6,"div",5),l.TgZ(7,"div",6),l.TgZ(8,"div",7),l.TgZ(9,"label",8),l._uU(10,"Nombre:"),l.qZA(),l.TgZ(11,"input",9,10),l.NdJ("ngModelChange",function(a){return r.usuario.nombre=a}),l.qZA(),l.TgZ(13,"div",11),l._uU(14," El nombre es obligatorio "),l.qZA(),l.qZA(),l.TgZ(15,"div",12),l.TgZ(16,"label",13),l._uU(17,"Apellidos:"),l.qZA(),l.TgZ(18,"input",14,15),l.NdJ("ngModelChange",function(a){return r.usuario.apellidos=a}),l.qZA(),l.TgZ(20,"div",11),l._uU(21," Los apellidos son obligatorios "),l.qZA(),l.qZA(),l.TgZ(22,"div",7),l.TgZ(23,"label",16),l._uU(24,"Calle:"),l.qZA(),l.TgZ(25,"input",17,18),l.NdJ("ngModelChange",function(a){return r.usuario.calle=a}),l.qZA(),l.TgZ(27,"div",11),l._uU(28," La calle es obligatoria "),l.qZA(),l.qZA(),l.TgZ(29,"div",19),l.TgZ(30,"label",20),l._uU(31,"N\xfamero exterior:"),l.qZA(),l.TgZ(32,"input",21,22),l.NdJ("ngModelChange",function(a){return r.usuario.no_ext=a}),l.qZA(),l.qZA(),l.TgZ(34,"div",23),l.TgZ(35,"label",20),l._uU(36,"N\xfamero interior:"),l.qZA(),l.TgZ(37,"input",24,25),l.NdJ("ngModelChange",function(a){return r.usuario.no_int=a}),l.qZA(),l.qZA(),l.TgZ(39,"div",26),l.TgZ(40,"div",11),l._uU(41," El n\xfamero exterior es obligatorio "),l.qZA(),l.qZA(),l.TgZ(42,"div",12),l.TgZ(43,"label",27),l._uU(44,"Colonia:"),l.qZA(),l.TgZ(45,"input",28,29),l.NdJ("ngModelChange",function(a){return r.usuario.colonia=a}),l.qZA(),l.TgZ(47,"div",11),l._uU(48," La colonia es obligatoria "),l.qZA(),l.qZA(),l.TgZ(49,"div",23),l.TgZ(50,"label",27),l._uU(51,"CP:"),l.qZA(),l.TgZ(52,"input",30,31),l.NdJ("ngModelChange",function(a){return r.usuario.cp=a}),l.qZA(),l.qZA(),l._UZ(54,"div",23),l.TgZ(55,"div",26),l.TgZ(56,"div",11),l._uU(57," El c\xf3digo postal es obligatorio "),l.qZA(),l.qZA(),l.TgZ(58,"div",23),l.TgZ(59,"label",32),l._uU(60,"Ciudad:"),l.qZA(),l.TgZ(61,"input",33,34),l.NdJ("ngModelChange",function(a){return r.usuario.ciudad=a}),l.qZA(),l.qZA(),l.TgZ(63,"div",23),l.TgZ(64,"label",35),l._uU(65,"Estado:"),l.qZA(),l.TgZ(66,"input",36,37),l.NdJ("ngModelChange",function(a){return r.usuario.estado=a}),l.qZA(),l.qZA(),l.TgZ(68,"div",26),l.TgZ(69,"div",11),l._uU(70," La ciudad es obligatoria "),l.qZA(),l.qZA(),l.TgZ(71,"div",26),l.TgZ(72,"div",11),l._uU(73," El estado es obligatorio "),l.qZA(),l.qZA(),l.TgZ(74,"div",12),l.TgZ(75,"label",38),l._uU(76,"Tel\xe9fono:"),l.qZA(),l.TgZ(77,"input",39,40),l.NdJ("ngModelChange",function(a){return r.usuario.telefono=a}),l.qZA(),l.TgZ(79,"div",11),l._uU(80," El tel\xe9fono es obligatorio "),l.qZA(),l.qZA(),l.TgZ(81,"div",41),l.TgZ(82,"button",42),l.NdJ("click",function(){return r.agregarDomicilio()}),l._uU(83,"Continuar"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const i=l.MAs(3),a=l.MAs(12),c=l.MAs(19),p=l.MAs(26),_=l.MAs(33),E=l.MAs(46),A=l.MAs(53),S=l.MAs(62),P=l.MAs(67),V=l.MAs(78);l.xp6(1),l.Q6J("hidden",r.enviado),l.xp6(10),l.Q6J("ngModel",r.usuario.nombre),l.xp6(2),l.Q6J("hidden",a.valid||a.pristine),l.xp6(5),l.Q6J("ngModel",r.usuario.apellidos),l.xp6(2),l.Q6J("hidden",c.valid||c.pristine),l.xp6(5),l.Q6J("ngModel",r.usuario.calle),l.xp6(2),l.Q6J("hidden",p.valid||p.pristine),l.xp6(5),l.Q6J("ngModel",r.usuario.no_ext),l.xp6(5),l.Q6J("ngModel",r.usuario.no_int),l.xp6(3),l.Q6J("hidden",_.valid||_.pristine),l.xp6(5),l.Q6J("ngModel",r.usuario.colonia),l.xp6(2),l.Q6J("hidden",E.valid||E.pristine),l.xp6(5),l.Q6J("ngModel",r.usuario.cp),l.xp6(4),l.Q6J("hidden",A.valid||A.pristine),l.xp6(5),l.Q6J("ngModel",r.usuario.ciudad),l.xp6(5),l.Q6J("ngModel",r.usuario.estado),l.xp6(3),l.Q6J("hidden",S.valid||S.pristine),l.xp6(3),l.Q6J("hidden",P.valid||P.pristine),l.xp6(5),l.Q6J("ngModel",r.usuario.telefono),l.xp6(2),l.Q6J("hidden",V.valid||V.pristine),l.xp6(3),l.Q6J("disabled",!i.form.valid)}},directives:[AE,CE,em,Xg,tm,EE,Oy,SE],styles:[".ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #A94442}"]}),n})(),sV=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Rs))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-forgot-password"]],decls:14,vars:0,consts:[[1,"container","mt-5"],[1,"row","col-lg-4","mx-auto"],[1,"mb-4",2,"border","1px solid rgb(180, 180, 180)"],[1,"text-center","mt-2",2,"line-height","30px"],[2,"background","rgba(0,0,0,.1)"],[1,"mt-3"],["for","correo",1,"form-label"],["type","email","required","",1,"form-control"],["passwordResetEmail",""],[1,"d-grid","gap-2","col-8","mx-auto","mt-3","mb-3"],["id","restablecer","type","submit",1,"btn",3,"click"]],template:function(t,r){if(1&t){const i=l.EpF();l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"p",3),l.TgZ(4,"mark",4),l._uU(5,"Para restablecer tu contrase\xf1a, por favor ingresar tu correo electr\xf3nico"),l.qZA(),l.qZA(),l.TgZ(6,"div",5),l.TgZ(7,"label",6),l._uU(8,"Correo electr\xf3nico:"),l.qZA(),l._UZ(9,"input",7,8),l.qZA(),l.TgZ(11,"div",9),l.TgZ(12,"button",10),l.NdJ("click",function(){l.CHM(i);const c=l.MAs(10);return r.authService.forgotPassword(c.value)}),l._uU(13,"Restablecer contrase\xf1a"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}},styles:[""]}),n})(),oV=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Rs))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-home"]],decls:22,vars:0,consts:[[1,"container"],[1,"row"],[1,"col"],[1,"display-1","text-center","mt-5"],[1,"mt-3","lead",2,"text-align","justify !important"],["id","menu",1,"row","mt-5","mb-5"],[1,"col-3"],[1,"col-sm-12","col-lg-3","text-center"],["src","assets/images/pasteles.jpg","width","150","height","150",1,"rounded-circle","mb-2"],[1,"text-center","display-1",2,"font-size","30px"],[1,"text-center","lead"],["src","assets/images/postres.jpg","width","150","height","150",1,"rounded-circle","mb-2"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"h1",3),l._uU(4,"Procake"),l.qZA(),l.TgZ(5,"p",4),l._uU(6,"Como pasteler\xeda, deseamos proporcionar a nuestros clientes productos de reposter\xeda de primera calidad, los cuales permitan sentir c\xe1lido servicio y sabor familiar. Todo esto con la finalidad de ser una empresa lider, distingui\xe9ndonos por el sabor de nuestra reposter\xeda, as\xed como la variedad de productos, brindando as\xed, la mejor calidad al mejor precio. "),l.qZA(),l.qZA(),l.TgZ(7,"div"),l.TgZ(8,"div",5),l._UZ(9,"div",6),l.TgZ(10,"div",7),l._UZ(11,"img",8),l.TgZ(12,"h2",9),l._uU(13,"Pasteles"),l.qZA(),l.TgZ(14,"p",10),l._uU(15,"Los pasteles son especiales... cada cumplea\xf1os, cada celebraci\xf3n termina con algo dulce, y que mejor un delicioso pastel para disfrutar en un momento importante y de felicidad"),l.qZA(),l.qZA(),l.TgZ(16,"div",7),l._UZ(17,"img",11),l.TgZ(18,"h3",9),l._uU(19,"Postres"),l.qZA(),l.TgZ(20,"p",10),l._uU(21,"Los postres alegran la vida y aportan energ\xeda, adem\xe1s las personas necesitan glucosa para la salud."),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA())},styles:[""]}),n})(),aV=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Rs))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login"]],decls:30,vars:0,consts:[[1,"container","mt-5"],[1,"row","col-lg-4","mx-auto"],[2,"border","1px solid rgb(180, 180, 180)"],[1,"mt-3"],["for","usuario",1,"form-label"],["type","text","required","",1,"form-control"],["userName",""],["for","password",1,"form-label"],["type","password","required","",1,"form-control"],["userPassword",""],[1,"d-grid","gap-2","col-6","mx-auto","mt-3","mb-2"],["id","login","type","submit",1,"btn",3,"click"],[1,"text-center"],["href","#","routerLink","/forgot-password",1,"text-center",2,"text-decoration","none"],[1,"d-grid","gap-2","col-10","mx-auto","mt-2","mb-3"],["id","google",1,"btn","btn-dark","text-light","fw-bold",3,"click"],["src","assets/images/google.png","width","15","height","15",2,"margin-bottom","4px","margin-right","10px"],[1,"row","col-lg-4","mt-2","mx-auto"],[2,"text-align","center"],["href","#","routerLink","/registrarse",2,"text-decoration","none"]],template:function(t,r){if(1&t){const i=l.EpF();l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"label",4),l._uU(5,"Correo electr\xf3nico:"),l.qZA(),l._UZ(6,"input",5,6),l.qZA(),l.TgZ(8,"div",3),l.TgZ(9,"label",7),l._uU(10,"Contrase\xf1a:"),l.qZA(),l._UZ(11,"input",8,9),l.qZA(),l.TgZ(13,"div",10),l.TgZ(14,"button",11),l.NdJ("click",function(){l.CHM(i);const c=l.MAs(7),p=l.MAs(12);return r.authService.login(c.value,p.value)}),l._uU(15,"Iniciar sesi\xf3n"),l.qZA(),l.qZA(),l.TgZ(16,"p",12),l.TgZ(17,"a",13),l._uU(18,"\xbfOlvidaste tu contrase\xf1a?"),l.qZA(),l.qZA(),l.TgZ(19,"div",14),l.TgZ(20,"button",15),l.NdJ("click",function(){return r.authService.googleAuth()}),l._UZ(21,"img",16),l._uU(22,"Continuar con Google"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(23,"div",17),l.TgZ(24,"div"),l.TgZ(25,"p",18),l._uU(26,"\xbfEres nuevo aqu\xed? "),l._UZ(27,"br"),l.TgZ(28,"a",19),l._uU(29,"Registrarse"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}},directives:[f],styles:[""]}),n})();function uV(n,e){if(1&n&&(l.TgZ(0,"option",24),l._uU(1),l.qZA()),2&n){const t=e.$implicit;l.s9C("value",t.id),l.xp6(1),l.Oqu(t.nombre)}}function lV(n,e){if(1&n&&(l.TgZ(0,"option",24),l._uU(1),l.qZA()),2&n){const t=e.$implicit;l.s9C("value",t.id),l.xp6(1),l.Oqu(t.nombre)}}function cV(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td",25),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().selectProducto(a)}),l._uU(2),l.qZA(),l.TgZ(3,"td",25),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().selectProducto(a)}),l._UZ(4,"img",26),l.qZA(),l.TgZ(5,"td",25),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().selectProducto(a)}),l._uU(6),l.qZA(),l.TgZ(7,"td",25),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().selectProducto(a)}),l._uU(8),l.qZA(),l.TgZ(9,"td",25),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().selectProducto(a)}),l._uU(10),l.qZA(),l.TgZ(11,"td",25),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().selectProducto(a)}),l._uU(12),l.qZA(),l.TgZ(13,"td"),l.TgZ(14,"button",27),l.NdJ("click",function(){return l.CHM(t),l.oxw().updateProducto()}),l._uU(15," Modificar "),l.qZA(),l.TgZ(16,"button",28),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().deleteProducto(a.id)}),l._uU(17," X "),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=e.$implicit,r=l.oxw();l.xp6(2),l.Oqu(t.nombre),l.xp6(2),l.Q6J("src",t.url_img,l.LSH),l.xp6(2),l.Oqu(r.tamanos[t.tamano].nombre),l.xp6(2),l.Oqu(r.getTipo(t.tipo)),l.xp6(2),l.Oqu(t.descripcion),l.xp6(2),l.hij("$",t.precio,"")}}let dV=(()=>{class n{constructor(t){this.ProductoService=t,this.productos=[],this.producto=new Cf,this.tamanos=[],this.categoria=new vE,this.categorias=[],this.tamanos=[{id:0,nombre:"Chico"},{id:1,nombre:"Grande"}]}ngOnInit(){this.ProductoService.getProductos().subscribe(t=>{this.productos=t.map(r=>Object.assign(Object.assign({},r.payload.doc.data()),{id:r.payload.doc.id}))}),this.ProductoService.getCategorias().subscribe(t=>{this.categorias=t.map(r=>Object.assign(Object.assign({},r.payload.doc.data()),{id:r.payload.doc.id})),console.log(this.categorias)})}agregarProducto(){this.ProductoService.createProducto(this.producto),this.producto=new Cf}selectProducto(t){this.producto=t}updateProducto(){this.ProductoService.updateProducto(this.producto),this.producto=new Cf}deleteProducto(t){this.ProductoService.deleteProducto(t),this.producto=new Cf}getTipo(t){var r=this.categorias.find(i=>i.id==t);return null!=r?r.nombre:"-"}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ny))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-productos"]],decls:63,vars:10,consts:[[1,"container"],[1,"row"],[1,"ms-2","card","text-white","p-0","mt-2","col-sm-12","col-md-6","col-lg-6","col-xl-3"],[1,"card-header","text-center","h5",2,"background","salmon"],[1,"card-body","bg-light","text-dark"],["addProducto","ngForm"],["type","text","required","","name","nombre",1,"form-control",3,"ngModel","ngModelChange"],["nombre","ngModel"],["type","url","required","","name","url_img",1,"form-control",3,"ngModel","ngModelChange"],["url_img","ngModel"],["required","","name","tamano",1,"form-control",3,"ngModel","ngModelChange"],["tamano","ngModel"],[3,"value",4,"ngFor","ngForOf"],["required","","name","tipo",1,"form-control",3,"ngModel","ngModelChange"],["tipo","ngModel"],["type","text","required","","name","descripcion",1,"form-control",3,"ngModel","ngModelChange"],["descripcion","ngModel"],["type","number","required","","name","precio",1,"form-control",3,"ngModel","ngModelChange"],["precio","ngModel"],[1,"text-center"],["type","button","id","agregar",1,"btn",3,"disabled","click"],[1,"col","text-center"],[1,"table","table-hover","table-bordered","mt-2"],[4,"ngFor","ngForOf"],[3,"value"],[2,"cursor","pointer",3,"click"],["width","100",3,"src"],["type","button","id","modificar",1,"btn","mt-lg-2",3,"click"],["type","button",1,"btn","btn-dark","mt-lg-2","fw-bold",3,"click"]],template:function(t,r){if(1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l._uU(4,"AGREGAR PRODUCTO"),l.qZA(),l.TgZ(5,"div",4),l.TgZ(6,"form",null,5),l.TgZ(8,"p"),l.TgZ(9,"label"),l._uU(10,"Nombre:"),l.qZA(),l.TgZ(11,"input",6,7),l.NdJ("ngModelChange",function(a){return r.producto.nombre=a}),l.qZA(),l.qZA(),l.TgZ(13,"p"),l.TgZ(14,"label"),l._uU(15,"URL Imagen:"),l.qZA(),l.TgZ(16,"input",8,9),l.NdJ("ngModelChange",function(a){return r.producto.url_img=a}),l.qZA(),l.qZA(),l.TgZ(18,"p"),l.TgZ(19,"label"),l._uU(20,"Tama\xf1o:"),l.qZA(),l.TgZ(21,"select",10,11),l.NdJ("ngModelChange",function(a){return r.producto.tamano=a}),l.YNc(23,uV,2,2,"option",12),l.qZA(),l.qZA(),l.TgZ(24,"p"),l.TgZ(25,"label"),l._uU(26,"Tipo:"),l.qZA(),l.TgZ(27,"select",13,14),l.NdJ("ngModelChange",function(a){return r.producto.tipo=a}),l.YNc(29,lV,2,2,"option",12),l.qZA(),l.qZA(),l.TgZ(30,"p"),l.TgZ(31,"label"),l._uU(32,"Descripcion:"),l.qZA(),l.TgZ(33,"input",15,16),l.NdJ("ngModelChange",function(a){return r.producto.descripcion=a}),l.qZA(),l.qZA(),l.TgZ(35,"p"),l.TgZ(36,"label"),l._uU(37,"Precio:"),l.qZA(),l.TgZ(38,"input",17,18),l.NdJ("ngModelChange",function(a){return r.producto.precio=a}),l.qZA(),l.qZA(),l.TgZ(40,"div",19),l.TgZ(41,"button",20),l.NdJ("click",function(){return r.agregarProducto()}),l._uU(42," Agregar producto "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(43,"div",21),l.TgZ(44,"table",22),l.TgZ(45,"thead"),l.TgZ(46,"tr"),l.TgZ(47,"th"),l._uU(48,"Nombre"),l.qZA(),l.TgZ(49,"th"),l._uU(50,"Imagen"),l.qZA(),l.TgZ(51,"th"),l._uU(52,"Tama\xf1o"),l.qZA(),l.TgZ(53,"th"),l._uU(54,"Tipo"),l.qZA(),l.TgZ(55,"th"),l._uU(56,"Descripci\xf3n"),l.qZA(),l.TgZ(57,"th"),l._uU(58,"Precio"),l.qZA(),l.TgZ(59,"th"),l._uU(60,"Opciones"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(61,"tbody"),l.YNc(62,cV,18,6,"tr",23),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const i=l.MAs(7);l.xp6(11),l.Q6J("ngModel",r.producto.nombre),l.xp6(5),l.Q6J("ngModel",r.producto.url_img),l.xp6(5),l.Q6J("ngModel",r.producto.tamano),l.xp6(2),l.Q6J("ngForOf",r.tamanos),l.xp6(4),l.Q6J("ngModel",r.producto.tipo),l.xp6(2),l.Q6J("ngForOf",r.categorias),l.xp6(4),l.Q6J("ngModel",r.producto.descripcion),l.xp6(5),l.Q6J("ngModel",r.producto.precio),l.xp6(3),l.Q6J("disabled",!i.form.valid),l.xp6(21),l.Q6J("ngForOf",r.productos)}},directives:[AE,CE,em,Xg,tm,EE,Oy,BT,Xn,qN,ZN,SE],styles:[".ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #A94442}"]}),n})();function hV(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div"),l._UZ(1,"hr",3),l.TgZ(2,"div",4),l.TgZ(3,"div",5),l.TgZ(4,"div",6),l._UZ(5,"img",7),l.qZA(),l.TgZ(6,"div",8),l.TgZ(7,"div",9),l.TgZ(8,"h4",10),l._uU(9),l.qZA(),l.TgZ(10,"p",11),l._uU(11),l.qZA(),l.TgZ(12,"h5",12),l._uU(13),l.qZA(),l.TgZ(14,"div",13),l.TgZ(15,"div",14),l.TgZ(16,"button",15),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().verProducto(a)}),l._uU(17,"Ver producto"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=e.$implicit;l.xp6(5),l.s9C("src",t.url_img,l.LSH),l.xp6(4),l.Oqu(t.nombre),l.xp6(2),l.Oqu(t.descripcion),l.xp6(2),l.hij("$",t.precio,"")}}let fV=(()=>{class n{constructor(t){this.ProductoService=t,this.productos=[],this.producto=new Cf}ngOnInit(){this.ProductoService.getProductos().subscribe(t=>{this.productos=t.map(r=>Object.assign(Object.assign({},r.payload.doc.data()),{id:r.payload.doc.id}))})}verProducto(t){this.ProductoService.verProducto(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ny))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-productos2"]],decls:5,vars:1,consts:[[1,"container"],[1,"text-center","mt-2"],[4,"ngFor","ngForOf"],[1,"mx-auto","dropdown-divider",2,"max-width","700px"],[1,"card","mb-3","mx-auto","border-0",2,"max-width","600px"],[1,"row","g-0"],[1,"col-md-4"],["alt","...",1,"img-fluid","rounded-start",3,"src"],[1,"col-md-8"],[1,"card-body"],[1,"card-title"],[1,"card-text","mb-2","lead"],[1,"card-text","mb-2"],[1,"row"],[1,"col-12","d-flex","justify-content-start"],["id","pedido",1,"btn","mt-2",3,"click"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"h3",1),l._uU(2,"Productos"),l.qZA(),l.YNc(3,hV,18,4,"div",2),l._UZ(4,"hr",3),l.qZA()),2&t&&(l.xp6(3),l.Q6J("ngForOf",r.productos))},directives:[Xn],styles:[""]}),n})(),pV=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Rs))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-registro"]],decls:16,vars:0,consts:[[1,"container","mt-5"],[1,"row","col-lg-4","mx-auto"],[1,"mb-4",2,"border","1px solid rgb(180, 180, 180)"],[1,"mt-3"],["for","correo",1,"form-label"],["type","email","required","",1,"form-control"],["userEmail",""],["for","password",1,"form-label"],["type","password","required","",1,"form-control"],["userPassword",""],[1,"d-grid","gap-2","col-6","mx-auto","mt-3","mb-3"],["id","registrarse","type","submit",1,"btn",3,"click"]],template:function(t,r){if(1&t){const i=l.EpF();l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"label",4),l._uU(5,"Correo electr\xf3nico:"),l.qZA(),l._UZ(6,"input",5,6),l.qZA(),l.TgZ(8,"div",3),l.TgZ(9,"label",7),l._uU(10,"Contrase\xf1a:"),l.qZA(),l._UZ(11,"input",8,9),l.qZA(),l.TgZ(13,"div",10),l.TgZ(14,"button",11),l.NdJ("click",function(){l.CHM(i);const c=l.MAs(7),p=l.MAs(12);return r.authService.registrar(c.value,p.value)}),l._uU(15,"Registrarse"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}},styles:[""]}),n})();function gV(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",2),l.TgZ(1,"div",3),l.TgZ(2,"p",4),l.TgZ(3,"span",5),l._uU(4,"\xa1Registro exitoso!"),l.qZA(),l._UZ(5,"br"),l.TgZ(6,"mark",6),l._uU(7," Se ha enviado un correo de verificaci\xf3n a "),l.TgZ(8,"strong"),l._uU(9),l.qZA(),l._uU(10,". Revisa en tu bandeja de entrada o spam"),l.qZA(),l.qZA(),l.TgZ(11,"div",7),l.TgZ(12,"button",8),l.NdJ("click",function(){return l.CHM(t),l.oxw().authService.sendVerificationMail()}),l._uU(13,"Reenviar correo de verificaci\xf3n"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=e.ngIf;l.xp6(9),l.Oqu(t.email)}}let mV=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Rs))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-validar-email"]],decls:2,vars:1,consts:[[1,"container","mt-5"],["class","row col-lg-4 mx-auto",4,"ngIf"],[1,"row","col-lg-4","mx-auto"],[1,"mb-4",2,"border","1px solid rgb(180, 180, 180)"],[1,"text-center","mt-3",2,"line-height","30px"],[1,"fw-bold",2,"font-size","20px"],[2,"background","rgba(0,0,0,.1)"],[1,"d-grid","gap-2","col-12","mx-auto","mt-3","mb-3"],["id","restablecer",1,"btn",3,"click"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.YNc(1,gV,14,1,"div",1),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngIf",r.authService.userState))},directives:[Ur],styles:[""]}),n})();class _V{constructor(){this.cantidad=1}}const yV=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:oV},{path:"agregarProductos",component:dV,canActivate:[MT]},{path:"login",component:aV,canActivate:[Dx]},{path:"registrarse",component:pV,canActivate:[Dx]},{path:"forgot-password",component:sV,canActivate:[Dx]},{path:"validar-email",component:mV},{path:"datos-usuario",component:iV,canActivate:[MT]},{path:"carrito",component:XU},{path:"confirmar-pedido",component:rV,canActivate:[YL,MT]},{path:"confirmacion",component:eV},{path:"ver-producto",component:(()=>{class n{constructor(t,r){this.productoService=t,this.authService=r,this.carrito=new _V,this.categorias=[],this.tamanos=[],this.tamanos=[{id:0,nombre:"Chico"},{id:1,nombre:"Grande"}]}ngOnInit(){const t=JSON.parse(localStorage.getItem("producto"));this.productoService.producto=t,this.productoService.getCategorias().subscribe(r=>{this.categorias=r.map(i=>Object.assign(Object.assign({},i.payload.doc.data()),{id:i.payload.doc.id})),console.log(this.categorias)})}agregarCarrito(t,r){if(1==this.authService.isLoggedIn){const i=this.authService.getUserData();this.carrito.id_usuario=i.uid,this.carrito.id_producto=t,this.productoService.agregarCarrito(r)}else this.productoService.mandarLogin()}getTipo(t){var r=this.categorias.find(i=>i.id==t);return null!=r?r.nombre:"-"}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ny),l.Y36(Rs))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-ver-producto"]],decls:35,vars:9,consts:[[1,"container","mt-5"],[1,"card","mb-3","mx-auto","border-0",2,"max-width","700px"],[1,"row","g-0","d-flex","align-items-center"],[1,"col-md-4"],["alt","...",1,"img-fluid","rounded-start",3,"src"],[1,"col-md-8"],[1,"card-body"],["carr","ngForm"],[1,"card-title"],[1,"card-text","mb-2","lead"],[1,"card-text","mb-0"],[1,"card-text","mb-2"],[1,"row"],[1,"col-8"],[2,"font-weight","bold"],["type","datetime-local","required","","name","fec_solicitud",1,"form-control",3,"ngModel","ngModelChange"],["fec_solicitud","ngModel"],[1,"col-4"],["type","number","min","1","value","1","required","","name","cantidad",1,"form-control",3,"ngModel","ngModelChange"],["cantidad","ngModel"],["type","button","id","pedido",1,"btn","col-12","mt-3",3,"disabled","click"]],template:function(t,r){if(1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l._UZ(4,"img",4),l.qZA(),l.TgZ(5,"div",5),l.TgZ(6,"form",6,7),l.TgZ(8,"h4",8),l._uU(9),l.qZA(),l.TgZ(10,"p",9),l._uU(11),l.qZA(),l.TgZ(12,"h5"),l._uU(13),l.qZA(),l.TgZ(14,"p",10),l.TgZ(15,"strong"),l._uU(16,"Tama\xf1o:"),l.qZA(),l._uU(17),l.qZA(),l.TgZ(18,"p",11),l.TgZ(19,"strong"),l._uU(20,"Categor\xeda:"),l.qZA(),l._uU(21),l.qZA(),l.TgZ(22,"div",12),l.TgZ(23,"div",13),l.TgZ(24,"p",14),l._uU(25,"Fecha de entrega"),l.qZA(),l.TgZ(26,"input",15,16),l.NdJ("ngModelChange",function(a){return r.carrito.fec_solicitud=a}),l.qZA(),l.qZA(),l.TgZ(28,"div",17),l.TgZ(29,"p",14),l._uU(30,"Cantidad"),l.qZA(),l.TgZ(31,"input",18,19),l.NdJ("ngModelChange",function(a){return r.carrito.cantidad=a}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(33,"button",20),l.NdJ("click",function(){return r.agregarCarrito(r.productoService.producto.id,r.carrito)}),l._uU(34,"Agregar al carrito de compras"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const i=l.MAs(7);l.xp6(4),l.s9C("src",r.productoService.producto.url_img,l.LSH),l.xp6(5),l.Oqu(r.productoService.producto.nombre),l.xp6(2),l.Oqu(r.productoService.producto.descripcion),l.xp6(2),l.hij("$",r.productoService.producto.precio,""),l.xp6(4),l.hij(" ",r.tamanos[r.productoService.producto.tamano].nombre,""),l.xp6(4),l.hij(" ",r.getTipo(r.productoService.producto.tipo),""),l.xp6(5),l.Q6J("ngModel",r.carrito.fec_solicitud),l.xp6(5),l.Q6J("ngModel",r.carrito.cantidad),l.xp6(2),l.Q6J("disabled",!i.form.valid)}},directives:[AE,CE,em,Xg,tm,EE,Oy,Gx,SE],styles:[""]}),n})()},{path:"agregarCategorias",component:zU,canActivate:[MT]},{path:"productos",component:fV},{path:"acerca-de",component:QL}];let vV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[zc.forRoot(yV,{scrollPositionRestoration:"enabled"})],zc]}),n})();function wV(n,e){1&n&&(l.TgZ(0,"li",8),l.TgZ(1,"a",15),l._uU(2,"Login"),l.qZA(),l.qZA())}function EV(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"li",16),l.TgZ(1,"a",17),l._UZ(2,"img",18),l._uU(3),l.qZA(),l.TgZ(4,"ul",19),l.TgZ(5,"li"),l.TgZ(6,"h6",20),l._uU(7,"Opciones de Administrador"),l.qZA(),l.qZA(),l.TgZ(8,"li"),l.TgZ(9,"a",21),l._uU(10,"Agregar Productos"),l.qZA(),l.qZA(),l.TgZ(11,"li"),l.TgZ(12,"a",22),l._uU(13,"Agregar Categor\xedas"),l.qZA(),l.qZA(),l.TgZ(14,"li"),l._UZ(15,"hr",23),l.qZA(),l.TgZ(16,"li"),l.TgZ(17,"a",24),l.NdJ("click",function(){return l.CHM(t),l.oxw().authService.logout()}),l._uU(18,"Cerrar sesi\xf3n"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=e.ngIf;l.xp6(2),l.s9C("src",t.photoURL?t.photoURL:"/assets/images/dummy.png",l.LSH),l.s9C("alt",t.displayName),l.xp6(1),l.hij(" ",t.displayName?t.displayName:t.email," ")}}let CV=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Rs))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-header"]],decls:23,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light",2,"background","rgb(240,240,240)!important"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","/assets/images/logo.png","alt","Logo","width","36","height","30"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-end","fw-bold"],[1,"navbar-nav"],[1,"nav-item"],["href","#","routerLink","/home",1,"nav-link"],["href","#","routerLink","/productos",1,"nav-link"],["href","#","routerLink","/carrito",1,"nav-link"],["href","#","routerLink","/acerca-de",1,"nav-link"],["class","nav-item",4,"ngIf"],["class","nav-item dropdown",4,"ngIf"],["href","#","routerLink","/login",1,"nav-link"],[1,"nav-item","dropdown"],["href","#","role","button","id","dropdownMenuLink","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["width","28","height","28",1,"rounded-pill",3,"src","alt"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu","w-100"],[1,"dropdown-header"],["id","logout","href","#","routerLink","/agregarProductos",1,"dropdown-item"],["id","logout","href","#","routerLink","/agregarCategorias",1,"dropdown-item"],[1,"dropdown-divider"],["id","logout","href","#",1,"dropdown-item",3,"click"]],template:function(t,r){1&t&&(l.TgZ(0,"nav",0),l.TgZ(1,"div",1),l.TgZ(2,"a",2),l._UZ(3,"img",3),l._uU(4," Procake"),l.qZA(),l.TgZ(5,"button",4),l._UZ(6,"span",5),l.qZA(),l.TgZ(7,"div",6),l.TgZ(8,"ul",7),l.TgZ(9,"li",8),l.TgZ(10,"a",9),l._uU(11,"Inicio"),l.qZA(),l.qZA(),l.TgZ(12,"li",8),l.TgZ(13,"a",10),l._uU(14,"Productos"),l.qZA(),l.qZA(),l.TgZ(15,"li",8),l.TgZ(16,"a",11),l._uU(17,"Ver carrito"),l.qZA(),l.qZA(),l.TgZ(18,"li",8),l.TgZ(19,"a",12),l._uU(20,"Acerca de"),l.qZA(),l.qZA(),l.YNc(21,wV,3,0,"li",13),l.YNc(22,EV,19,3,"li",14),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(21),l.Q6J("ngIf",!r.authService.userState),l.xp6(1),l.Q6J("ngIf",r.authService.userState))},directives:[f,Ur],styles:[""]}),n})(),bV=(()=>{class n{constructor(){this.title="procake"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&(l._UZ(0,"app-header"),l._UZ(1,"router-outlet"))},directives:[CV,Uc],styles:[""]}),n})();const XN="firebasestorage.googleapis.com",eP="storageBucket";class kr extends O.ZR{constructor(e,t){super(zx(e),`Firebase Storage: ${t} (${zx(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kr.prototype)}_codeEquals(e){return zx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function zx(n){return"storage/"+n}function Kx(){return new kr("unknown","An unknown error occurred, please check the error payload for server response.")}function tP(){return new kr("canceled","User canceled the upload/download.")}function nP(){return new kr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ky(n){return new kr("invalid-argument",n)}function rP(){return new kr("app-deleted","The Firebase app was deleted.")}function iP(n){return new kr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ME(n,e){return new kr("invalid-format","String does not match format '"+n+"': "+e)}function RE(n){throw new kr("internal-error","Internal error: "+n)}class gs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=gs.makeFromUrl(e,t)}catch(i){return new gs(e,"")}if(""===r.path)return r;throw function OV(n){return new kr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+i+"(/(.*))?$","i");function E(Ke){Ke.path_=decodeURIComponent(Ke.path)}const S=t.replace(/[.]/g,"\\."),ft=[{regex:p,indices:{bucket:1,path:3},postModify:function a(Ke){"/"===Ke.path.charAt(Ke.path.length-1)&&(Ke.path_=Ke.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===XN?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let Ke=0;Ke<ft.length;Ke++){const Mt=ft[Ke],Ft=Mt.regex.exec(e);if(Ft){let _i=Ft[Mt.indices.path];_i||(_i=""),r=new gs(Ft[Mt.indices.bucket],_i),Mt.postModify(r);break}}if(null==r)throw function PV(n){return new kr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class UV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function jT(n){return"string"==typeof n||n instanceof String}function sP(n){return Yx()&&n instanceof Blob}function Yx(){return"undefined"!=typeof Blob}function Qx(n,e,t,r){if(r<e)throw ky(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ky(`Invalid value for '${n}'. Expected ${t} or less.`)}function Od(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function oP(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Df=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Df||(Df={})),Df))();class ZV{constructor(e,t,r,i,a,c,p,_,E,A,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=_,this.timeout_=E,this.progressCallback_=A,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,V)=>{this.resolve_=P,this.reject_=V,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(p,p.getResponse());!function jV(n){return void 0!==n}(_)?a():a(_)}catch(_){c(_)}else if(null!==p){const _=Kx();_.serverResponse=p.getErrorText(),c(this.errorCallback_?this.errorCallback_(p,_):_)}else c(i.canceled?this.appDelete_?rP():tP():function NV(){return new kr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new qT(!1,null,!0)):this.backoffId_=function VV(n,e,t){let r=1,i=null,a=null,c=!1,p=0;function _(){return 2===p}let E=!1;function A(...Te){E||(E=!0,e.apply(null,Te))}function S(Te){i=setTimeout(()=>{i=null,n(V,_())},Te)}function P(){a&&clearTimeout(a)}function V(Te,...dt){if(E)return void P();if(Te)return P(),void A.call(null,Te,...dt);if(_()||c)return P(),void A.call(null,Te,...dt);let ft;r<64&&(r*=2),1===p?(p=2,ft=0):ft=1e3*(r+Math.random()),S(ft)}let G=!1;function fe(Te){G||(G=!0,P(),!E&&(null!==i?(Te||(p=2),clearTimeout(i),S(0)):Te||(p=1)))}return S(0),a=setTimeout(()=>{c=!0,fe(!0)},t),fe}((r,i)=>{if(i)return void r(!1,new qT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const p=a.getErrorCode()===Df.NO_ERROR,_=a.getStatus();if(!p||this.isRetryStatusCode_(_)){const A=a.getErrorCode()===Df.ABORT;return void r(!1,new qT(!1,null,A))}const E=-1!==this.successCodes_.indexOf(_);r(!0,new qT(E,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function BV(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class qT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function QV(...n){const e=function YV(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Yx())return new Blob(n);throw new kr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Zo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Jx{constructor(e,t){this.data=e,this.contentType=t||null}}function Xx(n,e){switch(n){case Zo.RAW:return new Jx(aP(e));case Zo.BASE64:case Zo.BASE64URL:return new Jx(uP(n,e));case Zo.DATA_URL:return new Jx(function t2(n){const e=new lP(n);return e.base64?uP(Zo.BASE64,e.rest):function e2(n){let e;try{e=decodeURIComponent(n)}catch(t){throw ME(Zo.DATA_URL,"Malformed data URL.")}return aP(e)}(e.rest)}(e),function n2(n){return new lP(n).contentType}(e))}throw Kx()}function aP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function uP(n,e){switch(n){case Zo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw ME(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Zo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw ME(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function XV(n){return atob(n)}(e)}catch(i){throw ME(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class lP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ME(Zo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function r2(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ec{constructor(e,t){let r=0,i="";sP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(sP(this.data_)){const i=function JV(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ec(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ec(r,!0)}}static getBlob(...e){if(Yx()){const t=e.map(r=>r instanceof ec?r.data_:r);return new ec(QV.apply(null,t))}{const t=e.map(c=>jT(c)?Xx(Zo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let p=0;p<c.length;p++)i[a++]=c[p]}),new ec(i,!0)}}uploadData(){return this.data_}}function eM(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function $V(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function cP(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function o2(n,e){return e}class Ps{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||o2}}let $T=null;function NE(){if($T)return $T;const n=[];n.push(new Ps("bucket")),n.push(new Ps("generation")),n.push(new Ps("metageneration")),n.push(new Ps("name","fullPath",!0));const t=new Ps("name");t.xform=function e(a,c){return function a2(n){return!jT(n)||n.length<2?n:cP(n)}(c)},n.push(t);const i=new Ps("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Ps("timeCreated")),n.push(new Ps("updated")),n.push(new Ps("md5Hash",null,!0)),n.push(new Ps("cacheControl",null,!0)),n.push(new Ps("contentDisposition",null,!0)),n.push(new Ps("contentEncoding",null,!0)),n.push(new Ps("contentLanguage",null,!0)),n.push(new Ps("contentType",null,!0)),n.push(new Ps("metadata","customMetadata",!0)),$T=n,$T}function dP(n,e,t){const r=eM(e);return null===r?null:function l2(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function u2(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new gs(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function tM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const hP="prefixes";class tc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function nc(n){if(!n)throw Kx()}function ZT(n,e){return function t(r,i){const a=dP(n,i,e);return nc(null!==a),a}}function Fy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function MV(){return new kr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function xV(){return new kr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function SV(n){return new kr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function RV(n){return new kr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function PE(n){const e=Fy(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function AV(n){return new kr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function pP(n,e,t){const i=Od(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new tc(i,"GET",ZT(n,t),c);return p.errorHandler=PE(e),p}function g2(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const p=Od(e.bucketOnlyServerUrl(),n.host,n._protocol),E=n.maxOperationRetryTime,A=new tc(p,"GET",function f2(n,e){return function t(r,i){const a=function h2(n,e,t){const r=eM(t);return null===r?null:function d2(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[hP])for(const i of t[hP]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new gs(e,a));r.prefixes.push(c)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new gs(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return nc(null!==a),a}}(n,e.bucket),E);return A.urlParams=a,A.errorHandler=Fy(e),A}function mP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function v2(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class HT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function nM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){nc(!1)}return nc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const b2={STATE_CHANGED:"state_changed"},Os={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function rM(n){switch(n){case"running":case"pausing":case"canceling":return Os.RUNNING;case"paused":return Os.PAUSED;case"success":return Os.SUCCESS;case"canceled":return Os.CANCELED;default:return Os.ERROR}}class I2{constructor(e,t,r){if(function qV(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Ly(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class D2 extends class T2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Df.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Df.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Df.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw RE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw RE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw RE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw RE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw RE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function ku(){return new D2}class wP{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=NE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function w2(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=mP(e,r,i),p={name:c.fullPath},_=Od(a,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=tM(c,t),G=new tc(_,"POST",function V(fe){let Te;nM(fe);try{Te=fe.getResponseHeader("X-Goog-Upload-URL")}catch(dt){nc(!1)}return nc(jT(Te)),Te},n.maxUploadRetryTime);return G.urlParams=p,G.headers=A,G.body=S,G.errorHandler=Fy(e),G}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ku,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function E2(n,e,t,r){const _=new tc(t,"POST",function a(E){const A=nM(E,["active","final"]);let S=null;try{S=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch(V){nc(!1)}S||nc(!1);const P=Number(S);return nc(!isNaN(P)),new HT(P,r.size(),"final"===A)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Fy(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,ku,t,r);this._request=a,a.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new HT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function C2(n,e,t,r,i,a,c,p){const _=new HT(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function FV(){return new kr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const E=_.total-_.current;let A=E;i>0&&(A=Math.min(A,i));const S=_.current,G={"X-Goog-Upload-Command":A===E?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},fe=r.slice(S,S+A);if(null===fe)throw nP();const ft=new tc(t,"POST",function Te(Ke,Mt){const Ft=nM(Ke,["active","final"]),_o=_.current+A,_i=r.size();let Bu;return Bu="final"===Ft?ZT(e,a)(Ke,Mt):null,new HT(_o,_i,"final"===Ft,Bu)},e.maxUploadRetryTime);return ft.headers=G,ft.body=fe.uploadData(),ft.progressCallback=p||null,ft.errorHandler=Fy(n),ft}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const p=this._ref.storage._makeRequest(c,ku,i,a);this._request=p,p.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=pP(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ku,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function _P(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function p(){let ft="";for(let Ke=0;Ke<2;Ke++)ft+=Math.random().toString().slice(2);return ft}();c["Content-Type"]="multipart/related; boundary="+_;const E=mP(e,r,i),A=tM(E,t),V=ec.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+_+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===V)throw nP();const G={name:E.fullPath},fe=Od(a,n.host,n._protocol),dt=n.maxUploadRetryTime,ze=new tc(fe,"POST",ZT(n,t),dt);return ze.urlParams=G,ze.headers=c,ze.body=V.uploadData(),ze.errorHandler=Fy(e),ze}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ku,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=tP(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=rM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new I2(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(rM(this._state)){case Os.SUCCESS:Ly(this._resolve.bind(null,this.snapshot))();break;case Os.CANCELED:case Os.ERROR:Ly(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(rM(this._state)){case Os.RUNNING:case Os.PAUSED:e.next&&Ly(e.next.bind(e,this.snapshot))();break;case Os.SUCCESS:e.complete&&Ly(e.complete.bind(e))();break;default:e.error&&Ly(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class nm{constructor(e,t){this._service=e,this._location=t instanceof gs?t:gs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new nm(e,t)}get root(){const e=new gs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cP(this._location.path)}get storage(){return this._service}get parent(){const e=function i2(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new gs(this._location.bucket,e);return new nm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw iP(e)}}function CP(n,e,t){return iM.apply(this,arguments)}function iM(){return iM=(0,ge.Z)(function*(n,e,t){const i=yield bP(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield CP(n,e,i.nextPageToken))}),iM.apply(this,arguments)}function bP(n,e){null!=e&&"number"==typeof e.maxResults&&Qx("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=g2(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ku)}function U2(n){n._throwIfRoot("getDownloadURL");const e=function m2(n,e,t){const i=Od(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new tc(i,"GET",function p2(n,e){return function t(r,i){const a=dP(n,i,e);return nc(null!==a),function c2(n,e,t,r){const i=eM(e);if(null===i||!jT(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(E=>{const S=n.fullPath;return Od("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+oP({alt:"media",token:E})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return p.errorHandler=PE(e),p}(n.storage,n._location,NE());return n.storage.makeRequestWithTokens(e,ku).then(t=>{if(null===t)throw function LV(){return new kr("no-download-url","The given file does not have any download URLs.")}();return t})}function IP(n,e){const t=function s2(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new gs(n._location.bucket,t);return new nm(n.storage,r)}function TP(n,e){if(n instanceof sM){const t=n;if(null==t._bucket)throw function kV(){return new kr("no-default-bucket","No default bucket found. Did you set the '"+eP+"' property when initializing the app?")}();const r=new nm(t,t._bucket);return null!=e?TP(r,e):r}return void 0!==e?IP(n,e):n}function q2(n,e){if(e&&function B2(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof sM)return function j2(n,e){return new nm(n,e)}(n,e);throw ky("To use ref(service, url), the first argument must be a Storage instance.")}return TP(n,e)}function DP(n,e){const t=null==e?void 0:e[eP];return null==t?null:gs.makeFromBucketSpec(t,n)}class sM{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=XN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?gs.makeFromBucketSpec(i,this._host):DP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?gs.makeFromBucketSpec(this._url,e):DP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Qx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Qx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ge.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ge.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new nm(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new UV(rP());{const a=function KV(n,e,t,r,i,a){const c=oP(n.urlParams),p=n.url+c,_=Object.assign({},n.headers);return function WV(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function HV(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function GV(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function zV(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new ZV(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,ge.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const AP="@firebase/storage";function MP(n,e){return q2(n=(0,O.m9)(n),e)}function X2(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new sM(t,r,i,e,Qi.SDK_VERSION)}!function eB(){(0,Qi._registerComponent)(new ko.wA("storage",X2,"PUBLIC").setMultipleInstances(!0)),(0,Qi.registerVersion)(AP,"0.9.4",""),(0,Qi.registerVersion)(AP,"0.9.4","esm2017")}();class GT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class RP{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new GT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new GT(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new GT(c,this,this._ref)):{next:t.next?c=>t.next(new GT(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class NP{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new kd(e,this._service))}get items(){return this._delegate.items.map(e=>new kd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class kd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Q2(n,e){return IP(n,e)}(this._delegate,e);return new kd(t,this.storage)}get root(){return new kd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new kd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new RP(function Z2(n,e,t){return function P2(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new wP(n,new ec(e),t)}(n=(0,O.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Zo.RAW,r){this._throwIfRoot("putString");const i=Xx(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new RP(new wP(this._delegate,new ec(i.data,!0),a),this)}listAll(){return function z2(n){return function k2(n){const e={prefixes:[],items:[]};return CP(n,e).then(()=>e)}(n=(0,O.m9)(n))}(this._delegate).then(e=>new NP(e,this.storage))}list(e){return function W2(n,e){return bP(n=(0,O.m9)(n),e)}(this._delegate,e||void 0).then(t=>new NP(t,this.storage))}getMetadata(){return function H2(n){return function F2(n){n._throwIfRoot("getMetadata");const e=pP(n.storage,n._location,NE());return n.storage.makeRequestWithTokens(e,ku)}(n=(0,O.m9)(n))}(this._delegate)}updateMetadata(e){return function G2(n,e){return function L2(n,e){n._throwIfRoot("updateMetadata");const t=function _2(n,e,t,r){const a=Od(e.fullServerUrl(),n.host,n._protocol),p=tM(t,r),E=n.maxOperationRetryTime,A=new tc(a,"PATCH",ZT(n,r),E);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=p,A.errorHandler=PE(e),A}(n.storage,n._location,e,NE());return n.storage.makeRequestWithTokens(t,ku)}(n=(0,O.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function K2(n){return U2(n=(0,O.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Y2(n){return function V2(n){n._throwIfRoot("deleteObject");const e=function y2(n,e){const r=Od(e.fullServerUrl(),n.host,n._protocol),p=new tc(r,"DELETE",function c(_,E){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=PE(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ku)}(n=(0,O.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw iP(e)}}class PP{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(OP(e))throw ky("ref() expected a child path but got a URL, use refFromURL instead.");return new kd(MP(this._delegate,e),this)}refFromURL(e){if(!OP(e))throw ky("refFromURL() expected a full URL but got a child path, use ref() instead.");try{gs.makeFromUrl(e,this._delegate.host)}catch(t){throw ky("refFromUrl() expected a valid full URL but got an invalid one.")}return new kd(MP(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function J2(n,e,t,r={}){!function $2(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,O.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function OP(n){return/^[A-Za-z]+:\/\//.test(n)}function iB(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new PP(t,r)}function kP(n){const e=function oB(n){return new tr.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function IV(n,e=Tv.z){return(0,jn.e)((t,r)=>{let i=null,a=null,c=null;const p=()=>{if(i){i.unsubscribe(),i=null;const E=a;a=null,r.next(E)}};function _(){const E=c+n,A=e.now();if(A<E)return i=this.schedule(void 0,E-A),void r.add(i);p()}t.subscribe(new Pn.Q(r,E=>{a=E,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Dt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function WT(n){return{getDownloadURL:()=>gt(void 0).pipe(dn.fc,Dn(()=>n.getDownloadURL()),dn.iC),getMetadata:()=>gt(void 0).pipe(dn.fc,Dn(()=>n.getMetadata()),dn.iC),delete:()=>(0,hn.D)(n.delete()),child:e=>WT(n.child(e)),updateMetadata:e=>(0,hn.D)(n.updateMetadata(e)),put:(e,t)=>kP(n.put(e,t)),putString:(e,t,r)=>kP(n.putString(e,t,r)),list:e=>(0,hn.D)(n.list(e)),listAll:()=>(0,hn.D)(n.listAll())}}!function sB(n){const e={TaskState:Os,TaskEvent:b2,StringFormat:Zo,Storage:PP,Reference:kd};n.INTERNAL.registerComponent(new ko.wA("storage-compat",iB,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.12")}(Dv.Z);const aB=new l.OlP("angularfire2.storageBucket"),uB=new l.OlP("angularfire2.storage.maxUploadRetryTime"),lB=new l.OlP("angularfire2.storage.maxOperationRetryTime"),cB=new l.OlP("angularfire2.storage.use-emulator");let dB=(()=>{class n{constructor(t,r,i,a,c,p,_,E,A,S){const P=(0,ti.on)(t,c,r);this.storage=(0,ti.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const V=c.runOutsideAngular(()=>P.storage(i||void 0)),G=A;return G&&V.useEmulator(...G),_&&V.setMaxUploadRetryTime(_),E&&V.setMaxOperationRetryTime(E),V},[_,E])}ref(t){return WT(this.storage.ref(t))}refFromURL(t){return WT(this.storage.refFromURL(t))}upload(t,r,i){return WT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ti.Dh),l.LFG(ti.xv,8),l.LFG(aB,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(dn.HU),l.LFG(uB,8),l.LFG(lB,8),l.LFG(cB,8),l.LFG(_E,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),hB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),fB=(()=>{class n{constructor(){Ch.Z.registerVersion("angularfire",dn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[dB],imports:[hB]}),n})();var pB=L(5032);const FP="@firebase/database";let oM="";function UP(n){oM=n}class _B{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class yB{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const VP=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _B(e)}}catch(e){}return new yB},rm=VP("localStorage"),aM=VP("sessionStorage"),Uy=new wr.Yd("@firebase/database"),BP=function(){let n=1;return function(){return n++}}(),jP=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},OE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=OE.apply(null,r):e+="object"==typeof r?(0,O.Pz)(r):r,e+=" "}return e};let im=null,qP=!0;const $P=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Uy.logLevel=wr.in.VERBOSE,im=Uy.log.bind(Uy),e&&aM.set("logging_enabled",!0)):"function"==typeof n?im=n:(im=null,aM.remove("logging_enabled"))},Pi=function(...n){if(!0===qP&&(qP=!1,null===im&&!0===aM.get("logging_enabled")&&$P(!0)),im){const e=OE.apply(null,n);im(e)}},kE=function(n){return function(...e){Pi(n,...e)}},uM=function(...n){const e="FIREBASE INTERNAL ERROR: "+OE(...n);Uy.error(e)},rc=function(...n){const e=`FIREBASE FATAL ERROR: ${OE(...n)}`;throw Uy.error(e),new Error(e)},ks=function(...n){const e="FIREBASE WARNING: "+OE(...n);Uy.warn(e)},zT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Fd="[MIN_NAME]",ic="[MAX_NAME]",sm=function(n,e){if(n===e)return 0;if(n===Fd||e===ic)return-1;if(e===Fd||n===ic)return 1;{const t=KT(n),r=KT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},EB=function(n,e){return n===e?0:n<e?-1:1},FE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Pz)(e))},lM=function(n){if("object"!=typeof n||null===n)return(0,O.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Pz)(e[r]),t+=":",t+=lM(n[e[r]]);return t+="}",t},ZP=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Oi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const HP=function(n){(0,O.hu)(!zT(n),"Invalid JSON number");const r=1023;let i,a,c,p,_;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=p+r,c=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const E=[];for(_=52;_;_-=1)E.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)E.push(a%2?1:0),a=Math.floor(a/2);E.push(i?1:0),E.reverse();const A=E.join("");let S="";for(_=0;_<64;_+=8){let P=parseInt(A.substr(_,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},TB=new RegExp("^-?(0*)\\d{1,10}$"),GP=-2147483648,cM=2147483647,KT=function(n){if(TB.test(n)){const e=Number(n);if(e>=GP&&e<=cM)return e}return null},Vy=function(n){try{n()}catch(e){setTimeout(()=>{throw ks("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},LE=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class AB{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ks(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class SB{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Pi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ks(e)}}let UE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const QP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,XP="websocket",eO="long_polling";class hM{constructor(e,t,r,i,a=!1,c="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=rm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&rm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function tO(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===XP)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==eO)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function MB(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Oi(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class RB{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const fM={},pM={};function gM(n){const e=n.toString();return fM[e]||(fM[e]=new RB),fM[e]}class PB{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Vy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class By{constructor(e,t,r,i,a,c,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=kE(e),this.stats_=gM(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),tO(t,eO,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new PB(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new mM((...a)=>{const[c,p,_,E,A]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=p,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,p]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&QP.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){By.forceAllow_=!0}static forceDisallow(){By.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!By.forceAllow_&&(By.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=ZP(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class mM{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=BP(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=mM.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(p){Pi("frame writing exception"),p.stack&&Pi(p.stack),Pi(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Pi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Pi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let VE=null;"undefined"!=typeof MozWebSocket?VE=MozWebSocket:"undefined"!=typeof WebSocket&&(VE=WebSocket);let BE=(()=>{class n{constructor(t,r,i,a,c,p,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=kE(this.connId),this.stats_=gM(r),this.connURL=n.connectionURL_(r,p,_,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const c={v:"5"};return!(0,O.Yr)()&&"undefined"!=typeof location&&location.hostname&&QP.test(location.hostname)&&(c.r="f"),r&&(c.s=r),i&&(c.ls=i),a&&(c.ac=a),tO(t,XP,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,rm.set("previous_websocket_failure",!0);try{if((0,O.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${oM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,p=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;p&&(a.proxy={origin:p}),this.mySock=new VE(this.connURL,[],a)}else this.mySock=new VE(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==VE&&!n.forceDisallow_}static previouslyFailed(){return rm.isInMemoryStorage||!0===rm.get("previous_websocket_failure")}markConnectionHealthy(){rm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=ZP(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class _M{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[By,BE]}initTransports_(e){const t=BE&&BE.isAvailable();let r=t&&!BE.previouslyFailed();if(e.webSocketOnly&&(t||ks("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[BE];else{const i=this.transports_=[];for(const a of _M.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class pO{constructor(e,t,r,i,a,c,p,_,E,A){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=p,this.onDisconnect_=_,this.onKill_=E,this.lastSessionId=A,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=kE("c:"+this.id+":"),this.transportManager_=new _M(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=LE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=FE("t",e),r=FE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=FE("t",e),r=FE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=FE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?uM("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):uM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ks("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),LE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):LE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(rm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class gO{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class mO{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class QT extends mO{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new QT}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Sn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function mn(){return new Sn("")}function Gt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Af(n){return n.pieces_.length-n.pieceNum_}function Zn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Sn(n.pieces_,e)}function vM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function jE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function vO(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Sn(e,0)}function dr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Sn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Sn(t,0)}function Wt(n){return n.pieceNum_>=n.pieces_.length}function Fs(n,e){const t=Gt(n),r=Gt(e);if(null===t)return e;if(t===r)return Fs(Zn(n),Zn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function tj(n,e){const t=jE(n,0),r=jE(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=sm(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function wM(n,e){if(Af(n)!==Af(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ka(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Af(n)>Af(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class nj{constructor(e,t){this.errorPrefix_=t,this.parts_=jE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);wO(this)}}function wO(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+om(n))}function om(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class EM extends mO{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new EM}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const qE=1e3;let XT,am=(()=>{class n extends gO{constructor(t,r,i,a,c,p,_,E){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=_,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=kE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=qE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");EM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&QT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,O.Pz)(c)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new O.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:p=>{const _=p.d;"ok"===p.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[c];void 0===p||a!==p||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+c),this.listens.has(p)||this.listens.set(p,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(p).has(c),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(p).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const E=_.d,A=_.s;n.warnOnListenWarnings_(E,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==A&&this.removeListen_(i,a),t.onComplete&&t.onComplete(A,E))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();ks(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,p=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,p=>{a&&setTimeout(()=>{a(p.s,p.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const p={p:r,d:i};void 0!==c&&(p.h=c),this.outstandingPuts_.push({action:t,request:p,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):uM("Unrecognized action received from server: "+(0,O.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=qE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=qE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ge.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let _=!1,E=null;const A=function(){E?E.close():(_=!0,a())};t.realtime_={close:A,sendRequest:function(V){(0,O.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(V)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,G]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);_?Pi("getToken() completed but was canceled"):(Pi("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=G&&G.token,E=new pO(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,fe=>{ks(fe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(V){t.log_("Failed to get token: "+V),_||(t.repoInfo_.nodeAdmin&&ks(V),A())}}})()}interrupt(t){Pi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Pi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=qE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>lM(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Sn(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Pi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Pi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+oM.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=QT.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Jt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Jt(e,t)}}class JT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Jt(Fd,e),i=new Jt(Fd,t);return 0!==this.compare(r,i)}minPost(){return Jt.MIN}}class bO extends JT{static get __EMPTY_NODE(){return XT}static set __EMPTY_NODE(e){XT=e}compare(e,t){return sm(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Jt.MIN}maxPost(){return new Jt(ic,XT)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Jt(e,XT)}toString(){return".key"}}const sc=new bO;class eD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let bM,Fu=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:go.EMPTY_NODE,this.right=null!=c?c:go.EMPTY_NODE}copy(t,r,i,a,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return go.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return go.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class go{constructor(e,t=go.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new go(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Fu.BLACK,null,null))}remove(e){return new go(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new eD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new eD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new eD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new eD(this.root_,null,this.comparator_,!0,e)}}function dj(n,e){return sm(n.name,e.name)}function CM(n,e){return sm(n,e)}go.EMPTY_NODE=new class cj{copy(e,t,r,i,a){return this}insert(e,t,r){return new Fu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const IO=function(n){return"number"==typeof n?"number:"+HP(n):"string:"+n},TO=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===bM||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===bM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let DO,AO,SO,jy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),TO(this.priorityNode_)}static set __childrenNodeConstructor(t){DO=t}static get __childrenNodeConstructor(){return DO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Wt(t)?this:".priority"===Gt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Gt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===Af(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+IO(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?HP(this.value_):this.value_,this.lazyHash_=jP(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(a>=0,"Unknown leaf type: "+r),(0,O.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Kn=new class gj extends JT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?sm(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Jt.MIN}maxPost(){return new Jt(ic,new jy("[PRIORITY-POST]",SO))}makePost(e,t){const r=AO(e);return new Jt(t,new jy("[PRIORITY-POST]",r))}toString(){return".priority"}},mj=Math.log(2);class _j{constructor(e){this.count=parseInt(Math.log(e+1)/mj,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const tD=function(n,e,t,r){n.sort(e);const i=function(_,E){const A=E-_;let S,P;if(0===A)return null;if(1===A)return S=n[_],P=t?t(S):S,new Fu(P,S.node,Fu.BLACK,null,null);{const V=parseInt(A/2,10)+_,G=i(_,V),fe=i(V+1,E);return S=n[V],P=t?t(S):S,new Fu(P,S.node,Fu.BLACK,G,fe)}},p=function(_){let E=null,A=null,S=n.length;const P=function(G,fe){const Te=S-G,dt=S;S-=G;const ze=i(Te+1,dt),ft=n[Te],Ke=t?t(ft):ft;V(new Fu(Ke,ft.node,fe,null,ze))},V=function(G){E?(E.left=G,E=G):(A=G,E=G)};for(let G=0;G<_.count;++G){const fe=_.nextBitIsOne(),Te=Math.pow(2,_.count-(G+1));fe?P(Te,Fu.BLACK):(P(Te,Fu.BLACK),P(Te,Fu.RED))}return A}(new _j(n.length));return new go(r||e,p)};let IM;const qy={};class Ld{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(qy&&Kn,"ChildrenNode.ts has not been loaded"),IM=IM||new Ld({".priority":qy},{".priority":Kn}),IM}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof go?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==sc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Jt.Wrap);let p,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();p=i?tD(r,e.getCompare()):qy;const _=e.toString(),E=Object.assign({},this.indexSet_);E[_]=e;const A=Object.assign({},this.indexes_);return A[_]=p,new Ld(A,E)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,a)=>{const c=(0,O.DV)(this.indexSet_,a);if((0,O.hu)(c,"Missing index implementation for "+a),i===qy){if(c.isDefinedOn(e.node)){const p=[],_=t.getIterator(Jt.Wrap);let E=_.getNext();for(;E;)E.name!==e.name&&p.push(E),E=_.getNext();return p.push(e),tD(p,c.getCompare())}return qy}{const p=t.get(e.name);let _=i;return p&&(_=_.remove(new Jt(e.name,p))),_.insert(e,e.node)}});return new Ld(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===qy)return i;{const a=t.get(e.name);return a?i.remove(new Jt(e.name,a)):i}});return new Ld(r,this.indexSet_)}}let $E,Vt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&TO(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $E||($E=new n(new go(CM),null,Ld.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$E}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?$E:r}}getChild(t){const r=Gt(t);return null===r?this:this.getImmediateChild(r).getChild(Zn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Jt(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const p=a.isEmpty()?$E:this.priorityNode_;return new n(a,p,c)}}updateChild(t,r){const i=Gt(t);if(null===i)return r;{(0,O.hu)(".priority"!==Gt(t)||1===Af(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Zn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(Kn,(p,_)=>{r[p]=_.val(t),i++,c&&n.INTEGER_REGEXP_.test(p)?a=Math.max(a,Number(p)):c=!1}),!t&&c&&a<2*i){const p=[];for(const _ in r)p[_]=r[_];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+IO(this.getPriority().val())+":"),this.forEachChild(Kn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":jP(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new Jt(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Jt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Jt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Jt.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Jt.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ZE?-1:0}withIndex(t){if(t===sc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===sc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Kn),a=r.getIterator(Kn);let c=i.getNext(),p=a.getNext();for(;c&&p;){if(c.name!==p.name||!c.node.equals(p.node))return!1;c=i.getNext(),p=a.getNext()}return null===c&&null===p}return!1}return!1}}resolveIndex_(t){return t===sc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const ZE=new class yj extends Vt{constructor(){super(new go(CM),Vt.EMPTY_NODE,Ld.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Vt.EMPTY_NODE}isEmpty(){return!1}};function Cr(n,e=null){if(null===n)return Vt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new jy(n,Cr(e));if(n instanceof Array){let t=Vt.EMPTY_NODE;return Oi(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const a=Cr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Cr(e))}{const t=[];let r=!1;if(Oi(n,(c,p)=>{if("."!==c.substring(0,1)){const _=Cr(p);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new Jt(c,_)))}}),0===t.length)return Vt.EMPTY_NODE;const a=tD(t,dj,c=>c.name,CM);if(r){const c=tD(t,Kn.getCompare());return new Vt(a,Cr(e),new Ld({".priority":c},{".priority":Kn}))}return new Vt(a,Cr(e),Ld.Default)}}Object.defineProperties(Jt,{MIN:{value:new Jt(Fd,Vt.EMPTY_NODE)},MAX:{value:new Jt(ic,ZE)}}),bO.__EMPTY_NODE=Vt.EMPTY_NODE,jy.__childrenNodeConstructor=Vt,function hj(n){bM=n}(ZE),function pj(n){SO=n}(ZE),function fj(n){AO=n}(Cr);class TM extends JT{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!Wt(e)&&".priority"!==Gt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?sm(e.name,t.name):a}makePost(e,t){const r=Cr(e),i=Vt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Jt(t,i)}maxPost(){const e=Vt.EMPTY_NODE.updateChild(this.indexPath_,ZE);return new Jt(ic,e)}toString(){return jE(this.indexPath_,0).join("/")}}const DM=new class wj extends JT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?sm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Jt.MIN}maxPost(){return Jt.MAX}makePost(e,t){const r=Cr(e);return new Jt(t,r)}toString(){return".value"}},$y="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ej=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=$y.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=$y.charAt(e[i]);return(0,O.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),RO=function(n){if(n===""+cM)return"-";const e=KT(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return ic;const a=$y.charAt($y.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},NO=function(n){if(n===""+GP)return Fd;const e=KT(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+cM:(delete t[t.length-1],t.join("")):(t[t.length-1]=$y.charAt($y.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function PO(n){return{type:"value",snapshotNode:n}}function Zy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function HE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function GE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class SM{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(i).equals(r.getChild(i))&&p.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(HE(t,p)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?c.trackChildChange(Zy(t,r)):c.trackChildChange(GE(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Kn,(i,a)=>{t.hasChild(i)||r.trackChildChange(HE(i,a))}),t.isLeafNode()||t.forEachChild(Kn,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(GE(i,a,c))}else r.trackChildChange(Zy(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Vt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class WE{constructor(e){this.indexedFilter_=new SM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=WE.getStartPost_(e),this.endPost_=WE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,c){return this.matches(new Jt(t,r))||(r=Vt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Vt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Vt.EMPTY_NODE);const a=this;return t.forEachChild(Kn,(c,p)=>{a.matches(new Jt(c,p))||(i=i.updateImmediateChild(c,Vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class bj{constructor(e){this.rangedFilter_=new WE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new Jt(t,r))||(r=Vt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Vt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const p=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(p.name,p.node),c++}}else{let a,c,p,_;if(i=t.withIndex(this.index_),i=i.updatePriority(Vt.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();p=(P,V)=>S(V,P)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let E=0,A=!1;for(;_.hasNext();){const S=_.getNext();!A&&p(a,S)<=0&&(A=!0),A&&E<this.limit_&&p(S,c)<=0?E++:i=i.updateImmediateChild(S.name,Vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const S=this.index_.getCompare();c=(P,V)=>S(V,P)}else c=this.index_.getCompare();const p=e;(0,O.hu)(p.numChildren()===this.limit_,"");const _=new Jt(t,r),E=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),A=this.rangedFilter_.matches(_);if(p.hasChild(t)){const S=p.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=P&&(P.name===t||p.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const V=null==P?1:c(P,_);if(A&&!r.isEmpty()&&V>=0)return null!=a&&a.trackChildChange(GE(t,r,S)),p.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(HE(t,S));const fe=p.updateImmediateChild(t,Vt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=a&&a.trackChildChange(Zy(P.name,P.node)),fe.updateImmediateChild(P.name,P.node)):fe}}return r.isEmpty()?e:A&&c(E,_)>=0?(null!=a&&(a.trackChildChange(HE(E.name,E.node)),a.trackChildChange(Zy(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(E.name,Vt.EMPTY_NODE)):e}}class nD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Fd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ic}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Kn}copy(){const e=new nD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function xM(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function MM(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function rD(n,e){const t=n.copy();return t.index_=e,t}function OO(n){const e={};if(n.isDefault())return e;let t;return n.index_===Kn?t="$priority":n.index_===DM?t="$value":n.index_===sc?t="$key":((0,O.hu)(n.index_ instanceof TM,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Pz)(t),n.startSet_&&(e.startAt=(0,O.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,O.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,O.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,O.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function kO(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Kn&&(e.i=n.index_.toString()),e}class iD extends gO{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=kE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=iD.getListenId_(e,r),p={};this.listens_[c]=p;const _=OO(e._queryParams);this.restRequest_(a+".json",_,(E,A)=>{let S=A;if(404===E&&(S=null,E=null),null===E&&this.onDataUpdate_(a,S,!1,r),(0,O.DV)(this.listens_,c)===p){let P;P=E?401===E?"permission_denied":"rest_error:"+E:"ok",i(P,null)}})}unlisten(e,t){const r=iD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=OO(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(a,c)=>{let p=c;404===a&&(p=null,a=null),null===a?(this.onDataUpdate_(r,p,!1,null),i.resolve(p)):i.reject(new Error(p))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+c);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+c+" received. status:",p.status,"response:",p.responseText);let _=null;if(p.status>=200&&p.status<300){try{_=(0,O.cI)(p.responseText)}catch(E){ks("Failed to parse JSON response for "+c+": "+p.responseText)}r(null,_)}else 401!==p.status&&404!==p.status&&ks("Got unsuccessful REST response for "+c+" Status: "+p.status),r(p.status);r=null}},p.open("GET",c,!0),p.send()})}}class xj{constructor(){this.rootNode_=Vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function sD(){return{value:null,children:new Map}}function Hy(n,e,t){if(Wt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Gt(e);n.children.has(r)||n.children.set(r,sD()),Hy(n.children.get(r),e=Zn(e),t)}}function RM(n,e){if(Wt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Kn,(r,i)=>{Hy(n,new Sn(r),i)}),RM(n,e)}}if(n.children.size>0){const t=Gt(e);return e=Zn(e),n.children.has(t)&&RM(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function NM(n,e,t){null!==n.value?t(e,n.value):function Mj(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{NM(i,new Sn(e.toString()+"/"+r),t)})}class Rj{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Oi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Oj{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Rj(e);const r=1e4+2e4*Math.random();LE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Oi(e,(i,a)=>{a>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),LE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Fa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Fa||(Fa={})),Fa))();function kM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class oD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Fa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Wt(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Sn(e));return new oD(mn(),t,this.revert)}}return(0,O.hu)(Gt(this.path)===e,"operationForChild called for unrelated child."),new oD(Zn(this.path),this.affectedTree,this.revert)}}class zE{constructor(e,t){this.source=e,this.path=t,this.type=Fa.LISTEN_COMPLETE}operationForChild(e){return Wt(this.path)?new zE(this.source,mn()):new zE(this.source,Zn(this.path))}}class um{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Fa.OVERWRITE}operationForChild(e){return Wt(this.path)?new um(this.source,mn(),this.snap.getImmediateChild(e)):new um(this.source,Zn(this.path),this.snap)}}class Gy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Fa.MERGE}operationForChild(e){if(Wt(this.path)){const t=this.children.subtree(new Sn(e));return t.isEmpty()?null:t.value?new um(this.source,mn(),t.value):new Gy(this.source,mn(),t)}return(0,O.hu)(Gt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Gy(this.source,Zn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Sf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Wt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Gt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class kj{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function KE(n,e,t,r,i,a){const c=r.filter(p=>p.type===t);c.sort((p,_)=>function Uj(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new Jt(e.childName,e.snapshotNode),i=new Jt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,p,_)),c.forEach(p=>{const _=function Lj(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,a);i.forEach(E=>{E.respondsTo(p.type)&&e.push(E.createEvent(_,n.query_))})})}function aD(n,e){return{eventCache:n,serverCache:e}}function YE(n,e,t,r){return aD(new Sf(e,t,r),n.serverCache)}function LO(n,e,t,r){return aD(n.eventCache,new Sf(e,t,r))}function uD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function lm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let FM;class Yn{constructor(e,t=(()=>(FM||(FM=new go(EB)),FM))()){this.value=e,this.children=t}static fromObject(e){let t=new Yn(null);return Oi(e,(r,i)=>{t=t.set(new Sn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:mn(),value:this.value};if(Wt(e))return null;{const r=Gt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Zn(e),t);return null!=a?{path:dr(new Sn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Wt(e))return this;{const t=Gt(e),r=this.children.get(t);return null!==r?r.subtree(Zn(e)):new Yn(null)}}set(e,t){if(Wt(e))return new Yn(t,this.children);{const r=Gt(e),a=(this.children.get(r)||new Yn(null)).set(Zn(e),t),c=this.children.insert(r,a);return new Yn(this.value,c)}}remove(e){if(Wt(e))return this.children.isEmpty()?new Yn(null):new Yn(null,this.children);{const t=Gt(e),r=this.children.get(t);if(r){const i=r.remove(Zn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Yn(null):new Yn(this.value,a)}return this}}get(e){if(Wt(e))return this.value;{const t=Gt(e),r=this.children.get(t);return r?r.get(Zn(e)):null}}setTree(e,t){if(Wt(e))return t;{const r=Gt(e),a=(this.children.get(r)||new Yn(null)).setTree(Zn(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Yn(this.value,c)}}fold(e){return this.fold_(mn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(dr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,mn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Wt(e))return null;{const a=Gt(e),c=this.children.get(a);return c?c.findOnPath_(Zn(e),dr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,mn(),t)}foreachOnPath_(e,t,r){if(Wt(e))return this;{this.value&&r(t,this.value);const i=Gt(e),a=this.children.get(i);return a?a.foreachOnPath_(Zn(e),dr(t,i),r):new Yn(null)}}foreach(e){this.foreach_(mn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(dr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Lu{constructor(e){this.writeTree_=e}static empty(){return new Lu(new Yn(null))}}function QE(n,e,t){if(Wt(e))return new Lu(new Yn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=Fs(i,e);return a=a.updateChild(c,t),new Lu(n.writeTree_.set(i,a))}{const i=new Yn(t),a=n.writeTree_.setTree(e,i);return new Lu(a)}}}function LM(n,e,t){let r=n;return Oi(t,(i,a)=>{r=QE(r,dr(e,i),a)}),r}function UO(n,e){if(Wt(e))return Lu.empty();{const t=n.writeTree_.setTree(e,new Yn(null));return new Lu(t)}}function UM(n,e){return null!=cm(n,e)}function cm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Fs(t.path,e)):null}function VO(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Kn,(r,i)=>{e.push(new Jt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Jt(r,i.value))}),e}function xf(n,e){if(Wt(e))return n;{const t=cm(n,e);return new Lu(null!=t?new Yn(t):n.writeTree_.subtree(e))}}function VM(n){return n.writeTree_.isEmpty()}function Wy(n,e){return BO(mn(),n.writeTree_,e)}function BO(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,O.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=BO(dr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(dr(n,".priority"),r)),t}}function lD(n,e){return HO(e,n)}function Zj(n,e){if(n.snap)return ka(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ka(dr(n.path,t),e))return!0;return!1}function Gj(n){return n.visible}function jO(n,e,t){let r=Lu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let p;if(a.snap)ka(t,c)?(p=Fs(t,c),r=QE(r,p,a.snap)):ka(c,t)&&(p=Fs(c,t),r=QE(r,mn(),a.snap.getChild(p)));else{if(!a.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(ka(t,c))p=Fs(t,c),r=LM(r,p,a.children);else if(ka(c,t))if(p=Fs(c,t),Wt(p))r=LM(r,mn(),a.children);else{const _=(0,O.DV)(a.children,Gt(p));if(_){const E=_.getChild(Zn(p));r=QE(r,mn(),E)}}}}}return r}function qO(n,e,t,r,i){if(r||i){const a=xf(n.visibleWrites,e);return!i&&VM(a)?t:i||null!=t||UM(a,mn())?Wy(jO(n.allWrites,function(E){return(E.visible||i)&&(!r||!~r.indexOf(E.writeId))&&(ka(E.path,e)||ka(e,E.path))},e),t||Vt.EMPTY_NODE):null}{const a=cm(n.visibleWrites,e);if(null!=a)return a;{const c=xf(n.visibleWrites,e);return VM(c)?t:null!=t||UM(c,mn())?Wy(c,t||Vt.EMPTY_NODE):null}}}function cD(n,e,t,r){return qO(n.writeTree,n.treePath,e,t,r)}function BM(n,e){return function Wj(n,e,t){let r=Vt.EMPTY_NODE;const i=cm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Kn,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=xf(n.visibleWrites,e);return t.forEachChild(Kn,(c,p)=>{const _=Wy(xf(a,new Sn(c)),p);r=r.updateImmediateChild(c,_)}),VO(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return VO(xf(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function $O(n,e,t,r){return function zj(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=dr(e,t);if(UM(n.visibleWrites,a))return null;{const c=xf(n.visibleWrites,a);return VM(c)?i.getChild(t):Wy(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function dD(n,e){return function Yj(n,e){return cm(n.visibleWrites,e)}(n.writeTree,dr(n.treePath,e))}function jM(n,e,t){return function Kj(n,e,t,r){const i=dr(e,t),a=cm(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Wy(xf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function ZO(n,e){return HO(dr(n.treePath,e),n.writeTree)}function HO(n,e){return{treePath:n,writeTree:e}}class eq{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,GE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,HE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Zy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,GE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const GO=new class tq{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class qM{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Sf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jM(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:lm(this.viewCache_),a=function Xj(n,e,t,r,i,a){return function Qj(n,e,t,r,i,a,c){let p;const _=xf(n.visibleWrites,e),E=cm(_,mn());if(null!=E)p=E;else{if(null==t)return[];p=Wy(_,t)}if(p=p.withIndex(c),p.isEmpty()||p.isLeafNode())return[];{const A=[],S=c.getCompare(),P=a?p.getReverseIteratorFrom(r,c):p.getIteratorFrom(r,c);let V=P.getNext();for(;V&&A.length<i;)0!==S(V,r)&&A.push(V),V=P.getNext();return A}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function WO(n,e,t,r,i,a){const c=e.eventCache;if(null!=dD(r,t))return e;{let p,_;if(Wt(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=lm(e),S=BM(r,E instanceof Vt?E:Vt.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const E=cD(r,lm(e));p=n.filter.updateFullNode(e.eventCache.getNode(),E,a)}else{const E=Gt(t);if(".priority"===E){(0,O.hu)(1===Af(t),"Can't have a priority with additional path components");const A=c.getNode();_=e.serverCache.getNode();const S=$O(r,t,A,_);p=null!=S?n.filter.updatePriority(A,S):c.getNode()}else{const A=Zn(t);let S;if(c.isCompleteForChild(E)){_=e.serverCache.getNode();const P=$O(r,t,c.getNode(),_);S=null!=P?c.getNode().getImmediateChild(E).updateChild(A,P):c.getNode().getImmediateChild(E)}else S=jM(r,E,e.serverCache);p=null!=S?n.filter.updateChild(c.getNode(),E,S,A,i,a):c.getNode()}}return YE(e,p,c.isFullyInitialized()||Wt(t),n.filter.filtersNodes())}}function hD(n,e,t,r,i,a,c,p){const _=e.serverCache;let E;const A=c?n.filter:n.filter.getIndexedFilter();if(Wt(t))E=A.updateFullNode(_.getNode(),r,null);else if(A.filtersNodes()&&!_.isFiltered()){const V=_.getNode().updateChild(t,r);E=A.updateFullNode(_.getNode(),V,null)}else{const V=Gt(t);if(!_.isCompleteForPath(t)&&Af(t)>1)return e;const G=Zn(t),Te=_.getNode().getImmediateChild(V).updateChild(G,r);E=".priority"===V?A.updatePriority(_.getNode(),Te):A.updateChild(_.getNode(),V,Te,G,GO,null)}const S=LO(e,E,_.isFullyInitialized()||Wt(t),A.filtersNodes());return WO(n,S,t,i,new qM(i,S,a),p)}function $M(n,e,t,r,i,a,c){const p=e.eventCache;let _,E;const A=new qM(i,e,a);if(Wt(t))E=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=YE(e,E,!0,n.filter.filtersNodes());else{const S=Gt(t);if(".priority"===S)E=n.filter.updatePriority(e.eventCache.getNode(),r),_=YE(e,E,p.isFullyInitialized(),p.isFiltered());else{const P=Zn(t),V=p.getNode().getImmediateChild(S);let G;if(Wt(P))G=r;else{const fe=A.getCompleteChild(S);G=null!=fe?".priority"===vM(P)&&fe.getChild(vO(P)).isEmpty()?fe:fe.updateChild(P,r):Vt.EMPTY_NODE}_=V.equals(G)?e:YE(e,n.filter.updateChild(p.getNode(),S,G,P,A,c),p.isFullyInitialized(),n.filter.filtersNodes())}}return _}function zO(n,e){return n.eventCache.isCompleteForChild(e)}function KO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ZM(n,e,t,r,i,a,c,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,_=e;E=Wt(t)?r:new Yn(null).setTree(t,r);const A=e.serverCache.getNode();return E.children.inorderTraversal((S,P)=>{if(A.hasChild(S)){const G=KO(0,e.serverCache.getNode().getImmediateChild(S),P);_=hD(n,_,new Sn(S),G,i,a,c,p)}}),E.children.inorderTraversal((S,P)=>{const V=!e.serverCache.isCompleteForChild(S)&&void 0===P.value;if(!A.hasChild(S)&&!V){const fe=KO(0,e.serverCache.getNode().getImmediateChild(S),P);_=hD(n,_,new Sn(S),fe,i,a,c,p)}}),_}class cq{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new SM(r.getIndex()),a=function Ij(n){return n.loadsAllData()?new SM(n.getIndex()):n.hasLimit()?new bj(n):new WE(n)}(r);this.processor_=function nq(n){return{filter:n}}(a);const c=t.serverCache,p=t.eventCache,_=i.updateFullNode(Vt.EMPTY_NODE,c.getNode(),null),E=a.updateFullNode(Vt.EMPTY_NODE,p.getNode(),null),A=new Sf(_,c.isFullyInitialized(),i.filtersNodes()),S=new Sf(E,p.isFullyInitialized(),a.filtersNodes());this.viewCache_=aD(S,A),this.eventGenerator_=new kj(this.query_)}get query(){return this.query_}}function fq(n,e){const t=lm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Wt(e)&&!t.getImmediateChild(Gt(e)).isEmpty())?t.getChild(e):null}function YO(n){return 0===n.eventRegistrations_.length}function QO(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function JO(n,e,t,r){e.type===Fa.MERGE&&null!==e.source.queryId&&((0,O.hu)(lm(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(uD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function iq(n,e,t,r,i){const a=new eq;let c,p;if(t.type===Fa.OVERWRITE){const E=t;E.source.fromUser?c=$M(n,e,E.path,E.snap,r,i,a):((0,O.hu)(E.source.fromServer,"Unknown source."),p=E.source.tagged||e.serverCache.isFiltered()&&!Wt(E.path),c=hD(n,e,E.path,E.snap,r,i,p,a))}else if(t.type===Fa.MERGE){const E=t;E.source.fromUser?c=function oq(n,e,t,r,i,a,c){let p=e;return r.foreach((_,E)=>{const A=dr(t,_);zO(e,Gt(A))&&(p=$M(n,p,A,E,i,a,c))}),r.foreach((_,E)=>{const A=dr(t,_);zO(e,Gt(A))||(p=$M(n,p,A,E,i,a,c))}),p}(n,e,E.path,E.children,r,i,a):((0,O.hu)(E.source.fromServer,"Unknown source."),p=E.source.tagged||e.serverCache.isFiltered(),c=ZM(n,e,E.path,E.children,r,i,p,a))}else if(t.type===Fa.ACK_USER_WRITE){const E=t;c=E.revert?function lq(n,e,t,r,i,a){let c;if(null!=dD(r,t))return e;{const p=new qM(r,e,i),_=e.eventCache.getNode();let E;if(Wt(t)||".priority"===Gt(t)){let A;if(e.serverCache.isFullyInitialized())A=cD(r,lm(e));else{const S=e.serverCache.getNode();(0,O.hu)(S instanceof Vt,"serverChildren would be complete if leaf node"),A=BM(r,S)}A=A,E=n.filter.updateFullNode(_,A,a)}else{const A=Gt(t);let S=jM(r,A,e.serverCache);null==S&&e.serverCache.isCompleteForChild(A)&&(S=_.getImmediateChild(A)),E=null!=S?n.filter.updateChild(_,A,S,Zn(t),p,a):e.eventCache.getNode().hasChild(A)?n.filter.updateChild(_,A,Vt.EMPTY_NODE,Zn(t),p,a):_,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=cD(r,lm(e)),c.isLeafNode()&&(E=n.filter.updateFullNode(E,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=dD(r,mn()),YE(e,E,c,n.filter.filtersNodes())}}(n,e,E.path,r,i,a):function aq(n,e,t,r,i,a,c){if(null!=dD(i,t))return e;const p=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Wt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return hD(n,e,t,_.getNode().getChild(t),i,a,p,c);if(Wt(t)){let E=new Yn(null);return _.getNode().forEachChild(sc,(A,S)=>{E=E.set(new Sn(A),S)}),ZM(n,e,t,E,i,a,p,c)}return e}{let E=new Yn(null);return r.foreach((A,S)=>{const P=dr(t,A);_.isCompleteForPath(P)&&(E=E.set(A,_.getNode().getChild(P)))}),ZM(n,e,t,E,i,a,p,c)}}(n,e,E.path,E.affectedTree,r,i,a)}else{if(t.type!==Fa.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);c=function uq(n,e,t,r,i){const a=e.serverCache;return WO(n,LO(e,a.getNode(),a.isFullyInitialized()||Wt(t),a.isFiltered()),t,r,GO,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function sq(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=uD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(PO(uD(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,i,e,t,r);return function rq(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,O.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,XO(n,a.changes,a.viewCache.eventCache.getNode(),null)}function XO(n,e,t,r){return function Fj(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function Cj(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),KE(n,i,"child_removed",e,r,t),KE(n,i,"child_added",e,r,t),KE(n,i,"child_moved",a,r,t),KE(n,i,"child_changed",e,r,t),KE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let fD,gD;class ek{constructor(){this.views=new Map}}function HM(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,O.hu)(null!=a,"SyncTree gave us an op for an invalid query."),JO(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(JO(c,e,t,r));return a}}function tk(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let p=cD(t,i?r:null),_=!1;p?_=!0:r instanceof Vt?(p=BM(t,r),_=!1):(p=Vt.EMPTY_NODE,_=!1);const E=aD(new Sf(p,_,!1),new Sf(r,i,!1));return new cq(e,E)}return c}function nk(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Mf(n,e){let t=null;for(const r of n.views.values())t=t||fq(r,e);return t}function rk(n,e){return e._queryParams.loadsAllData()?pD(n):n.views.get(e._queryIdentifier)}function ik(n,e){return null!=rk(n,e)}function Rf(n){return null!=pD(n)}function pD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let bq=1;class sk{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Yn(null),this.pendingWriteTree_=function Jj(){return{visibleWrites:Lu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function GM(n,e,t,r,i){return function Bj(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=QE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?zy(n,new um({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Nf(n,e,t=!1){const r=function qj(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function $j(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const p=n.allWrites[c];p.visible&&(c>=t&&Zj(p,r.path)?i=!1:ka(r.path,p.path)&&(a=!0)),c--}return!!i&&(a?(function Hj(n){n.visibleWrites=jO(n.allWrites,Gj,mn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=UO(n.visibleWrites,r.path):Oi(r.children,_=>{n.visibleWrites=UO(n.visibleWrites,dr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Yn(null);return null!=r.snap?a=a.set(mn(),!0):Oi(r.children,c=>{a=a.set(new Sn(c),!0)}),zy(n,new oD(r.path,a,t))}return[]}function JE(n,e,t){return zy(n,new um({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function WM(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let c=[];if(a&&("default"===e._queryIdentifier||ik(a,e))){const p=function wq(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const p=Rf(n);if("default"===i)for(const[_,E]of n.views.entries())c=c.concat(QO(E,t,r)),YO(E)&&(n.views.delete(_),E.query._queryParams.loadsAllData()||a.push(E.query));else{const _=n.views.get(i);_&&(c=c.concat(QO(_,t,r)),YO(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return p&&!Rf(n)&&a.push(new(function _q(){return(0,O.hu)(fD,"Reference.ts has not been loaded"),fD}())(e._repo,e._path)),{removed:a,events:c}}(a,e,t,r);(function yq(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=p.removed;c=p.events;const E=-1!==_.findIndex(S=>S._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(i,(S,P)=>Rf(P));if(E&&!A){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const P=function Rq(n){return n.fold((e,t,r)=>{if(t&&Rf(t))return[pD(t)];{let i=[];return t&&(i=nk(t)),Oi(r,(a,c)=>{i=i.concat(c)}),i}})}(S);for(let V=0;V<P.length;++V){const G=P[V],fe=G.query,Te=lk(n,G);n.listenProvider_.startListening(XE(fe),_D(n,fe),Te.hashFn,Te.onComplete)}}}!A&&_.length>0&&!r&&(E?n.listenProvider_.stopListening(XE(e),null):_.forEach(S=>{const P=n.queryToTagMap.get(yD(S));n.listenProvider_.stopListening(XE(S),P)})),function Nq(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=yD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return c}function ok(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,P)=>{const V=Fs(S,r);i=i||Mf(P,V),a=a||Rf(P)});let p,c=n.syncPointTree_.get(r);c?(a=a||Rf(c),i=i||Mf(c,mn())):(c=new ek,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=i?p=!0:(p=!1,i=Vt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,V)=>{const G=Mf(V,mn());G&&(i=i.updateImmediateChild(P,G))}));const _=ik(c,e);if(!_&&!e._queryParams.loadsAllData()){const S=yD(e);(0,O.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const P=function Pq(){return bq++}();n.queryToTagMap.set(S,P),n.tagToQueryMap.set(P,S)}let A=function vq(n,e,t,r,i,a){const c=tk(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function pq(n,e){n.eventRegistrations_.push(e)}(c,t),function gq(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Kn,(a,c)=>{r.push(Zy(a,c))}),t.isFullyInitialized()&&r.push(PO(t.getNode())),XO(n,r,t.getNode(),e)}(c,t)}(c,e,t,lD(n.pendingWriteTree_,r),i,p);if(!_&&!a){const S=rk(c,e);A=A.concat(function Oq(n,e,t){const r=e._path,i=_D(n,e),a=lk(n,t),c=n.listenProvider_.startListening(XE(e),i,a.hashFn,a.onComplete),p=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!Rf(p.value),"If we're adding a query, it shouldn't be shadowed");else{const _=p.fold((E,A,S)=>{if(!Wt(E)&&A&&Rf(A))return[pD(A).query];{let P=[];return A&&(P=P.concat(nk(A).map(V=>V.query))),Oi(S,(V,G)=>{P=P.concat(G)}),P}});for(let E=0;E<_.length;++E){const A=_[E];n.listenProvider_.stopListening(XE(A),_D(n,A))}}return c}(n,e,S))}return A}function mD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,p)=>{const E=Mf(p,Fs(c,e));if(E)return E});return qO(i,e,a,t,!0)}function zy(n,e){return ak(e,n.syncPointTree_,null,lD(n.pendingWriteTree_,mn()))}function ak(n,e,t,r){if(Wt(n.path))return uk(n,e,t,r);{const i=e.get(mn());null==t&&null!=i&&(t=Mf(i,mn()));let a=[];const c=Gt(n.path),p=n.operationForChild(c),_=e.children.get(c);if(_&&p){const E=t?t.getImmediateChild(c):null,A=ZO(r,c);a=a.concat(ak(p,_,E,A))}return i&&(a=a.concat(HM(i,n,r,t))),a}}function uk(n,e,t,r){const i=e.get(mn());null==t&&null!=i&&(t=Mf(i,mn()));let a=[];return e.children.inorderTraversal((c,p)=>{const _=t?t.getImmediateChild(c):null,E=ZO(r,c),A=n.operationForChild(c);A&&(a=a.concat(uk(A,p,_,E)))}),i&&(a=a.concat(HM(i,n,r,t))),a}function lk(n,e){const t=e.query,r=_D(n,t);return{hashFn:()=>(function dq(n){return n.viewCache_.serverCache.getNode()}(e)||Vt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Aq(n,e,t){const r=zM(n,t);if(r){const i=KM(r),a=i.path,c=i.queryId,p=Fs(a,e);return YM(n,a,new zE(kM(c),p))}return[]}(n,t._path,r):function Dq(n,e){return zy(n,new zE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function IB(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return WM(n,t,null,a)}}}}function _D(n,e){const t=yD(e);return n.queryToTagMap.get(t)}function yD(n){return n._path.toString()+"$"+n._queryIdentifier}function zM(n,e){return n.tagToQueryMap.get(e)}function KM(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Sn(n.substr(0,e))}}function YM(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),HM(r,t,lD(n.pendingWriteTree_,e),null)}function XE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Cq(){return(0,O.hu)(gD,"Reference.ts has not been loaded"),gD}())(n._repo,n._path):n}class QM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new QM(t)}node(){return this.node_}}class JM{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=dr(this.path_,e);return new JM(this.syncTree_,t)}node(){return mD(this.syncTree_,this.path_)}}const ck=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Fq(n[".sv"],e,t):"object"==typeof n[".sv"]?Lq(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Fq=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},Lq=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},dk=function(n,e,t,r){return eR(e,new JM(t,n),r)},XM=function(n,e,t){return eR(n,new QM(e),t)};function eR(n,e,t){const r=n.getPriority().val(),i=ck(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,p=ck(c.getValue(),e,t);return p!==c.getValue()||i!==c.getPriority().val()?new jy(p,Cr(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new jy(i))),c.forEachChild(Kn,(p,_)=>{const E=eR(_,e.getImmediateChild(p),t);E!==_&&(a=a.updateImmediateChild(p,E))}),a}}class tR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function vD(n,e){let t=e instanceof Sn?e:new Sn(e),r=n,i=Gt(t);for(;null!==i;){const a=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new tR(i,r,a),t=Zn(t),i=Gt(t)}return r}function dm(n){return n.node.value}function nR(n,e){n.node.value=e,rR(n)}function hk(n){return n.node.childCount>0}function wD(n,e){Oi(n.node.children,(t,r)=>{e(new tR(t,n,r))})}function fk(n,e,t,r){t&&!r&&e(n),wD(n,i=>{fk(i,e,!0,r)}),t&&r&&e(n)}function eC(n){return new Sn(null===n.parent?n.name:eC(n.parent)+"/"+n.name)}function rR(n){null!==n.parent&&function Bq(n,e,t){const r=function Uq(n){return void 0===dm(n)&&!hk(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,rR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,rR(n))}(n.parent,n.name,n)}const jq=/[\[\].#$\/\u0000-\u001F\u007F]/,qq=/[\[\].#$\u0000-\u001F\u007F]/,iR=10485760,ED=function(n){return"string"==typeof n&&0!==n.length&&!jq.test(n)},pk=function(n){return"string"==typeof n&&0!==n.length&&!qq.test(n)},tC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!zT(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},oc=function(n,e,t,r){r&&void 0===e||nC((0,O.gK)(n,"value"),e,t)},nC=function(n,e,t){const r=t instanceof Sn?new nj(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+om(r));if("function"==typeof e)throw new Error(n+"contains a function "+om(r)+" with contents = "+e.toString());if(zT(e))throw new Error(n+"contains "+e.toString()+" "+om(r));if("string"==typeof e&&e.length>iR/3&&(0,O.ug)(e)>iR)throw new Error(n+"contains a string greater than "+iR+" utf8 bytes "+om(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Oi(e,(c,p)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!ED(c)))throw new Error(n+" contains an invalid key ("+c+") "+om(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function rj(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),wO(n)})(r,c),nC(n,p,r),function ij(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+om(r)+" in addition to actual children.")}},gk=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Oi(e,(c,p)=>{const _=new Sn(c);if(nC(i,p,dr(t,_)),".priority"===vM(_)&&!tC(p))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=jE(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!ED(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(tj);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ka(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},sR=function(n,e,t){if(!t||void 0!==e){if(zT(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!tC(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rC=function(n,e,t,r){if(!(r&&void 0===t||ED(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},iC=function(n,e,t,r){if(!(r&&void 0===t||pk(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},La=function(n,e){if(".info"===Gt(e))throw new Error(n+" failed = Can't modify data under /.info/")},mk=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ED(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),pk(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Gq{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function CD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!wM(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function oR(n,e,t){CD(n,t),_k(n,r=>wM(r,e))}function Ua(n,e,t){CD(n,t),_k(n,r=>ka(r,e)||ka(e,r))}function _k(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Wq(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Wq(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();im&&Pi("event: "+t.toString()),Vy(r)}}}const yk="repo_interrupt";class Kq{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Gq,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sD(),this.transactionQueueTree_=new tR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function vk(n){const t=n.infoData_.getNode(new Sn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function sC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:vk(n)})}function wk(n,e,t,r,i){n.dataUpdateCount++;const a=new Sn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const _=(0,O.UI)(t,E=>Cr(E));c=function xq(n,e,t,r){const i=zM(n,r);if(i){const a=KM(i),c=a.path,p=a.queryId,_=Fs(c,e),E=Yn.fromObject(t);return YM(n,c,new Gy(kM(p),_,E))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=Cr(t);c=function Sq(n,e,t,r){const i=zM(n,r);if(null!=i){const a=KM(i),c=a.path,p=a.queryId,_=Fs(c,e);return YM(n,c,new um(kM(p),_,t))}return[]}(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,O.UI)(t,E=>Cr(E));c=function Tq(n,e,t){const r=Yn.fromObject(t);return zy(n,new Gy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=Cr(t);c=JE(n.serverSyncTree_,a,_)}let p=a;c.length>0&&(p=Yy(n,a)),Ua(n.eventQueue_,p,c)}function Ek(n,e){aR(n,"connected",e),!1===e&&function e$(n){Ky(n,"onDisconnectEvents");const e=sC(n),t=sD();NM(n.onDisconnect_,mn(),(i,a)=>{const c=dk(i,a,n.serverSyncTree_,e);Hy(t,i,c)});let r=[];NM(t,mn(),(i,a)=>{r=r.concat(JE(n.serverSyncTree_,i,a));const c=dR(n,i);Yy(n,c)}),n.onDisconnect_=sD(),Ua(n.eventQueue_,mn(),r)}(n)}function aR(n,e,t){const r=new Sn("/.info/"+e),i=Cr(t);n.infoData_.updateSnapshot(r,i);const a=JE(n.infoSyncTree_,r,i);Ua(n.eventQueue_,r,a)}function bD(n){return n.nextWriteId_++}function uR(n,e,t,r,i){Ky(n,"set",{path:e.toString(),value:t,priority:r});const a=sC(n),c=Cr(t,r),p=mD(n.serverSyncTree_,e),_=XM(c,p,a),E=bD(n),A=GM(n.serverSyncTree_,e,_,E,!0);CD(n.eventQueue_,A),n.server_.put(e.toString(),c.val(!0),(P,V)=>{const G="ok"===P;G||ks("set at "+e+" failed: "+P);const fe=Nf(n.serverSyncTree_,E,!G);Ua(n.eventQueue_,e,fe),Pf(0,i,P,V)});const S=dR(n,e);Yy(n,S),Ua(n.eventQueue_,S,[])}function t$(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&RM(n.onDisconnect_,e),Pf(0,t,r,i)})}function Ck(n,e,t,r){const i=Cr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&Hy(n.onDisconnect_,e,i),Pf(0,r,a,c)})}function lR(n,e,t){let r;r=".info"===Gt(e._path)?WM(n.infoSyncTree_,e,t):WM(n.serverSyncTree_,e,t),oR(n.eventQueue_,e._path,r)}function bk(n){n.persistentConnection_&&n.persistentConnection_.interrupt(yk)}function Ky(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Pi(t,...e)}function Pf(n,e,t,r){e&&Vy(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function cR(n,e,t){return mD(n.serverSyncTree_,e,t)||Vt.EMPTY_NODE}function ID(n,e=n.transactionQueueTree_){if(e||TD(n,e),dm(e)){const t=Tk(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function a$(n,e,t){const r=t.map(E=>E.currentWriteId),i=cR(n,e,r);let a=i;const c=i.hash();for(let E=0;E<t.length;E++){const A=t[E];(0,O.hu)(0===A.status,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;const S=Fs(e,A.path);a=a.updateChild(S,A.currentOutputSnapshotRaw)}const p=a.val(!0),_=e;n.server_.put(_.toString(),p,E=>{Ky(n,"transaction put response",{path:_.toString(),status:E});let A=[];if("ok"===E){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,A=A.concat(Nf(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();TD(n,vD(n.transactionQueueTree_,e)),ID(n,n.transactionQueueTree_),Ua(n.eventQueue_,e,A);for(let P=0;P<S.length;P++)Vy(S[P])}else{if("datastale"===E)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ks("transaction at "+_.toString()+" failed: "+E);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=E}Yy(n,e)}},c)}(n,eC(e),t)}else hk(e)&&wD(e,t=>{ID(n,t)})}function Yy(n,e){const t=Ik(n,e),r=eC(t);return function u$(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const _=e[p],E=Fs(t,_.path);let S,A=!1;if((0,O.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)A=!0,S=_.abortReason,i=i.concat(Nf(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)A=!0,S="maxretry",i=i.concat(Nf(n.serverSyncTree_,_.currentWriteId,!0));else{const P=cR(n,_.path,c);_.currentInputSnapshot=P;const V=e[p].update(P.val());if(void 0!==V){nC("transaction failed: Data returned ",V,_.path);let G=Cr(V);"object"==typeof V&&null!=V&&(0,O.r3)(V,".priority")||(G=G.updatePriority(P.getPriority()));const Te=_.currentWriteId,dt=sC(n),ze=XM(G,P,dt);_.currentOutputSnapshotRaw=G,_.currentOutputSnapshotResolved=ze,_.currentWriteId=bD(n),c.splice(c.indexOf(Te),1),i=i.concat(GM(n.serverSyncTree_,_.path,ze,_.currentWriteId,_.applyLocally)),i=i.concat(Nf(n.serverSyncTree_,Te,!0))}else A=!0,S="nodata",i=i.concat(Nf(n.serverSyncTree_,_.currentWriteId,!0))}Ua(n.eventQueue_,t,i),i=[],A&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===S?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(S),!1,null)))}TD(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)Vy(r[p]);ID(n,n.transactionQueueTree_)}(n,Tk(n,t),r),r}function Ik(n,e){let t,r=n.transactionQueueTree_;for(t=Gt(e);null!==t&&void 0===dm(r);)r=vD(r,t),t=Gt(e=Zn(e));return r}function Tk(n,e){const t=[];return Dk(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Dk(n,e,t){const r=dm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);wD(e,i=>{Dk(n,i,t)})}function TD(n,e){const t=dm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,nR(e,t.length>0?t:void 0)}wD(e,r=>{TD(n,r)})}function dR(n,e){const t=eC(Ik(n,e)),r=vD(n.transactionQueueTree_,e);return function Vq(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{hR(n,i)}),hR(n,r),fk(r,i=>{hR(n,i)}),t}function hR(n,e){const t=dm(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,O.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,O.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Nf(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?nR(e,void 0):t.length=a+1,Ua(n.eventQueue_,eC(e),i);for(let c=0;c<r.length;c++)Vy(r[c])}}const fR=function(n,e){const t=d$(n),r=t.namespace;return"firebase.com"===t.domain&&rc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&rc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ks("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new hM(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new Sn(t.pathString)}},d$=function(n){let e="",t="",r="",i="",a="",c=!0,p="https",_=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(p=n.substring(0,E-1),n=n.substring(E+2));let A=n.indexOf("/");-1===A&&(A=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(A,S)),A<S&&(i=function l$(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(A,S)));const P=function c$(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ks(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));E=e.indexOf(":"),E>=0?(c="https"===p||"wss"===p,_=parseInt(e.substring(E+1),10)):E=e.length;const V=e.slice(0,E);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const G=e.indexOf(".");r=e.substring(0,G).toLowerCase(),t=e.substring(G+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:p,pathString:i,namespace:a}};class Ak{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Pz)(this.snapshot.exportVal())}}class Sk{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class xk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Mk{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return t$(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){La("OnDisconnect.remove",this._path);const e=new O.BH;return Ck(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){La("OnDisconnect.set",this._path),oc("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return Ck(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){La("OnDisconnect.setWithPriority",this._path),oc("OnDisconnect.setWithPriority",e,this._path,!1),sR("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function n$(n,e,t,r,i){const a=Cr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,p)=>{"ok"===c&&Hy(n.onDisconnect_,e,a),Pf(0,i,c,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){La("OnDisconnect.update",this._path),gk("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function r$(n,e,t,r){if((0,O.xb)(t))return Pi("onDisconnect().update() called with empty data.  Don't do anything."),void Pf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Oi(t,(c,p)=>{const _=Cr(p);Hy(n.onDisconnect_,dr(e,c),_)}),Pf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class mo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Wt(this._path)?null:vM(this._path)}get ref(){return new Va(this._repo,this._path)}get _queryIdentifier(){const e=kO(this._queryParams),t=lM(e);return"{}"===t?"default":t}get _queryObject(){return kO(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof mo))return!1;const t=this._repo===e._repo,r=wM(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ej(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function DD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Of(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===sc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Fd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==ic)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Kn){if(null!=e&&!tC(e)||null!=t&&!tC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof TM||n.getIndex()===DM,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function AD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Va extends mo{constructor(e,t){super(e,t,new nD,!1)}get parent(){const e=vO(this._path);return null===e?null:new Va(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class hm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Sn(e),r=fm(this.ref,e);return new hm(this._node.getChild(t),r,Kn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new hm(i,fm(this.ref,r),Kn)))}hasChild(e){const t=new Sn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Rk(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?fm(n._root,e):n._root}function Nk(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=fR(e,n._repo.repoInfo_.nodeAdmin);mk("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&rc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Rk(n,t.path.toString())}function fm(n,e){return null===Gt((n=(0,O.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),iC("child","path",t,!1)):iC("child","path",e,!1),new Va(n._repo,dr(n._path,e));var t}function pR(n,e){n=(0,O.m9)(n),La("set",n._path),oc("set",e,n._path,!1);const t=new O.BH;return uR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function m$(n,e){gk("update",e,n._path,!1);const t=new O.BH;return function Xq(n,e,t,r){Ky(n,"update",{path:e.toString(),value:t});let i=!0;const a=sC(n),c={};if(Oi(t,(p,_)=>{i=!1,c[p]=dk(dr(e,p),Cr(_),n.serverSyncTree_,a)}),i)Pi("update() called with empty data.  Don't do anything."),Pf(0,r,"ok",void 0);else{const p=bD(n),_=function Iq(n,e,t,r){!function jj(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=LM(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Yn.fromObject(t);return zy(n,new Gy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,p);CD(n.eventQueue_,_),n.server_.merge(e.toString(),t,(E,A)=>{const S="ok"===E;S||ks("update at "+e+" failed: "+E);const P=Nf(n.serverSyncTree_,p,!S),V=P.length>0?Yy(n,e):e;Ua(n.eventQueue_,V,P),Pf(0,r,E,A)}),Oi(t,E=>{const A=dR(n,dr(e,E));Yy(n,A)}),Ua(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function _$(n){return function Jq(n,e){const t=function Mq(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(E,A)=>{const S=Fs(E,t);r=r||Mf(A,S)});let i=n.syncPointTree_.get(t);i?r=r||Mf(i,mn()):(i=new ek,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new Sf(r,!0,!1):null;return function hq(n){return uD(n.viewCache_)}(tk(i,e,lD(n.pendingWriteTree_,e._path),a?c.getNode():Vt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Cr(r).withIndex(e._queryParams.getIndex()),a=JE(n.serverSyncTree_,e._path,i);return oR(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(Ky(n,"get for query "+(0,O.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,O.m9)(n))._repo,n).then(e=>new hm(e,new Va(n._repo,n._path),n._queryParams.getIndex()))}class SD{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Ak("value",this,new hm(e.snapshotNode,new Va(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Sk(this,e,t):null}matches(e){return e instanceof SD&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class xD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Sk(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=fm(new Va(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Ak(e.type,this,new hm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof xD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function oC(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,E=(A,S)=>{lR(n._repo,n,p),_(A,S)};E.userCallback=t.userCallback,E.context=t.context,t=E}const c=new xk(t,a||void 0),p="value"===e?new SD(c):new xD(e,c);return function i$(n,e,t){let r;r=".info"===Gt(e._path)?ok(n.infoSyncTree_,e,t):ok(n.serverSyncTree_,e,t),oR(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>lR(n._repo,n,p)}function gR(n,e,t,r){return oC(n,"value",e,t,r)}function Pk(n,e,t,r){return oC(n,"child_added",e,t,r)}function Ok(n,e,t,r){return oC(n,"child_changed",e,t,r)}function kk(n,e,t,r){return oC(n,"child_moved",e,t,r)}function Fk(n,e,t,r){return oC(n,"child_removed",e,t,r)}function Lk(n,e,t){let r=null;const i=t?new xk(t):null;"value"===e?r=new SD(i):e&&(r=new xD(e,i)),lR(n._repo,n,r)}class Uu{}class Uk extends Uu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){oc("endAt",this._value,e._path,!0);const t=MM(e._queryParams,this._value,this._key);if(AD(t),Of(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mo(e._repo,e._path,t,e._orderByCalled)}}class v$ extends Uu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){oc("endBefore",this._value,e._path,!1);const t=function Sj(n,e,t){let r,i;return n.index_===sc?("string"==typeof e&&(e=NO(e)),i=MM(n,e,t)):(r=null==t?Fd:NO(t),i=MM(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(AD(t),Of(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mo(e._repo,e._path,t,e._orderByCalled)}}class Vk extends Uu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){oc("startAt",this._value,e._path,!0);const t=xM(e._queryParams,this._value,this._key);if(AD(t),Of(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new mo(e._repo,e._path,t,e._orderByCalled)}}class C$ extends Uu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){oc("startAfter",this._value,e._path,!1);const t=function Aj(n,e,t){let r;if(n.index_===sc)"string"==typeof e&&(e=RO(e)),r=xM(n,e,t);else{let i;i=null==t?ic:RO(t),r=xM(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(AD(t),Of(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new mo(e._repo,e._path,t,e._orderByCalled)}}class I$ extends Uu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new mo(e._repo,e._path,function Tj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class D$ extends Uu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new mo(e._repo,e._path,function Dj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class S$ extends Uu{constructor(e){super(),this._path=e}_apply(e){DD(e,"orderByChild");const t=new Sn(this._path);if(Wt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new TM(t),i=rD(e._queryParams,r);return Of(i),new mo(e._repo,e._path,i,!0)}}class M$ extends Uu{_apply(e){DD(e,"orderByKey");const t=rD(e._queryParams,sc);return Of(t),new mo(e._repo,e._path,t,!0)}}class N$ extends Uu{_apply(e){DD(e,"orderByPriority");const t=rD(e._queryParams,Kn);return Of(t),new mo(e._repo,e._path,t,!0)}}class O$ extends Uu{_apply(e){DD(e,"orderByValue");const t=rD(e._queryParams,DM);return Of(t),new mo(e._repo,e._path,t,!0)}}class F$ extends Uu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(oc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Uk(this._value,this._key)._apply(new Vk(this._value,this._key)._apply(e))}}function Vu(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function mq(n){(0,O.hu)(!fD,"__referenceConstructor has already been defined"),fD=n})(Va),function Eq(n){(0,O.hu)(!gD,"__referenceConstructor has already been defined"),gD=n}(Va);const mR={};function jk(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||rc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,E,c=fR(a,i),p=c.repoInfo;"undefined"!=typeof process&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(_=!0,a=`http://${E}?ns=${p.namespace}`,c=fR(a,i),p=c.repoInfo):_=!c.repoInfo.secure;const A=i&&_?new UE(UE.OWNER):new SB(n.name,n.options,e);mk("Invalid Firebase Database URL",c),Wt(c.path)||rc("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function j$(n,e,t,r){let i=mR[e.name];i||(i={},mR[e.name]=i);let a=i[n.toURLString()];return a&&rc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Kq(n,false,t,r),i[n.toURLString()]=a,a}(p,n,A,new AB(n.name,t));return new $$(S,n)}class $${constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Yq(n,e,t){if(n.stats_=gM(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new iD(n.repoInfo_,(r,i,a,c)=>{wk(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Ek(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new am(n.repoInfo_,e,(r,i,a,c)=>{wk(n,r,i,a,c)},r=>{Ek(n,r)},r=>{!function Qq(n,e){Oi(e,(t,r)=>{aR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function NB(n,e){const t=n.toString();return pM[t]||(pM[t]=e()),pM[t]}(n.repoInfo_,()=>new Oj(n.stats_,n.server_)),n.infoData_=new xj,n.infoSyncTree_=new sk({startListening:(r,i,a,c)=>{let p=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(p=JE(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),p},stopListening:()=>{}}),aR(n,"connected",!1),n.serverSyncTree_=new sk({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(p,_)=>{const E=c(p,_);Ua(n.eventQueue_,r._path,E)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Va(this._repo,mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function B$(n,e){const t=mR[e];(!t||t[n.key]!==n)&&rc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),bk(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&rc("Cannot call "+e+" on a deleted database.")}}function W$(n,e){$P(n,e)}const K$={".sv":"timestamp"};class J${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}am.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},am.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function z$(n){UP(Qi.SDK_VERSION),(0,Qi._registerComponent)(new ko.wA("database",(e,{instanceIdentifier:t})=>jk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Qi.registerVersion)(FP,"0.12.7",n),(0,Qi.registerVersion)(FP,"0.12.7","esm2017")}();const nZ=new wr.Yd("@firebase/database-compat"),qk=function(n){nZ.warn("FIREBASE WARNING: "+n)};class sZ{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,qk("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class oZ{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class kf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),iC("DataSnapshot.child","path",e,!1),new kf(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),iC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new kf(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ho(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ts{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const c=ts.getCancelAndContextArgs_("Query.on",r,i),p=(E,A)=>{t.call(c.context,new kf(this.database,E),A)};p.userCallback=t,p.context=c.context;const _=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return gR(this._delegate,p,_),t;case"child_added":return Pk(this._delegate,p,_),t;case"child_removed":return Fk(this._delegate,p,_),t;case"child_changed":return Ok(this._delegate,p,_),t;case"child_moved":return kk(this._delegate,p,_),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Lk(this._delegate,e,i)}else Lk(this._delegate,e)}get(){return _$(this._delegate).then(e=>new kf(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const a=ts.getCancelAndContextArgs_("Query.once",r,i),c=new O.BH,p=(E,A)=>{const S=new kf(this.database,E);t&&t.call(a.context,S,A),c.resolve(S)};p.userCallback=t,p.context=a.context;const _=E=>{a.cancel&&a.cancel.call(a.context,E),c.reject(E)};switch(e){case"value":gR(this._delegate,p,_,{onlyOnce:!0});break;case"child_added":Pk(this._delegate,p,_,{onlyOnce:!0});break;case"child_removed":Fk(this._delegate,p,_,{onlyOnce:!0});break;case"child_changed":Ok(this._delegate,p,_,{onlyOnce:!0});break;case"child_moved":kk(this._delegate,p,_,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new ts(this.database,Vu(this._delegate,function T$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new I$(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new ts(this.database,Vu(this._delegate,function A$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new D$(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new ts(this.database,Vu(this._delegate,function x$(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return iC("orderByChild","path",n,!1),new S$(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new ts(this.database,Vu(this._delegate,function R$(){return new M$}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new ts(this.database,Vu(this._delegate,function P$(){return new N$}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new ts(this.database,Vu(this._delegate,function k$(){return new O$}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new ts(this.database,Vu(this._delegate,function E$(n=null,e){return rC("startAt","key",e,!0),new Vk(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new ts(this.database,Vu(this._delegate,function b$(n,e){return rC("startAfter","key",e,!0),new C$(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new ts(this.database,Vu(this._delegate,function y$(n,e){return rC("endAt","key",e,!0),new Uk(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new ts(this.database,Vu(this._delegate,function w$(n,e){return rC("endBefore","key",e,!0),new v$(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new ts(this.database,Vu(this._delegate,function L$(n,e){return rC("equalTo","key",e,!0),new F$(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ts))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ho(this.database,new Va(this._delegate._repo,this._delegate._path))}}class Ho extends ts{constructor(e,t){super(e,new mo(t._repo,t._path,new nD,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ho(this.database,fm(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ho(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new Ho(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=pR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,qk("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}La("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=m$(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function g$(n,e,t){if(La("setWithPriority",n._path),oc("setWithPriority",e,n._path,!1),sR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return uR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function f$(n){return La("remove",n._path),pR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function X$(n,e,t){var r;if(n=(0,O.m9)(n),La("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new O.BH,p=gR(n,()=>{});return function o$(n,e,t,r,i,a){Ky(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:BP(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=cR(n,e,void 0);c.currentInputSnapshot=p;const _=c.update(p.val());if(void 0===_)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{nC("transaction failed: Data returned ",_,c.path),c.status=0;const E=vD(n.transactionQueueTree_,e),A=dm(E)||[];let S;A.push(c),nR(E,A),"object"==typeof _&&null!==_&&(0,O.r3)(_,".priority")?(S=(0,O.DV)(_,".priority"),(0,O.hu)(tC(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(mD(n.serverSyncTree_,e)||Vt.EMPTY_NODE).getPriority().val();const P=sC(n),V=Cr(_,S),G=XM(V,p,P);c.currentOutputSnapshotRaw=V,c.currentOutputSnapshotResolved=G,c.currentWriteId=bD(n);const fe=GM(n.serverSyncTree_,e,G,c.currentWriteId,c.applyLocally);Ua(n.eventQueue_,e,fe),ID(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,E,A)=>{let S=null;_?a.reject(_):(S=new hm(A,new Va(n._repo,n._path),Kn),a.resolve(new J$(E,S)))},p,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new oZ(a.committed,new kf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function p$(n,e){n=(0,O.m9)(n),La("setPriority",n._path),sR("setPriority",e,!1);const t=new O.BH;return uR(n._repo,dr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function h$(n,e){n=(0,O.m9)(n),La("push",n._path),oc("push",e,n._path,!0);const t=vk(n._repo),r=Ej(t),i=fm(n,r),a=fm(n,r);let c;return c=null!=e?pR(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new Ho(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new Ho(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return La("Reference.onDisconnect",this._delegate._path),new sZ(new Mk(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class aC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function Z$(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&rc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&rc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new UE(UE.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);a=new UE(c)}!function V$(n,e,t,r){n.repoInfo_=new hM(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof Ho){const t=Nk(this._delegate,e.toString());return new Ho(this,t)}{const t=Rk(this._delegate,e);return new Ho(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=Nk(this._delegate,e);return new Ho(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function H$(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),bk(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function G$(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function s$(n){n.persistentConnection_&&n.persistentConnection_.resume(yk)}(n._repo)}(this._delegate)}}aC.ServerValue={TIMESTAMP:function Y$(){return K$}(),increment:n=>function Q$(n){return{".sv":{increment:n}}}(n)};var uZ=Object.freeze({__proto__:null,initStandalone:function aZ({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){UP(t);const c=new ko.zt("auth-internal",new ko.H0("database-standalone"));return c.setComponent(new ko.wA("auth-internal",()=>r,"PRIVATE")),{instance:new aC(jk(n,c,void 0,e,a),n),namespace:i}}});const lZ=aC.ServerValue;function $k(n){return null==n}function Zk(n){return"function"==typeof n.set}function Hk(n,e){return Zk(e)?e:n.ref(e)}function Gk(n,e){if(function dZ(n){return"string"==typeof n}(n))return e.stringCase();if(Zk(n))return e.firebaseCase();if(function hZ(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function uC(n,e,t="on",r=Tv.z){return new tr.y(i=>{let a=null;return a=n[t](e,(c,p)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:p})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,Dt.U)(i=>{const{snapshot:a,prevKey:c}=i;let p=null;return a.exists()&&(p=a.key),{type:e,payload:a,prevKey:c,key:p}}),(0,g1.B)())}function Wk(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function gZ(n,e){const{payload:t,prevKey:r,key:i}=e,a=Wk(n,i),c=function pZ(n,e){if($k(e))return 0;{const t=Wk(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(_=>{const E={payload:_,type:"value",prevKey:p,key:_.key};return p=_.key,n=[...n,E],!1})}return n;case"child_added":if(a>-1){const p=n[a-1];(p&&p.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===i?e:p);case"child_moved":if(a>-1){const p=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,p),n}return n;default:return n}}function zk(n){return($k(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Kk(n,e,t){return function fZ(n,e,t){return uC(n,"value","once",t).pipe(Dn(r=>{const i=[gt(r)];return e.forEach(a=>i.push(uC(n,a,"on",t))),(0,JS.T)(...i).pipe(ss(gZ,[]))}),Zm())}(n,e=zk(e),t)}function Yk(n,e,t){const r=(e=zk(e)).map(i=>uC(n,i,"on",t));return(0,JS.T)(...r)}function Qk(n,e){return function(r,i){return Gk(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function vZ(n){return function(t){return t?Gk(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Jk(n,e){return function(){return uC(n,"value","on",e)}}!function cZ(n){n.INTERNAL.registerComponent(new ko.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new aC(i,r)},"PUBLIC").setServiceProps({Reference:Ho,Query:ts,Database:aC,DataSnapshot:kf,enableLogging:W$,INTERNAL:uZ,ServerValue:lZ}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.7")}(Dv.Z);const CZ=new l.OlP("angularfire2.realtimeDatabaseURL"),bZ=new l.OlP("angularfire2.database.use-emulator");let IZ=(()=>{class n{constructor(t,r,i,a,c,p,_,E,A,S,P,V,G,fe,Te){this.schedulers=p;const dt=_,ze=(0,ti.on)(t,c,r);E&&bx(ze,c,A,P,V,G,S,fe),this.database=(0,ti.cc)(`${ze.name}.database.${i}`,"AngularFireDatabase",ze.name,()=>{const ft=c.runOutsideAngular(()=>ze.database(i||void 0));return dt&&ft.useEmulator(...dt),ft},[dt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Hk(this.database,t));let a=i;return r&&(a=r(i)),function wZ(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Qk(r,"update"),set:Qk(r,"set"),push:i=>r.push(i),remove:vZ(r),snapshotChanges:i=>Kk(n,i,t).pipe(dn.iC),stateChanges:i=>Yk(n,i,t).pipe(dn.iC),auditTrail:i=>function mZ(n,e,t){return function yZ(n,e,t){return function _Z(n,e){return uC(n,"value","on",e).pipe((0,Dt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function gB(...n){const e=(0,Bn.jO)(n);return(0,jn.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),p=!1;for(let _=0;_<i;_++)(0,ar.Xf)(n[_]).subscribe(new Pn.Q(r,E=>{a[_]=E,!p&&!c[_]&&(c[_]=!0,(p=c.every(Zi.y))&&(c=null))},pB.Z));t.subscribe(new Pn.Q(r,_=>{if(p){const E=[_,...a];r.next(e?e(...E):E)}}))})}(e),(0,Dt.U)(([i,a])=>{const c=i.lastKeyToLoad,p=a.map(_=>_.key);return{actions:a,lastKeyToLoad:c,loadedKeys:p}}),function mB(n){return(0,jn.e)((e,t)=>{let r=!1,i=0;e.subscribe(new Pn.Q(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Dt.U)(i=>i.actions))}(n,Yk(n,e).pipe(ss((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(dn.iC),valueChanges:(i,a)=>Kk(n,i,t).pipe((0,Dt.U)(p=>p.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),dn.iC)}}(a,this)}object(t){return function EZ(n,e){return{query:n,snapshotChanges:()=>Jk(n,e.schedulers.outsideAngular)().pipe(dn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Jk(n,e.schedulers.outsideAngular)().pipe(dn.iC,(0,Dt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Hk(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ti.Dh),l.LFG(ti.xv,8),l.LFG(CZ,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(dn.HU),l.LFG(bZ,8),l.LFG(yE,8),l.LFG(_x,8),l.LFG(yx,8),l.LFG(vx,8),l.LFG(wx,8),l.LFG(Ex,8),l.LFG(Cx,8),l.LFG(_E,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),TZ=(()=>{class n{constructor(){Ch.Z.registerVersion("angularfire",dn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[IZ]}),n})();const Xk_firebaseConfig={apiKey:"AIzaSyArQa7s4lQx4-R8jt8Zyqq7HdowsEjFmK8",authDomain:"procake-79efd.firebaseapp.com",projectId:"procake-79efd",storageBucket:"procake-79efd.appspot.com",messagingSenderId:"824605268826",appId:"1:824605268826:web:558cf793693b3c8e493163"};let DZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[bV]}),n.\u0275inj=l.cJS({providers:[Rs,RT],imports:[[Ka,vV,ti.hO.initializeApp(Xk_firebaseConfig),jL,KL,fB,TZ,GU]]}),n})();(0,l.G48)(),oa().bootstrapModule(DZ).catch(n=>console.error(n))},5867:(at,Ce,L)=>{L.d(Ce,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=L(9681);(0,l.registerVersion)("firebase","9.6.10","app")},127:(at,Ce,L)=>{L.d(Ce,{Z:()=>l.Z});var l=L(3942);l.Z.registerVersion("firebase","9.6.10","app-compat")},1254:(at,Ce,L)=>{L.r(Ce);var l=L(5861),Q=L(3942),F=L(2090),re=L(9681);function ce(y,f){var g={};for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&f.indexOf(w)<0&&(g[w]=y[w]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(w=Object.getOwnPropertySymbols(y);D<w.length;D++)f.indexOf(w[D])<0&&Object.prototype.propertyIsEnumerable.call(y,w[D])&&(g[w[D]]=y[w[D]])}return g}var Oe=L(1877),oe=L(4859);const ns=function xn(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},an=function fn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ki=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qn=new Oe.Yd("@firebase/auth");function hr(y,...f){Qn.logLevel<=Oe.in.ERROR&&Qn.error(`Auth (${re.SDK_VERSION}): ${y}`,...f)}function un(y,...f){throw Fr(y,...f)}function Fn(y,...f){return Fr(y,...f)}function yo(y,f,g){const w=Object.assign(Object.assign({},an()),{[f]:g});return new F.LL("auth","Firebase",w).create(f,{appName:y.name})}function ai(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&un(y,"argument-error"),yo(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fr(y,...f){if("string"!=typeof y){const g=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return ki.create(y,...f)}function xe(y,f,...g){if(!y)throw Fr(f,...g)}function Ir(y){const f="INTERNAL ASSERTION FAILED: "+y;throw hr(f),new Error(f)}function rt(y,f){y||Ir(f)}const vi=new Map;function ln(y){rt(y instanceof Function,"Expected a class definition");let f=vi.get(y);return f?(rt(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,vi.set(y,f),f)}function rs(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Mn(){return"http:"===Jn()||"https:"===Jn()}function Jn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Lt{constructor(f,g){this.shortDelay=f,this.longDelay=g,rt(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function ms(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Mn()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ot(y,f){rt(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class bt{static initialize(f,g,w){this.fetchImpl=f,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ls={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Us=new Lt(3e4,6e4);function pt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Cn(y,f,g,w){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,l.Z)(function*(y,f,g,w,D={}){return ui(y,D,(0,l.Z)(function*(){let M={},j={};w&&("GET"===f?j=w:M={body:JSON.stringify(w)});const ee=(0,F.xO)(Object.assign({key:y.config.apiKey},j)).slice(1),Ne=yield y._getAdditionalHeaders();return Ne["Content-Type"]="application/json",y.languageCode&&(Ne["X-Firebase-Locale"]=y.languageCode),bt.fetch()(Ye(y,y.config.apiHost,g,ee),Object.assign({method:f,headers:Ne,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function ui(y,f,g){return _t.apply(this,arguments)}function _t(){return(_t=(0,l.Z)(function*(y,f,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Ls),f);try{const D=new be(y),M=yield Promise.race([g(),D.promise]);D.clearNetworkTimeout();const j=yield M.json();if("needConfirmation"in j)throw Je(y,"account-exists-with-different-credential",j);if(M.ok&&!("errorMessage"in j))return j;{const ee=M.ok?j.errorMessage:j.error.message,[Ne,Se]=ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ne)throw Je(y,"credential-already-in-use",j);if("EMAIL_EXISTS"===Ne)throw Je(y,"email-already-in-use",j);const Qe=w[Ne]||Ne.toLowerCase().replace(/[_\s]+/g,"-");if(Se)throw yo(y,Qe,Se);un(y,Qe)}}catch(D){if(D instanceof F.ZR)throw D;un(y,"network-request-failed")}})).apply(this,arguments)}function Rn(y,f,g,w){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,l.Z)(function*(y,f,g,w,D={}){const M=yield Cn(y,f,g,w,D);return"mfaPendingCredential"in M&&un(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Ye(y,f,g,w){const D=`${f}${g}?${w}`;return y.config.emulator?ot(y.config,D):`${y.config.apiScheme}://${D}`}class be{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(Fn(this.auth,"network-request-failed")),Us.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Je(y,f,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const D=Fn(y,f,w);return D.customData._tokenResponse=g,D}function $t(){return($t=(0,l.Z)(function*(y,f){return Cn(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Xt(y,f){return Z.apply(this,arguments)}function Z(){return(Z=(0,l.Z)(function*(y,f){return Cn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function B(y,f){return W.apply(this,arguments)}function W(){return(W=(0,l.Z)(function*(y,f){return Cn(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ae(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Et(){return(Et=(0,l.Z)(function*(y,f=!1){const g=(0,F.m9)(y),w=yield g.getIdToken(f),D=fr(w);xe(D&&D.exp&&D.auth_time&&D.iat,g.auth,"internal-error");const M="object"==typeof D.firebase?D.firebase:void 0,j=null==M?void 0:M.sign_in_provider;return{claims:D,token:w,authTime:ae(Kt(D.auth_time)),issuedAtTime:ae(Kt(D.iat)),expirationTime:ae(Kt(D.exp)),signInProvider:j||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function Kt(y){return 1e3*Number(y)}function fr(y){const[f,g,w]=y.split(".");if(void 0===f||void 0===g||void 0===w)return hr("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,F.tV)(g);return D?JSON.parse(D):(hr("Failed to decode base64 JWT payload"),null)}catch(D){return hr("Caught error parsing JWT payload as JSON",D),null}}function _n(y,f){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,l.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(w){throw w instanceof F.ZR&&yn(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function yn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Ei{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const D=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,l.Z)(function*(){yield g.iteration()}),w)}iteration(){var f=this;return(0,l.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class Vs{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=ae(this.lastLoginAt),this.creationTime=ae(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Bs(y){return vo.apply(this,arguments)}function vo(){return(vo=(0,l.Z)(function*(y){var f;const g=y.auth,w=yield y.getIdToken(),D=yield _n(y,B(g,{idToken:w}));xe(null==D?void 0:D.users.length,g,"internal-error");const M=D.users[0];y._notifyReloadListener(M);const j=(null===(f=M.providerUserInfo)||void 0===f?void 0:f.length)?Ci(M.providerUserInfo):[],ee=qu(y.providerData,j),Qe=!!y.isAnonymous&&!(y.email&&M.passwordHash||(null==ee?void 0:ee.length)),Xe={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:ee,metadata:new Vs(M.createdAt,M.lastLoginAt),isAnonymous:Qe};Object.assign(y,Xe)})).apply(this,arguments)}function Hn(){return(Hn=(0,l.Z)(function*(y){const f=(0,F.m9)(y);yield Bs(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function qu(y,f){return[...y.filter(w=>!f.some(D=>D.providerId===w.providerId)),...f]}function Ci(y){return y.map(f=>{var{providerId:g}=f,w=ce(f,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function kt(){return(kt=(0,l.Z)(function*(y,f){const g=yield ui(y,{},(0,l.Z)(function*(){const w=(0,F.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:D,apiKey:M}=y.config,j=Ye(y,D,"/v1/token",`key=${M}`),ee=yield y._getAdditionalHeaders();return ee["Content-Type"]="application/x-www-form-urlencoded",bt.fetch()(j,{method:"POST",headers:ee,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class en{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){xe(f.idToken,"internal-error"),xe(void 0!==f.idToken,"internal-error"),xe(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Ht(y){const f=fr(y);return xe(f,"internal-error"),xe(void 0!==f.exp,"internal-error"),xe(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var w=this;return(0,l.Z)(function*(){return xe(!w.accessToken||w.refreshToken,f,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var w=this;return(0,l.Z)(function*(){const{accessToken:D,refreshToken:M,expiresIn:j}=yield function Ze(y,f){return kt.apply(this,arguments)}(f,g);w.updateTokensAndExpiration(D,M,Number(j))})()}updateTokensAndExpiration(f,g,w){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,g){const{refreshToken:w,accessToken:D,expirationTime:M}=g,j=new en;return w&&(xe("string"==typeof w,"internal-error",{appName:f}),j.refreshToken=w),D&&(xe("string"==typeof D,"internal-error",{appName:f}),j.accessToken=D),M&&(xe("number"==typeof M,"internal-error",{appName:f}),j.expirationTime=M),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new en,this.toJSON())}_performRefresh(){return Ir("not implemented")}}function Ln(y,f){xe("string"==typeof y||void 0===y,"internal-error",{appName:f})}class Xr{constructor(f){var{uid:g,auth:w,stsTokenManager:D}=f,M=ce(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ei(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new Vs(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,l.Z)(function*(){const w=yield _n(g,g.stsTokenManager.getToken(g.auth,f));return xe(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(f){return function je(y){return Et.apply(this,arguments)}(this,f)}reload(){return function js(y){return Hn.apply(this,arguments)}(this)}_assign(f){this!==f&&(xe(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Xr(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var w=this;return(0,l.Z)(function*(){let D=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),D=!0),g&&(yield Bs(w)),yield w.auth._persistUserIfCurrent(w),D&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,l.Z)(function*(){const g=yield f.getIdToken();return yield _n(f,function wt(y,f){return $t.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var w,D,M,j,ee,Ne,Se,Qe;const Xe=null!==(w=g.displayName)&&void 0!==w?w:void 0,jt=null!==(D=g.email)&&void 0!==D?D:void 0,Mr=null!==(M=g.phoneNumber)&&void 0!==M?M:void 0,Es=null!==(j=g.photoURL)&&void 0!==j?j:void 0,zc=null!==(ee=g.tenantId)&&void 0!==ee?ee:void 0,vh=null!==(Ne=g._redirectEventId)&&void 0!==Ne?Ne:void 0,xp=null!==(Se=g.createdAt)&&void 0!==Se?Se:void 0,Mp=null!==(Qe=g.lastLoginAt)&&void 0!==Qe?Qe:void 0,{uid:Cl,emailVerified:Rp,isAnonymous:Kc,providerData:bl,stsTokenManager:Yc}=g;xe(Cl&&Yc,f,"internal-error");const Np=en.fromJSON(this.name,Yc);xe("string"==typeof Cl,f,"internal-error"),Ln(Xe,f.name),Ln(jt,f.name),xe("boolean"==typeof Rp,f,"internal-error"),xe("boolean"==typeof Kc,f,"internal-error"),Ln(Mr,f.name),Ln(Es,f.name),Ln(zc,f.name),Ln(vh,f.name),Ln(xp,f.name),Ln(Mp,f.name);const wh=new Xr({uid:Cl,auth:f,email:jt,emailVerified:Rp,displayName:Xe,isAnonymous:Kc,photoURL:Es,phoneNumber:Mr,tenantId:zc,stsTokenManager:Np,createdAt:xp,lastLoginAt:Mp});return bl&&Array.isArray(bl)&&(wh.providerData=bl.map(Eh=>Object.assign({},Eh))),vh&&(wh._redirectEventId=vh),wh}static _fromIdTokenResponse(f,g,w=!1){return(0,l.Z)(function*(){const D=new en;D.updateFromServerResponse(g);const M=new Xr({uid:g.localId,auth:f,stsTokenManager:D,isAnonymous:w});return yield Bs(M),M})()}}const Lr=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(g,w){var D=this;return(0,l.Z)(function*(){D.storage[g]=w})()}_get(g){var w=this;return(0,l.Z)(function*(){const D=w.storage[g];return void 0===D?null:D})()}_remove(g){var w=this;return(0,l.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function tn(y,f,g){return`firebase:${y}:${f}:${g}`}class bn{constructor(f,g,w){this.persistence=f,this.auth=g,this.userKey=w;const{config:D,name:M}=this.auth;this.fullUserKey=tn(this.userKey,D.apiKey,M),this.fullPersistenceKey=tn("persistence",D.apiKey,M),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,l.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Xr._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,l.Z)(function*(){if(g.persistence===f)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,w="authUser"){return(0,l.Z)(function*(){if(!g.length)return new bn(ln(Lr),f,w);const D=(yield Promise.all(g.map(function(){var Se=(0,l.Z)(function*(Qe){if(yield Qe._isAvailable())return Qe});return function(Qe){return Se.apply(this,arguments)}}()))).filter(Se=>Se);let M=D[0]||ln(Lr);const j=tn(w,f.config.apiKey,f.name);let ee=null;for(const Se of g)try{const Qe=yield Se._get(j);if(Qe){const Xe=Xr._fromJSON(f,Qe);Se!==M&&(ee=Xe),M=Se;break}}catch(Qe){}const Ne=D.filter(Se=>Se._shouldAllowMigration);return M._shouldAllowMigration&&Ne.length?(M=Ne[0],ee&&(yield M._set(j,ee.toJSON())),yield Promise.all(g.map(function(){var Se=(0,l.Z)(function*(Qe){if(Qe!==M)try{yield Qe._remove(j)}catch(Xe){}});return function(Qe){return Se.apply(this,arguments)}}())),new bn(M,f,w)):new bn(M,f,w)})()}}function wo(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if($u(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Nt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Xn(f))return"Blackberry";if(Eo(f))return"Webos";if(Go(f))return"Safari";if((f.includes("chrome/")||qs(f))&&!f.includes("edge/"))return"Chrome";if(bi(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Nt(y=(0,F.z$)()){return/firefox\//i.test(y)}function Go(y=(0,F.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function qs(y=(0,F.z$)()){return/crios\//i.test(y)}function $u(y=(0,F.z$)()){return/iemobile/i.test(y)}function bi(y=(0,F.z$)()){return/android/i.test(y)}function Xn(y=(0,F.z$)()){return/blackberry/i.test(y)}function Eo(y=(0,F.z$)()){return/webos/i.test(y)}function Ii(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)}function ac(y=(0,F.z$)()){return Ii(y)||bi(y)||Eo(y)||Xn(y)||/windows phone/i.test(y)||$u(y)}function Ui(y,f=[]){let g;switch(y){case"Browser":g=wo((0,F.z$)());break;case"Worker":g=`${wo((0,F.z$)())}-${y}`;break;default:g=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${re.SDK_VERSION}/${w}`}class Ud{constructor(f,g,w){this.app=f,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ba(this),this.idTokenSubscription=new Ba(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ki,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,g){var w=this;return g&&(this._popupRedirectResolver=ln(g)),this._initializationPromise=this.queue((0,l.Z)(function*(){var D,M;if(!w._deleted&&(w.persistenceManager=yield bn.create(w,f),!w._deleted)){if(null===(D=w._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(j){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(M=w.currentUser)||void 0===M?void 0:M.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,l.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,l.Z)(function*(){var w;let D=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const M=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,j=null==D?void 0:D._redirectEventId,ee=yield g.tryRedirectSignIn(f);(!M||M===j)&&(null==ee?void 0:ee.user)&&(D=ee.user)}return D?D._redirectEventId?(xe(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===D._redirectEventId?g.directlySetCurrentUser(D):g.reloadAndSetCurrentUserOrClear(D)):g.reloadAndSetCurrentUserOrClear(D):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,l.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(D){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,l.Z)(function*(){try{yield Bs(f)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ju(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,l.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,l.Z)(function*(){const w=f?(0,F.m9)(f):null;return w&&xe(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,l.Z)(function*(){if(!g._deleted)return f&&xe(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,l.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,l.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,l.Z)(function*(){yield g.assertedPersistence.setPersistence(ln(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new F.LL("auth","Firebase",f())}onAuthStateChanged(f,g,w){return this.registerStateListener(this.authStateSubscription,f,g,w)}onIdTokenChanged(f,g,w){return this.registerStateListener(this.idTokenSubscription,f,g,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var w=this;return(0,l.Z)(function*(){const D=yield w.getOrInitRedirectPersistenceManager(g);return null===f?D.removeCurrentUser():D.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,l.Z)(function*(){if(!g.redirectPersistenceManager){const w=f&&ln(f)||g._popupRedirectResolver;xe(w,g,"argument-error"),g.redirectPersistenceManager=yield bn.create(g,[ln(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,l.Z)(function*(){var w,D;return g._isInitialized&&(yield g.queue((0,l.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===f?g._currentUser:(null===(D=g.redirectUser)||void 0===D?void 0:D._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,l.Z)(function*(){if(f===g.currentUser)return g.queue((0,l.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,w,D){if(this._deleted)return()=>{};const M="function"==typeof g?g:g.next.bind(g),j=this._isInitialized?Promise.resolve():this._initializationPromise;return xe(j,this,"internal-error"),j.then(()=>M(this.currentUser)),"function"==typeof g?f.addObserver(g,w,D):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,l.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ui(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,l.Z)(function*(){var g;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const D=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return D&&(w["X-Firebase-Client"]=D),w})()}}function Nn(y){return(0,F.m9)(y)}class Ba{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vd(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Ff(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class ja{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return Ir("not implemented")}_getIdTokenResponse(f){return Ir("not implemented")}_linkToIdToken(f,g){return Ir("not implemented")}_getReauthenticationResolver(f){return Ir("not implemented")}}function Lf(y,f){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,l.Z)(function*(y,f){return Cn(y,"POST","/v1/accounts:resetPassword",pt(y,f))})).apply(this,arguments)}function Uf(y,f){return jd.apply(this,arguments)}function jd(){return(jd=(0,l.Z)(function*(y,f){return Cn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function uc(y,f){return $s.apply(this,arguments)}function $s(){return($s=(0,l.Z)(function*(y,f){return Cn(y,"POST","/v1/accounts:update",pt(y,f))})).apply(this,arguments)}function qd(){return(qd=(0,l.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signInWithPassword",pt(y,f))})).apply(this,arguments)}function lc(y,f){return $d.apply(this,arguments)}function $d(){return($d=(0,l.Z)(function*(y,f){return Cn(y,"POST","/v1/accounts:sendOobCode",pt(y,f))})).apply(this,arguments)}function mm(y,f){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,l.Z)(function*(y,f){return lc(y,f)})).apply(this,arguments)}function Jy(y,f){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,l.Z)(function*(y,f){return lc(y,f)})).apply(this,arguments)}function cc(y,f){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,l.Z)(function*(y,f){return lc(y,f)})).apply(this,arguments)}function Vf(y,f){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,l.Z)(function*(y,f){return lc(y,f)})).apply(this,arguments)}function dc(){return(dc=(0,l.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signInWithEmailLink",pt(y,f))})).apply(this,arguments)}function Ko(){return(Ko=(0,l.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signInWithEmailLink",pt(y,f))})).apply(this,arguments)}class qa extends ja{constructor(f,g,w,D=null){super("password",w),this._email=f,this._password=g,this._tenantId=D}static _fromEmailAndPassword(f,g){return new qa(f,g,"password")}static _fromEmailAndCode(f,g,w=null){return new qa(f,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,l.Z)(function*(){switch(g.signInMethod){case"password":return function gm(y,f){return qd.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Zs(y,f){return dc.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:un(f,"internal-error")}})()}_linkToIdToken(f,g){var w=this;return(0,l.Z)(function*(){switch(w.signInMethod){case"password":return Uf(f,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function zo(y,f){return Ko.apply(this,arguments)}(f,{idToken:g,email:w._email,oobCode:w._password});default:un(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Hs(y,f){return hc.apply(this,arguments)}function hc(){return(hc=(0,l.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signInWithIdp",pt(y,f))})).apply(this,arguments)}class ir extends ja{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new ir(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):un("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:D}=g,M=ce(g,["providerId","signInMethod"]);if(!w||!D)return null;const j=new ir(w,D);return j.idToken=M.idToken||void 0,j.accessToken=M.accessToken||void 0,j.secret=M.secret,j.nonce=M.nonce,j.pendingToken=M.pendingToken||null,j}_getIdTokenResponse(f){return Hs(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Hs(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Hs(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,F.xO)(g)}return f}}function fc(y,f){return $a.apply(this,arguments)}function $a(){return($a=(0,l.Z)(function*(y,f){return Cn(y,"POST","/v1/accounts:sendVerificationCode",pt(y,f))})).apply(this,arguments)}function Yo(){return(Yo=(0,l.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signInWithPhoneNumber",pt(y,f))})).apply(this,arguments)}function Qo(){return(Qo=(0,l.Z)(function*(y,f){const g=yield Rn(y,"POST","/v1/accounts:signInWithPhoneNumber",pt(y,f));if(g.temporaryProof)throw Je(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const _m={USER_NOT_FOUND:"user-not-found"};function Gd(){return(Gd=(0,l.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signInWithPhoneNumber",pt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),_m)})).apply(this,arguments)}class qt extends ja{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new qt({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new qt({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function ji(y,f){return Yo.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Bf(y,f){return Qo.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function pc(y,f){return Gd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:w,verificationCode:D}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:w,code:D}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:w,phoneNumber:D,temporaryProof:M}=f;return w||g||D||M?new qt({verificationId:g,verificationCode:w,phoneNumber:D,temporaryProof:M}):null}}class vn{constructor(f){var g,w,D,M,j,ee;const Ne=(0,F.zd)((0,F.pd)(f)),Se=null!==(g=Ne.apiKey)&&void 0!==g?g:null,Qe=null!==(w=Ne.oobCode)&&void 0!==w?w:null,Xe=function Gu(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Ne.mode)&&void 0!==D?D:null);xe(Se&&Qe&&Xe,"argument-error"),this.apiKey=Se,this.operation=Xe,this.code=Qe,this.continueUrl=null!==(M=Ne.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(j=Ne.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(ee=Ne.tenantId)&&void 0!==ee?ee:null}static parseLink(f){const g=function Wd(y){const f=(0,F.zd)((0,F.pd)(y)).link,g=f?(0,F.zd)((0,F.pd)(f)).deep_link_id:null,w=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(w?(0,F.zd)((0,F.pd)(w)).link:null)||w||g||f||y}(f);try{return new vn(g)}catch(w){return null}}}let Jo=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return qa._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const D=vn.parseLink(w);return xe(D,"argument-error"),qa._fromEmailAndCode(g,D.code,D.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class sr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class gr extends sr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class qi extends gr{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return xe("providerId"in g&&"signInMethod"in g,"argument-error"),ir._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return xe(f.idToken||f.accessToken,"argument-error"),ir._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return qi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return qi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:D,pendingToken:M,nonce:j,providerId:ee}=f;if(!w&&!D&&!g&&!M||!ee)return null;try{return new qi(ee)._credential({idToken:g,accessToken:w,nonce:j,pendingToken:M})}catch(Ne){return null}}}let Xo=(()=>{class y extends gr{constructor(){super("facebook.com")}static credential(g){return ir._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ws=(()=>{class y extends gr{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return ir._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:D}=g;if(!w&&!D)return null;try{return y.credential(w,D)}catch(M){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),nn=(()=>{class y extends gr{constructor(){super("github.com")}static credential(g){return ir._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ti extends ja{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Hs(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Hs(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Hs(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:D,pendingToken:M}=g;return w&&D&&M&&w===D?new Ti(w,M):null}static _create(f,g){return new Ti(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ar extends sr{constructor(f){xe(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ar.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ar.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Ti.fromJSON(f);return xe(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:w}=f;if(!g||!w)return null;try{return Ti._create(w,g)}catch(D){return null}}}let Co=(()=>{class y extends gr{constructor(){super("twitter.com")}static credential(g,w){return ir._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:D}=g;if(!w||!D)return null;try{return y.credential(w,D)}catch(M){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function bo(y,f){return yt.apply(this,arguments)}function yt(){return(yt=(0,l.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signUp",pt(y,f))})).apply(this,arguments)}class mr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,w,D=!1){return(0,l.Z)(function*(){const M=yield Xr._fromIdTokenResponse(f,w,D),j=Za(w);return new mr({user:M,providerId:j,_tokenResponse:w,operationType:g})})()}static _forOperation(f,g,w){return(0,l.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const D=Za(w);return new mr({user:f,providerId:D,_tokenResponse:w,operationType:g})})()}}function Za(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Ha(){return(Ha=(0,l.Z)(function*(y){var f;const g=Nn(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new mr({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield bo(g,{returnSecureToken:!0}),D=yield mr._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class ea extends F.ZR{constructor(f,g,w,D){var M;super(g.code,g.message),this.operationType=w,this.user=D,Object.setPrototypeOf(this,ea.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,g,w,D){return new ea(f,g,w,D)}}function Ga(y,f,g,w){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?ea._fromErrorAndOperation(y,M,f,w):M})}function gc(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Bt(){return(Bt=(0,l.Z)(function*(y,f){const g=(0,F.m9)(y);yield zs(!0,g,f);const{providerUserInfo:w}=yield Xt(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),D=gc(w||[]);return g.providerData=g.providerData.filter(M=>D.has(M.providerId)),D.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function ta(y,f){return wn.apply(this,arguments)}function wn(){return(wn=(0,l.Z)(function*(y,f,g=!1){const w=yield _n(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return mr._forOperation(y,"link",w)})).apply(this,arguments)}function zs(y,f,g){return na.apply(this,arguments)}function na(){return(na=(0,l.Z)(function*(y,f,g){yield Bs(f);const D=!1===y?"provider-already-linked":"no-such-provider";xe(gc(f.providerData).has(g)===y,f.auth,D)})).apply(this,arguments)}function Vr(y,f){return Io.apply(this,arguments)}function Io(){return(Io=(0,l.Z)(function*(y,f,g=!1){const{auth:w}=y,D="reauthenticate";try{const M=yield _n(y,Ga(w,D,f,y),g);xe(M.idToken,w,"internal-error");const j=fr(M.idToken);xe(j,w,"internal-error");const{sub:ee}=j;return xe(y.uid===ee,w,"user-mismatch"),mr._forOperation(y,D,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&un(w,"user-mismatch"),M}})).apply(this,arguments)}function Wa(y,f){return mc.apply(this,arguments)}function mc(){return(mc=(0,l.Z)(function*(y,f,g=!1){const w="signIn",D=yield Ga(y,w,f),M=yield mr._fromIdTokenResponse(y,w,D);return g||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function zu(y,f){return ra.apply(this,arguments)}function ra(){return(ra=(0,l.Z)(function*(y,f){return Wa(Nn(y),f)})).apply(this,arguments)}function za(y,f){return er.apply(this,arguments)}function er(){return(er=(0,l.Z)(function*(y,f){const g=(0,F.m9)(y);return yield zs(!1,g,f.providerId),ta(g,f)})).apply(this,arguments)}function is(y,f){return ia.apply(this,arguments)}function ia(){return(ia=(0,l.Z)(function*(y,f){return Vr((0,F.m9)(y),f)})).apply(this,arguments)}function To(y,f){return Di.apply(this,arguments)}function Di(){return(Di=(0,l.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signInWithCustomToken",pt(y,f))})).apply(this,arguments)}function Ku(){return(Ku=(0,l.Z)(function*(y,f){const g=Nn(y),w=yield To(g,{token:f,returnSecureToken:!0}),D=yield mr._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class sa{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?yc._fromServerResponse(f,g):un(f,"internal-error")}}class yc extends sa{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new yc(g)}}function Ks(y,f,g){var w;xe((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),xe(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(xe(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(xe(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function oa(){return(oa=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y),D={requestType:"PASSWORD_RESET",email:f};g&&Ks(w,D,g),yield Jy(w,D)})).apply(this,arguments)}function Ka(){return(Ka=(0,l.Z)(function*(y,f,g){yield Lf((0,F.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function aa(){return(aa=(0,l.Z)(function*(y,f){yield uc((0,F.m9)(y),{oobCode:f})})).apply(this,arguments)}function Qu(y,f){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,l.Z)(function*(y,f){const g=(0,F.m9)(y),w=yield Lf(g,{oobCode:f}),D=w.requestType;switch(xe(D,g,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":xe(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":xe(w.mfaInfo,g,"internal-error");default:xe(w.email,g,"internal-error")}let M=null;return w.mfaInfo&&(M=sa._fromServerResponse(Nn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:M},operation:D}})).apply(this,arguments)}function Xu(){return(Xu=(0,l.Z)(function*(y,f){const{data:g}=yield Qu((0,F.m9)(y),f);return g.email})).apply(this,arguments)}function Yd(){return(Yd=(0,l.Z)(function*(y,f,g){const w=Nn(y),D=yield bo(w,{returnSecureToken:!0,email:f,password:g}),M=yield mr._fromIdTokenResponse(w,"signIn",D);return yield w._updateCurrentUser(M.user),M})).apply(this,arguments)}function _r(){return(_r=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y),D={requestType:"EMAIL_SIGNIN",email:f};xe(g.handleCodeInApp,w,"argument-error"),g&&Ks(w,D,g),yield cc(w,D)})).apply(this,arguments)}function tl(){return(tl=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y),D=Jo.credentialWithLink(f,g||rs());return xe(D._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),zu(w,D)})).apply(this,arguments)}function Hf(y,f){return nl.apply(this,arguments)}function nl(){return(nl=(0,l.Z)(function*(y,f){return Cn(y,"POST","/v1/accounts:createAuthUri",pt(y,f))})).apply(this,arguments)}function Gf(){return(Gf=(0,l.Z)(function*(y,f){const w={identifier:f,continueUri:Mn()?rs():"http://localhost"},{signinMethods:D}=yield Hf((0,F.m9)(y),w);return D||[]})).apply(this,arguments)}function Ya(){return(Ya=(0,l.Z)(function*(y,f){const g=(0,F.m9)(y),D={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Ks(g.auth,D,f);const{email:M}=yield mm(g.auth,D);M!==y.email&&(yield y.reload())})).apply(this,arguments)}function il(){return(il=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&Ks(w.auth,M,g);const{email:j}=yield Vf(w.auth,M);j!==y.email&&(yield y.reload())})).apply(this,arguments)}function Wf(y,f){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,l.Z)(function*(y,f){return Cn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ao(){return(Ao=(0,l.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const w=(0,F.m9)(y),M={idToken:yield w.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},j=yield _n(w,Wf(w.auth,M));w.displayName=j.displayName||null,w.photoURL=j.photoUrl||null;const ee=w.providerData.find(({providerId:Ne})=>"password"===Ne);ee&&(ee.displayName=w.displayName,ee.photoURL=w.photoURL),yield w._updateTokensIfNecessary(j)})).apply(this,arguments)}function Qa(y,f,g){return ua.apply(this,arguments)}function ua(){return(ua=(0,l.Z)(function*(y,f,g){const{auth:w}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(M.email=f),g&&(M.password=g);const j=yield _n(y,Uf(w,M));yield y._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class So{constructor(f,g,w={}){this.isNewUser=f,this.providerId=g,this.profile=w}}class Em extends So{constructor(f,g,w,D){super(f,g,w),this.username=D}}class Cm extends So{constructor(f,g){super(f,"facebook.com",g)}}class Cc extends Em{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class hn extends So{constructor(f,g){super(f,"google.com",g)}}class Bn extends Em{constructor(f,g,w){super(f,"twitter.com",g,w)}}function gt(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function wm(y){var f,g;if(!y)return null;const{providerId:w}=y,D=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const j=null===(g=null===(f=fr(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(j)return new So(M,"anonymous"!==j&&"custom"!==j?j:null)}if(!w)return null;switch(w){case"facebook.com":return new Cm(M,D);case"github.com":return new Cc(M,D);case"google.com":return new hn(M,D);case"twitter.com":return new Bn(M,D,y.screenName||null);case"custom":case"anonymous":return new So(M,null);default:return new So(M,w,D)}}(g)}class _s{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new _s("enroll",f)}static _fromMfaPendingCredential(f){return new _s("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,w;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return _s._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return _s._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Zi{constructor(f,g,w){this.session=f,this.hints=g,this.signInResolver=w}static _fromError(f,g){const w=Nn(f),D=g.customData._serverResponse,M=(D.mfaInfo||[]).map(ee=>sa._fromServerResponse(w,ee));xe(D.mfaPendingCredential,w,"internal-error");const j=_s._fromMfaPendingCredential(D.mfaPendingCredential);return new Zi(j,M,function(){var ee=(0,l.Z)(function*(Ne){const Se=yield Ne._process(w,j);delete D.mfaInfo,delete D.mfaPendingCredential;const Qe=Object.assign(Object.assign({},D),{idToken:Se.idToken,refreshToken:Se.refreshToken});switch(g.operationType){case"signIn":const Xe=yield mr._fromIdTokenResponse(w,g.operationType,Qe);return yield w._updateCurrentUser(Xe.user),Xe;case"reauthenticate":return xe(g.user,w,"internal-error"),mr._forOperation(g.user,g.operationType,Qe);default:un(w,"internal-error")}});return function(Ne){return ee.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,l.Z)(function*(){return g.signInResolver(f)})()}}function zf(y,f){return Cn(y,"POST","/v2/accounts/mfaEnrollment:start",pt(y,f))}class Qs{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>sa._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new Qs(f)}getSession(){var f=this;return(0,l.Z)(function*(){return _s._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var w=this;return(0,l.Z)(function*(){const D=f,M=yield w.getSession(),j=yield _n(w.user,D._process(w.user.auth,M,g));return yield w.user._updateTokensIfNecessary(j),w.user.reload()})()}unenroll(f){var g=this;return(0,l.Z)(function*(){const w="string"==typeof f?f:f.uid,D=yield g.user.getIdToken(),M=yield _n(g.user,function ol(y,f){return Cn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",pt(y,f))}(g.user.auth,{idToken:D,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:j})=>j!==w),yield g.user._updateTokensIfNecessary(M);try{yield g.user.reload()}catch(j){if("auth/user-token-expired"!==j.code)throw j}})()}}const Pn=new WeakMap,al="__sak";class Hi{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(al,"1"),this.storage.removeItem(al),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const tu=(()=>{class y extends Hi{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ul(){const y=(0,F.z$)();return Go(y)||Ii(y)}()&&function Li(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ac(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const D=this.storage.getItem(w),M=this.localCache[w];D!==M&&g(w,M,D)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((ee,Ne,Se)=>{this.notifyListeners(ee,Se)});const D=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ee=this.storage.getItem(D);if(g.newValue!==ee)null!==g.newValue?this.storage.setItem(D,g.newValue):this.storage.removeItem(D);else if(this.localCache[D]===g.newValue&&!w)return}const M=()=>{const ee=this.storage.getItem(D);!w&&this.localCache[D]===ee||this.notifyListeners(D,ee)},j=this.storage.getItem(D);!function Zu(){return(0,F.w1)()&&10===document.documentMode}()||j===g.newValue||g.newValue===g.oldValue?M():setTimeout(M,10)}notifyListeners(g,w){this.localCache[g]=w;const D=this.listeners[g];if(D)for(const M of Array.from(D))M(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var D=()=>super._set,M=this;return(0,l.Z)(function*(){yield D().call(M,g,w),M.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,D=this;return(0,l.Z)(function*(){const M=yield w().call(D,g);return D.localCache[g]=JSON.stringify(M),M})()}_remove(g){var w=()=>super._remove,D=this;return(0,l.Z)(function*(){yield w().call(D,g),delete D.localCache[g]})()}}return y.type="LOCAL",y})(),ar=(()=>{class y extends Hi{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let xo=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(M=>M.isListeningto(g));if(w)return w;const D=new y(g);return this.receivers.push(D),D}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,l.Z)(function*(){const D=g,{eventId:M,eventType:j,data:ee}=D.data,Ne=w.handlersMap[j];if(!(null==Ne?void 0:Ne.size))return;D.ports[0].postMessage({status:"ack",eventId:M,eventType:j});const Se=Array.from(Ne).map(function(){var Xe=(0,l.Z)(function*(jt){return jt(D.origin,ee)});return function(jt){return Xe.apply(this,arguments)}}()),Qe=yield function Kf(y){return Promise.all(y.map(function(){var f=(0,l.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return f.apply(this,arguments)}}()))}(Se);D.ports[0].postMessage({status:"done",eventId:M,eventType:j,response:Qe})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Mo(y="",f=10){let g="";for(let w=0;w<f;w++)g+=Math.floor(10*Math.random());return y+g}class jn{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,w=50){var D=this;return(0,l.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let j,ee;return new Promise((Ne,Se)=>{const Qe=Mo("",20);M.port1.start();const Xe=setTimeout(()=>{Se(new Error("unsupported_event"))},w);ee={messageChannel:M,onMessage(jt){const Mr=jt;if(Mr.data.eventId===Qe)switch(Mr.data.status){case"ack":clearTimeout(Xe),j=setTimeout(()=>{Se(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),Ne(Mr.data.response);break;default:clearTimeout(Xe),clearTimeout(j),Se(new Error("invalid_response"))}}},D.handlers.add(ee),M.port1.addEventListener("message",ee.onMessage),D.target.postMessage({eventType:f,eventId:Qe,data:g},[M.port2])}).finally(()=>{ee&&D.removeMessageHandler(ee)})})()}}function On(){return window}function Dn(){return void 0!==On().WorkerGlobalScope&&"function"==typeof On().importScripts}function li(){return(li=(0,l.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Ai="firebaseLocalStorageDb",yr="firebaseLocalStorage",Dc="fbase_key";class rn{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function eo(y,f){return y.transaction([yr],f?"readwrite":"readonly").objectStore(yr)}function Yf(){const y=indexedDB.open(Ai,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(yr,{keyPath:Dc})}catch(D){g(D)}}),y.addEventListener("success",(0,l.Z)(function*(){const w=y.result;w.objectStoreNames.contains(yr)?f(w):(w.close(),yield function Im(){const y=indexedDB.deleteDatabase(Ai);return new rn(y).toPromise()}(),f(yield Yf()))}))})}function Qf(y,f,g){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,l.Z)(function*(y,f,g){const w=eo(y,!0).put({[Dc]:f,value:g});return new rn(w).toPromise()})).apply(this,arguments)}function jr(){return(jr=(0,l.Z)(function*(y,f){const g=eo(y,!1).get(f),w=yield new rn(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Ro(y,f){const g=eo(y,!0).delete(f);return new rn(g).toPromise()}const Gi=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,l.Z)(function*(){return g.db||(g.db=yield Yf()),g.db})()}_withRetries(g){var w=this;return(0,l.Z)(function*(){let D=0;for(;;)try{const M=yield w._openDb();return yield g(M)}catch(M){if(D++>3)throw M;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,l.Z)(function*(){return Dn()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,l.Z)(function*(){g.receiver=xo._getInstance(function ss(){return Dn()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,l.Z)(function*(D,M){return{keyProcessed:(yield g._poll()).includes(M.key)}});return function(D,M){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,l.Z)(function*(D,M){return["keyChanged"]});return function(D,M){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,l.Z)(function*(){var w,D;if(g.activeServiceWorker=yield function Xs(){return li.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new jn(g.activeServiceWorker);const M=yield g.sender._send("ping",{},800);!M||(null===(w=M[0])||void 0===w?void 0:w.fulfilled)&&(null===(D=M[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,l.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function ca(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Yf();return yield Qf(g,al,"1"),yield Ro(g,al),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,l.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var D=this;return(0,l.Z)(function*(){return D._withPendingWrite((0,l.Z)(function*(){return yield D._withRetries(M=>Qf(M,g,w)),D.localCache[g]=w,D.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,l.Z)(function*(){const D=yield w._withRetries(M=>function da(y,f){return jr.apply(this,arguments)}(M,g));return w.localCache[g]=D,D})()}_remove(g){var w=this;return(0,l.Z)(function*(){return w._withPendingWrite((0,l.Z)(function*(){return yield w._withRetries(D=>Ro(D,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,l.Z)(function*(){const w=yield g._withRetries(j=>{const ee=eo(j,!1).getAll();return new rn(ee).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const D=[],M=new Set;for(const{fbase_key:j,value:ee}of w)M.add(j),JSON.stringify(g.localCache[j])!==JSON.stringify(ee)&&(g.notifyListeners(j,ee),D.push(j));for(const j of Object.keys(g.localCache))g.localCache[j]&&!M.has(j)&&(g.notifyListeners(j,null),D.push(j));return D})()}notifyListeners(g,w){this.localCache[g]=w;const D=this.listeners[g];if(D)for(const M of Array.from(D))M(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Tm(y,f){return Cn(y,"POST","/v2/accounts/mfaSignIn:start",pt(y,f))}function Si(){return(Si=(0,l.Z)(function*(y){return(yield Cn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function fa(y){return new Promise((f,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=D=>{const M=Fn("internal-error");M.customData=D,g(M)},w.type="text/javascript",w.charset="UTF-8",function Qd(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function No(y){return`__${y}${Math.floor(1e6*Math.random())}`}const pa=1e12;class Jd{constructor(f){this.auth=f,this.counter=pa,this._widgets=new Map}render(f,g){const w=this.counter;return this._widgets.set(w,new Xd(f,this.auth.name,g||{})),this.counter++,w}reset(f){var g;const w=f||pa;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(f){var g;return(null===(g=this._widgets.get(f||pa))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,l.Z)(function*(){var w;return null===(w=g._widgets.get(f||pa))||void 0===w||w.execute(),""})()}}class Xd{constructor(f,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof f?document.getElementById(f):f;xe(D,"argument-error",{appName:g}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function nu(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ht=No("rcb"),ru=new Lt(3e4,6e4);class Dm{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!On().grecaptcha}load(f,g=""){return xe(function xc(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(On().grecaptcha):new Promise((w,D)=>{const M=On().setTimeout(()=>{D(Fn(f,"network-request-failed"))},ru.get());On()[ht]=()=>{On().clearTimeout(M),delete On()[ht];const ee=On().grecaptcha;if(!ee)return void D(Fn(f,"internal-error"));const Ne=ee.render;ee.render=(Se,Qe)=>{const Xe=Ne(Se,Qe);return this.counter++,Xe},this.hostLanguage=g,w(ee)},fa(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:ht,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(M),D(Fn(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!On().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ep{load(f){return(0,l.Z)(function*(){return new Jd(f)})()}clearedOneInstance(){}}const eh="recaptcha",ga={theme:"light",type:"image"};class zi{constructor(f,g=Object.assign({},ga),w){this.parameters=g,this.type=eh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Nn(w),this.isInvisible="invisible"===this.parameters.size,xe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof f?document.getElementById(f):f;xe(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ep:new Dm,this.validateStartingState()}verify(){var f=this;return(0,l.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(g)||new Promise(M=>{const j=ee=>{!ee||(f.tokenChangeListeners.delete(j),M(ee))};f.tokenChangeListeners.add(j),f.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){xe(!this.parameters.sitekey,this.auth,"argument-error"),xe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),xe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof f)f(g);else if("string"==typeof f){const w=On()[f];"function"==typeof w&&w(g)}}}assertNotDestroyed(){xe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,l.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,l.Z)(function*(){xe(Mn()&&!Dn(),f.auth,"internal-error"),yield function th(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Wi(y){return Si.apply(this,arguments)}(f.auth);xe(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return xe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class iu{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=qt._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function su(){return(su=(0,l.Z)(function*(y,f,g){const w=Nn(y),D=yield ou(w,f,(0,F.m9)(g));return new iu(D,M=>zu(w,M))})).apply(this,arguments)}function Sr(){return(Sr=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y);yield zs(!1,w,"phone");const D=yield ou(w.auth,f,(0,F.m9)(g));return new iu(D,M=>za(w,M))})).apply(this,arguments)}function Po(){return(Po=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y),D=yield ou(w.auth,f,(0,F.m9)(g));return new iu(D,M=>is(w,M))})).apply(this,arguments)}function ou(y,f,g){return cl.apply(this,arguments)}function cl(){return(cl=(0,l.Z)(function*(y,f,g){var w;const D=yield g.verify();try{let M;if(xe("string"==typeof D,y,"argument-error"),xe(g.type===eh,y,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const j=M.session;if("phoneNumber"in M)return xe("enroll"===j.type,y,"internal-error"),(yield zf(y,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{xe("signin"===j.type,y,"internal-error");const ee=(null===(w=M.multiFactorHint)||void 0===w?void 0:w.uid)||M.multiFactorUid;return xe(ee,y,"missing-multi-factor-info"),(yield Tm(y,{mfaPendingCredential:j.credential,mfaEnrollmentId:ee,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield fc(y,{phoneNumber:M.phoneNumber,recaptchaToken:D});return j}}finally{g._reset()}})).apply(this,arguments)}function I(){return(I=(0,l.Z)(function*(y,f){yield ta((0,F.m9)(y),f)})).apply(this,arguments)}let T=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Nn(g)}verifyPhoneNumber(g,w){return ou(this.auth,g,(0,F.m9)(w))}static credential(g,w){return qt._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:D}=g;return w&&D?qt._fromTokenResponse(w,D):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function N(y,f){return f?ln(f):(xe(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class U extends ja{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Hs(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Hs(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Hs(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function z(y){return Wa(y.auth,new U(y),y.bypassAuthState)}function Y(y){const{auth:f,user:g}=y;return xe(g,f,"internal-error"),Vr(g,new U(y),y.bypassAuthState)}function ue(y){return We.apply(this,arguments)}function We(){return(We=(0,l.Z)(function*(y){const{auth:f,user:g}=y;return xe(g,f,"internal-error"),ta(g,new U(y),y.bypassAuthState)})).apply(this,arguments)}class It{constructor(f,g,w,D,M=!1){this.auth=f,this.resolver=w,this.user=D,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,l.Z)(function*(w,D){f.pendingPromise={resolve:w,reject:D};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(w,D){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,l.Z)(function*(){const{urlResponse:w,sessionId:D,postBody:M,tenantId:j,error:ee,type:Ne}=f;if(ee)return void g.reject(ee);const Se={auth:g.auth,requestUri:w,sessionId:D,tenantId:j||void 0,postBody:M||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ne)(Se))}catch(Qe){g.reject(Qe)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return z;case"linkViaPopup":case"linkViaRedirect":return ue;case"reauthViaPopup":case"reauthViaRedirect":return Y;default:un(this.auth,"internal-error")}}resolve(f){rt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){rt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ct=new Lt(2e3,1e4);function At(){return(At=(0,l.Z)(function*(y,f,g){const w=Nn(y);ai(y,f,sr);const D=N(w,g);return new hi(w,"signInViaPopup",f,D).executeNotNull()})).apply(this,arguments)}function kn(){return(kn=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y);ai(w.auth,f,sr);const D=N(w.auth,g);return new hi(w.auth,"reauthViaPopup",f,D,w).executeNotNull()})).apply(this,arguments)}function us(){return(us=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y);ai(w.auth,f,sr);const D=N(w.auth,g);return new hi(w.auth,"linkViaPopup",f,D,w).executeNotNull()})).apply(this,arguments)}let hi=(()=>{class y extends It{constructor(g,w,D,M,j){super(g,w,M,j),this.provider=D,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,l.Z)(function*(){const w=yield g.execute();return xe(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,l.Z)(function*(){rt(1===g.filter.length,"Popup operations only handle one event");const w=Mo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(D=>{g.reject(D)}),g.resolver._isIframeWebStorageSupported(g.auth,D=>{D||g.reject(Fn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,D;this.pollId=(null===(D=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,ct.get())};g()}}return y.currentPopupAction=null,y})();const cs=new Map;class ma extends It{constructor(f,g,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,l.Z)(function*(){let w=cs.get(g.auth._key());if(!w){try{const M=(yield function au(y,f){return Mc.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;w=()=>Promise.resolve(M)}catch(D){w=()=>Promise.reject(D)}cs.set(g.auth._key(),w)}return g.bypassAuthState||cs.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,w=this;return(0,l.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(w,f);if("unknown"!==f.type){if(f.eventId){const D=yield w.auth._redirectUserForId(f.eventId);if(D)return w.user=D,g().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function Mc(){return(Mc=(0,l.Z)(function*(y,f){const g=Rc(f),w=hl(y);if(!(yield w._isAvailable()))return!1;const D="true"===(yield w._get(g));return yield w._remove(g),D})).apply(this,arguments)}function rh(y,f){return tp.apply(this,arguments)}function tp(){return(tp=(0,l.Z)(function*(y,f){return hl(y)._set(Rc(f),"true")})).apply(this,arguments)}function hl(y){return ln(y._redirectPersistence)}function Rc(y){return tn("pendingRedirect",y.config.apiKey,y.name)}function np(){return(np=(0,l.Z)(function*(y,f,g){const w=Nn(y);ai(y,f,sr);const D=N(w,g);return yield rh(D,w),D._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function ih(){return(ih=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y);ai(w.auth,f,sr);const D=N(w.auth,g);yield rh(D,w.auth);const M=yield no(w);return D._openRedirect(w.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function Ki(){return(Ki=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y);ai(w.auth,f,sr);const D=N(w.auth,g);yield zs(!1,w,f.providerId),yield rh(D,w.auth);const M=yield no(w);return D._openRedirect(w.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function sh(){return(sh=(0,l.Z)(function*(y,f){return yield Nn(y)._initializationPromise,Nc(y,f,!1)})).apply(this,arguments)}function Nc(y,f){return xm.apply(this,arguments)}function xm(){return(xm=(0,l.Z)(function*(y,f,g=!1){const w=Nn(y),D=N(w,f),j=yield new ma(w,D,g).execute();return j&&!g&&(delete j.user._redirectEventId,yield w._persistUserIfCurrent(j.user),yield w._setRedirectUser(null,f)),j})).apply(this,arguments)}function no(y){return pl.apply(this,arguments)}function pl(){return(pl=(0,l.Z)(function*(y){const f=Mo(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class gl{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(g=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Rm(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pc(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var w;if(f.error&&!Pc(f)){const D=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(Fn(this.auth,D))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const w=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(oh(f))}saveEventToCache(f){this.cachedEventUids.add(oh(f)),this.lastProcessedEventTime=Date.now()}}function oh(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Pc({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function ah(y){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,l.Z)(function*(y,f={}){return Cn(y,"GET","/v1/projects",f)})).apply(this,arguments)}const tv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kc=/^https?/;function uu(){return(uu=(0,l.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield ah(y);for(const g of f)try{if(nv(g))return}catch(w){}un(y,"unauthorized-domain")})).apply(this,arguments)}function nv(y){const f=rs(),{protocol:g,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const j=new URL(y);return""===j.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&j.hostname===w}if(!kc.test(g))return!1;if(tv.test(y))return w===y;const D=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(w)}const ip=new Lt(3e4,6e4);function Fc(){const y=On().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let uh=null;function rv(y){return uh=uh||function Nm(y){return new Promise((f,g)=>{var w,D,M;function j(){Fc(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Fc(),g(Fn(y,"network-request-failed"))},timeout:ip.get()})}if(null===(D=null===(w=On().gapi)||void 0===w?void 0:w.iframes)||void 0===D?void 0:D.Iframe)f(gapi.iframes.getContext());else{if(!(null===(M=On().gapi)||void 0===M?void 0:M.load)){const ee=No("iframefcb");return On()[ee]=()=>{gapi.load?j():g(Fn(y,"network-request-failed"))},fa(`https://apis.google.com/js/api.js?onload=${ee}`).catch(Ne=>g(Ne))}j()}}).catch(f=>{throw uh=null,f})}(y),uh}const Pm=new Lt(5e3,15e3),sv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ov=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function av(y){const f=y.config;xe(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?ot(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:re.SDK_VERSION},D=ov.get(y.config.apiHost);D&&(w.eid=D);const M=y._getFrameworks();return M.length&&(w.fw=M.join(",")),`${g}?${(0,F.xO)(w).slice(1)}`}function ml(){return ml=(0,l.Z)(function*(y){const f=yield rv(y),g=On().gapi;return xe(g,y,"internal-error"),f.open({where:document.body,url:av(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sv,dontclear:!0},w=>new Promise(function(){var D=(0,l.Z)(function*(M,j){yield w.restyle({setHideOnLeave:!1});const ee=Fn(y,"network-request-failed"),Ne=On().setTimeout(()=>{j(ee)},Pm.get());function Se(){On().clearTimeout(Ne),M(w)}w.ping(Se).then(Se,()=>{j(ee)})});return function(M,j){return D.apply(this,arguments)}}()))}),ml.apply(this,arguments)}const ch={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ap{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function ws(y,f,g,w,D,M){xe(y.config.authDomain,y,"auth-domain-config-required"),xe(y.config.apiKey,y,"invalid-api-key");const j={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:re.SDK_VERSION,eventId:D};if(f instanceof sr){f.setDefaultLanguage(y.languageCode),j.providerId=f.providerId||"",(0,F.xb)(f.getCustomParameters())||(j.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ne,Se]of Object.entries(M||{}))j[Ne]=Se}if(f instanceof gr){const Ne=f.getScopes().filter(Se=>""!==Se);Ne.length>0&&(j.scopes=Ne.join(","))}y.tenantId&&(j.tid=y.tenantId);const ee=j;for(const Ne of Object.keys(ee))void 0===ee[Ne]&&delete ee[Ne];return`${function lp({config:y}){return y.emulator?ot(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,F.xO)(ee).slice(1)}`}const Fm="webStorageSupport";class cu extends class Lc{constructor(f){this.factorId=f}_process(f,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,w);case"signin":return this._finalizeSignIn(f,g.credential);default:return Ir("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new cu(f)}_finalizeEnroll(f,g,w){return function eu(y,f){return Cn(y,"POST","/v2/accounts/mfaEnrollment:finalize",pt(y,f))}(f,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Xf(y,f){return Cn(y,"POST","/v2/accounts/mfaSignIn:finalize",pt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let uv=(()=>{class y{constructor(){}static assertion(g){return cu._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var yl="@firebase/auth",Uc="0.19.11";class dh{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,l.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(w=>{var D;f((null===(D=w)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function An(){return window}function vl(){return(vl=(0,l.Z)(function*(y,f,g){var w;const{BuildInfo:D}=An();rt(f.sessionId,"AuthEvent did not contain a session ID");const M=yield pC(f.sessionId),j={};return Ii()?j.ibi=D.packageName:bi()?j.apn=D.packageName:un(y,"operation-not-supported-in-this-environment"),D.displayName&&(j.appDisplayName=D.displayName),j.sessionId=M,ws(y,g,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,j)})).apply(this,arguments)}function wl(){return(wl=(0,l.Z)(function*(y){const{BuildInfo:f}=An(),g={};Ii()?g.iosBundleId=f.packageName:bi()?g.androidPackageName=f.packageName:un(y,"operation-not-supported-in-this-environment"),yield ah(y,g)})).apply(this,arguments)}function fp(){return(fp=(0,l.Z)(function*(y,f,g){const{cordova:w}=An();let D=()=>{};try{yield new Promise((M,j)=>{let ee=null;function Ne(){var Xe;M();const jt=null===(Xe=w.plugins.browsertab)||void 0===Xe?void 0:Xe.close;"function"==typeof jt&&jt(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Se(){ee||(ee=window.setTimeout(()=>{j(Fn(y,"redirect-cancelled-by-user"))},2e3))}function Qe(){"visible"===(null==document?void 0:document.visibilityState)&&Se()}f.addPassiveListener(Ne),document.addEventListener("resume",Se,!1),bi()&&document.addEventListener("visibilitychange",Qe,!1),D=()=>{f.removePassiveListener(Ne),document.removeEventListener("resume",Se,!1),document.removeEventListener("visibilitychange",Qe,!1),ee&&window.clearTimeout(ee)}})}finally{D()}})).apply(this,arguments)}function pC(y){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,l.Z)(function*(y){const f=El(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function El(y){if(rt(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}!function hh(y){(0,re._registerComponent)(new oe.wA("auth",(f,{options:g})=>{const w=f.getProvider("app").getImmediate(),D=f.getProvider("heartbeat"),{apiKey:M,authDomain:j}=w.options;return((ee,Ne)=>{xe(M&&!M.includes(":"),"invalid-api-key",{appName:ee.name}),xe(!(null==j?void 0:j.includes(":")),"argument-error",{appName:ee.name});const Se={apiKey:M,authDomain:j,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ui(y)},Qe=new Ud(ee,Ne,Se);return function wi(y,f){const g=(null==f?void 0:f.persistence)||[],w=(Array.isArray(g)?g:[g]).map(ln);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(Qe,g),Qe})(w,D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,w)=>{f.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new oe.wA("auth-internal",f=>{const g=Nn(f.getProvider("auth").getImmediate());return new dh(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(yl,Uc,function Lm(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,re.registerVersion)(yl,Uc,"esm2017")}("Browser");class du extends gl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,l.Z)(function*(){yield f.initPromise})()}}function xr(y){return hu.apply(this,arguments)}function hu(){return(hu=(0,l.Z)(function*(y){const f=yield mp()._get(ph(y));return f&&(yield mp()._remove(ph(y))),f})).apply(this,arguments)}function dv(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function mp(){return ln(tu)}function ph(y){return tn("authEvent",y.config.apiKey,y.name)}function jc(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,F.zd)(g.join("?"))}function fu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Fn("no-auth-event")}}function ya(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Vm(y=(0,F.z$)()){return!("file:"!==ya()&&"ionic:"!==ya()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function vp(){try{const y=self.localStorage,f=Mo();if(y)return y.setItem(f,"1"),y.removeItem(f),!function vv(y=(0,F.z$)()){return function _v(){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)}()||function yv(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch(y){return wp()&&(0,F.hl)()}return!1}function wp(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ep(){return(function Zc(){return"http:"===ya()||"https:"===ya()}()||(0,F.ru)()||Vm())&&!function mv(){return(0,F.b$)()||(0,F.UG)()}()&&vp()&&!wp()}function Cp(){return Vm()&&"undefined"!=typeof document}function gh(){return(gh=(0,l.Z)(function*(){return!!Cp()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Yi={LOCAL:"local",NONE:"none",SESSION:"session"},Hc=xe,va="persistence";function bp(y){return Ip.apply(this,arguments)}function Ip(){return(Ip=(0,l.Z)(function*(y){yield y._initializationPromise;const f=Bm(),g=tn(va,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Bm(){var y;try{return(null===(y=function Ev(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const io=xe;class so{constructor(){this.browserResolver=ln(class hC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ar,this._completeRedirectFn=Nc}_openPopup(f,g,w,D){var M=this;return(0,l.Z)(function*(){var j;rt(null===(j=M.eventManagers[f._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const ee=ws(f,g,w,rs(),D);return function dC(y,f,g,w=500,D=600){const M=Math.max((window.screen.availHeight-D)/2,0).toString(),j=Math.max((window.screen.availWidth-w)/2,0).toString();let ee="";const Ne=Object.assign(Object.assign({},ch),{width:w.toString(),height:D.toString(),top:M,left:j}),Se=(0,F.z$)().toLowerCase();g&&(ee=qs(Se)?"_blank":g),Nt(Se)&&(f=f||"http://localhost",Ne.scrollbars="yes");const Qe=Object.entries(Ne).reduce((jt,[Mr,Es])=>`${jt}${Mr}=${Es},`,"");if(function pn(y=(0,F.z$)()){var f;return Ii(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Se)&&"_self"!==ee)return function km(y,f){const g=document.createElement("a");g.href=y,g.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(f||"",ee),new ap(null);const Xe=window.open(f||"",ee,Qe);xe(Xe,y,"popup-blocked");try{Xe.focus()}catch(jt){}return new ap(Xe)}(f,ee,Mo())})()}_openRedirect(f,g,w,D){var M=this;return(0,l.Z)(function*(){return yield M._originValidation(f),function Tc(y){On().location.href=y}(ws(f,g,w,rs(),D)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:D,promise:M}=this.eventManagers[g];return D?Promise.resolve(D):(rt(M,"If manager is not set, promise should be"),M)}const w=this.initAndGetManager(f);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(f){var g=this;return(0,l.Z)(function*(){const w=yield function lh(y){return ml.apply(this,arguments)}(f),D=new gl(f);return w.register("authEvent",M=>(xe(null==M?void 0:M.authEvent,f,"invalid-auth-event"),{status:D.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:D},g.iframes[f._key()]=w,D})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Fm,{type:Fm},D=>{var M;const j=null===(M=null==D?void 0:D[0])||void 0===M?void 0:M[Fm];void 0!==j&&g(!!j),un(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function _a(y){return uu.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return ac()||Go()||Ii()}}),this.cordovaResolver=ln(class hv{constructor(){this._redirectPersistence=ar,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Nc}_initialize(f){var g=this;return(0,l.Z)(function*(){const w=f._key();let D=g.eventManagers.get(w);return D||(D=new du(f),g.eventManagers.set(w,D),g.attachCallbackListeners(f,D)),D})()}_openPopup(f){un(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,w,D){var M=this;return(0,l.Z)(function*(){!function cv(y){var f,g,w,D,M,j,ee,Ne,Se,Qe;const Xe=An();xe("function"==typeof(null===(f=null==Xe?void 0:Xe.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),xe(void 0!==(null===(g=null==Xe?void 0:Xe.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),xe("function"==typeof(null===(M=null===(D=null===(w=null==Xe?void 0:Xe.cordova)||void 0===w?void 0:w.plugins)||void 0===D?void 0:D.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),xe("function"==typeof(null===(Ne=null===(ee=null===(j=null==Xe?void 0:Xe.cordova)||void 0===j?void 0:j.plugins)||void 0===ee?void 0:ee.browsertab)||void 0===Ne?void 0:Ne.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),xe("function"==typeof(null===(Qe=null===(Se=null==Xe?void 0:Xe.cordova)||void 0===Se?void 0:Se.InAppBrowser)||void 0===Qe?void 0:Qe.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const j=yield M._initialize(f);yield j.initialized(),j.resetRedirect(),function dl(){cs.clear()}(),yield M._originValidation(f);const ee=function pp(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:dv(),postBody:null,tenantId:y.tenantId,error:Fn(y,"no-auth-event")}}(f,w,D);yield function Bc(y,f){return mp()._set(ph(y),f)}(f,ee);const Ne=yield function ds(y,f,g){return vl.apply(this,arguments)}(f,ee,g),Se=yield function fh(y){const{cordova:f}=An();return new Promise(g=>{f.plugins.browsertab.isAvailable(w=>{let D=null;w?f.plugins.browsertab.openUrl(y):D=f.InAppBrowser.open(y,function Ur(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(D)})})}(Ne);return function lv(y,f,g){return fp.apply(this,arguments)}(f,j,Se)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function hp(y){return wl.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:w,handleOpenURL:D,BuildInfo:M}=An(),j=setTimeout((0,l.Z)(function*(){yield xr(f),g.onEvent(fu())}),500),ee=function(){var Qe=(0,l.Z)(function*(Xe){clearTimeout(j);const jt=yield xr(f);let Mr=null;jt&&(null==Xe?void 0:Xe.url)&&(Mr=function gp(y,f){var g,w;const D=function Um(y){const f=jc(y),g=f.link?decodeURIComponent(f.link):void 0,w=jc(g).link,D=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return jc(D).link||D||w||g||y}(f);if(D.includes("/__/auth/callback")){const M=jc(D),j=M.firebaseError?function _p(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(M.firebaseError)):null,ee=null===(w=null===(g=null==j?void 0:j.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Ne=ee?Fn(ee):null;return Ne?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ne,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:D,postBody:null}}return null}(jt,Xe.url)),g.onEvent(Mr||fu())});return function(jt){return Qe.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,ee);const Ne=D,Se=`${M.packageName.toLowerCase()}://`;An().handleOpenURL=function(){var Qe=(0,l.Z)(function*(Xe){if(Xe.toLowerCase().startsWith(Se)&&ee({url:Xe}),"function"==typeof Ne)try{Ne(Xe)}catch(jt){console.error(jt)}});return function(Xe){return Qe.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ar,this._completeRedirectFn=Nc}_initialize(f){var g=this;return(0,l.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,w,D){var M=this;return(0,l.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(f,g,w,D)})()}_openRedirect(f,g,w,D){var M=this;return(0,l.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(f,g,w,D)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Cp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return io(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,l.Z)(function*(){if(f.underlyingResolver)return;const g=yield function wv(){return gh.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function mh(y){return y.unwrap()}function jm(y){return Dp(y)}function Dp(y){const{_tokenResponse:f}=y instanceof F.ZR?y.customData:y;if(!f)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return T.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=Ws;break;case"facebook.com":w=Xo;break;case"github.com":w=nn;break;case"twitter.com":w=Co;break;default:const{oauthIdToken:D,oauthAccessToken:M,oauthTokenSecret:j,pendingToken:ee,nonce:Ne}=f;return M||j||D||ee?ee?g.startsWith("saml.")?Ti._create(g,ee):ir._fromParams({providerId:g,signInMethod:g,pendingToken:ee,idToken:D,accessToken:M}):new qi(g).credential({idToken:D,accessToken:M,rawNonce:Ne}):null}return y instanceof F.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function fi(y,f){return f.catch(g=>{throw g instanceof F.ZR&&function pu(y,f){var g;const w=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Ap(y,function Dt(y,f){var g;const w=(0,F.m9)(y),D=f;return xe(f.customData.operationType,w,"argument-error"),xe(null===(g=D.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),Zi._fromError(w,D)}(y,f));else if(w){const D=Dp(f),M=f;D&&(M.credential=D,M.tenantId=w.tenantId||void 0,M.email=w.email||void 0,M.phoneNumber=w.phoneNumber||void 0)}}(y,g),g}).then(g=>{const D=g.user;return{operationType:g.operationType,credential:jm(g),additionalUserInfo:gt(g),user:wa.getOrCreate(D)}})}function Gc(y,f){return gu.apply(this,arguments)}function gu(){return(gu=(0,l.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:w=>fi(y,g.confirm(w))}})).apply(this,arguments)}class Ap{constructor(f,g){this.resolver=g,this.auth=function Cv(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return fi(mh(this.auth),this.resolver.resolveSignIn(f))}}class wa{constructor(f){this._delegate=f,this.multiFactor=function la(y){const f=(0,F.m9)(y);return Pn.has(f)||Pn.set(f,Qs._fromUser(f)),Pn.get(f)}(f)}static getOrCreate(f){return wa.USER_MAP.has(f)||wa.USER_MAP.set(f,new wa(f)),wa.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,l.Z)(function*(){return fi(g.auth,za(g._delegate,f))})()}linkWithPhoneNumber(f,g){var w=this;return(0,l.Z)(function*(){return Gc(w.auth,function Un(y,f,g){return Sr.apply(this,arguments)}(w._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,l.Z)(function*(){return fi(g.auth,function di(y,f,g){return us.apply(this,arguments)}(g._delegate,f,so))})()}linkWithRedirect(f){var g=this;return(0,l.Z)(function*(){return yield bp(Nn(g.auth)),function rp(y,f,g){return function fl(y,f,g){return Ki.apply(this,arguments)}(y,f,g)}(g._delegate,f,so)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,l.Z)(function*(){return fi(g.auth,is(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Gc(this.auth,function nh(y,f,g){return Po.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return fi(this.auth,function ci(y,f,g){return kn.apply(this,arguments)}(this._delegate,f,so))}reauthenticateWithRedirect(f){var g=this;return(0,l.Z)(function*(){return yield bp(Nn(g.auth)),function cC(y,f,g){return function ev(y,f,g){return ih.apply(this,arguments)}(y,f,g)}(g._delegate,f,so)})()}sendEmailVerification(f){return function Do(y,f){return Ya.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,l.Z)(function*(){return yield function Ie(y,f){return Bt.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function ym(y,f){return Qa((0,F.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function vm(y,f){return Qa((0,F.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Am(y,f){return I.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Tn(y,f){return Ao.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function rl(y,f,g){return il.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}wa.USER_MAP=new WeakMap;const oo=xe;let _h=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=g.options;oo(D,"invalid-api-key",{appName:g.name}),oo(D,"invalid-api-key",{appName:g.name});const M="undefined"!=typeof window?so:void 0;this._delegate=w.initialize({options:{persistence:qm(D,g.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(ns),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?wa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function Vi(y,f,g){const w=Nn(y);xe(w._canInitEmulator,w,"emulator-config-failed"),xe(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const D=!!(null==g?void 0:g.disableWarnings),M=Vd(f),{host:j,port:ee}=function pm(y){const f=Vd(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(w);if(D){const M=D[1];return{host:M,port:Ff(w.substr(M.length+1))}}{const[M,j]=w.split(":");return{host:M,port:Ff(j)}}}(f);w.config.emulator={url:`${M}//${j}${null===ee?"":`:${ee}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:j,port:ee,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function Bi(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function qf(y,f){return aa.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Qu(this._delegate,g)}confirmPasswordReset(g,w){return function vc(y,f,g){return Ka.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var D=this;return(0,l.Z)(function*(){return fi(D._delegate,function el(y,f,g){return Yd.apply(this,arguments)}(D._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Xy(y,f){return Gf.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function In(y,f){const g=vn.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,l.Z)(function*(){oo(Ep(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function vs(y,f){return sh.apply(this,arguments)}(g._delegate,so);return w?fi(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function pv(y,f){Nn(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,w,D){const{next:M,error:j,complete:ee}=Sp(g,w,D);return this._delegate.onAuthStateChanged(M,j,ee)}onIdTokenChanged(g,w,D){const{next:M,error:j,complete:ee}=Sp(g,w,D);return this._delegate.onIdTokenChanged(M,j,ee)}sendSignInLinkToEmail(g,w){return function or(y,f,g){return _r.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function Yu(y,f,g){return oa.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,l.Z)(function*(){let D;switch(function Oo(y,f){Hc(Object.values(Yi).includes(f),y,"invalid-persistence-type"),(0,F.b$)()?Hc(f!==Yi.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?Hc(f===Yi.NONE,y,"unsupported-persistence-type"):wp()?Hc(f===Yi.NONE||f===Yi.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):Hc(f===Yi.NONE||vp(),y,"unsupported-persistence-type")}(w._delegate,g),g){case Yi.SESSION:D=ar;break;case Yi.LOCAL:D=(yield ln(Gi)._isAvailable())?Gi:tu;break;case Yi.NONE:D=Lr;break;default:return un("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return fi(this._delegate,function Wu(y){return Ha.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return fi(this._delegate,zu(this._delegate,g))}signInWithCustomToken(g){return fi(this._delegate,function _c(y,f){return Ku.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return fi(this._delegate,function $f(y,f,g){return zu((0,F.m9)(y),Jo.credential(f,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return fi(this._delegate,function Zf(y,f,g){return tl.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Gc(this._delegate,function as(y,f,g){return su.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,l.Z)(function*(){return oo(Ep(),w._delegate,"operation-not-supported-in-this-environment"),fi(w._delegate,function Yt(y,f,g){return At.apply(this,arguments)}(w._delegate,g,so))})()}signInWithRedirect(g){var w=this;return(0,l.Z)(function*(){return oo(Ep(),w._delegate,"operation-not-supported-in-this-environment"),yield bp(w._delegate),function lC(y,f,g){return function Sm(y,f,g){return np.apply(this,arguments)}(y,f,g)}(w._delegate,g,so)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function wc(y,f){return Xu.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Yi,y})();function Sp(y,f,g){let w=y;"function"!=typeof y&&({next:w,error:f,complete:g}=y);const D=w;return{next:j=>D(j&&wa.getOrCreate(j)),error:f,complete:g}}function qm(y,f){const g=function Tp(y,f){const g=Bm();if(!g)return[];const w=tn(va,y,f);switch(g.getItem(w)){case Yi.NONE:return[Lr];case Yi.LOCAL:return[Gi,ar];case Yi.SESSION:return[ar];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(Gi)&&g.push(Gi),"undefined"!=typeof window)for(const w of[tu,ar])g.includes(w)||g.push(w);return g.includes(Lr)||g.push(Lr),g}class Wc{constructor(){this.providerId="phone",this._delegate=new T(mh(Q.Z.auth()))}static credential(f,g){return T.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Wc.PHONE_SIGN_IN_METHOD=T.PHONE_SIGN_IN_METHOD,Wc.PROVIDER_ID=T.PROVIDER_ID;const bv=xe;class vr{constructor(f,g,w=Q.Z.app()){var D;bv(null===(D=w.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new zi(f,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function yh(y){y.INTERNAL.registerComponent(new oe.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new _h(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Jo,FacebookAuthProvider:Xo,GithubAuthProvider:nn,GoogleAuthProvider:Ws,OAuthProvider:qi,SAMLAuthProvider:Ar,PhoneAuthProvider:Wc,PhoneMultiFactorGenerator:uv,RecaptchaVerifier:vr,TwitterAuthProvider:Co,Auth:_h,AuthCredential:ja,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(Q.Z)},8306:(at,Ce,L)=>{L.d(Ce,{y:()=>$});var l=L(930),Q=L(727),F=L(8822),re=L(4671);var ie=L(2416),ce=L(576),de=L(2806);let $=(()=>{class De{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const he=new De;return he.source=this,he.operator=Ue,he}subscribe(Ue,he,pe){const Le=function $e(De){return De&&De instanceof l.Lv||function te(De){return De&&(0,ce.m)(De.next)&&(0,ce.m)(De.error)&&(0,ce.m)(De.complete)}(De)&&(0,Q.Nn)(De)}(Ue)?Ue:new l.Hp(Ue,he,pe);return(0,de.x)(()=>{const{operator:Ve,source:Pe}=this;Le.add(Ve?Ve.call(Le,Pe):Pe?this._subscribe(Le):this._trySubscribe(Le))}),Le}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(he){Ue.error(he)}}forEach(Ue,he){return new(he=H(he))((pe,Le)=>{let Ve;Ve=this.subscribe(Pe=>{try{Ue(Pe)}catch(et){Le(et),null==Ve||Ve.unsubscribe()}},Le,pe)})}_subscribe(Ue){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Ue)}[F.L](){return this}pipe(...Ue){return function ve(De){return 0===De.length?re.y:1===De.length?De[0]:function(Ue){return De.reduce((he,pe)=>pe(he),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=H(Ue))((he,pe)=>{let Le;this.subscribe(Ve=>Le=Ve,Ve=>pe(Ve),()=>he(Le))})}}return De.create=Re=>new De(Re),De})();function H(De){var Re;return null!==(Re=null!=De?De:ie.v.Promise)&&void 0!==Re?Re:Promise}},7579:(at,Ce,L)=>{L.d(Ce,{x:()=>ie});var l=L(8306),Q=L(727);const re=(0,L(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=L(8737),ve=L(2806);let ie=(()=>{class de extends l.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const te=new ce(this,this);return te.operator=H,te}_throwIfClosed(){if(this.closed)throw new re}next(H){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const te=this.observers.slice();for(const $e of te)$e.next(H)}})}error(H){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:te}=this;for(;te.length;)te.shift().error(H)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:te,isStopped:$e,observers:De}=this;return te||$e?Q.Lc:(De.push(H),new Q.w0(()=>(0,ne.P)(De,H)))}_checkFinalizedStatuses(H){const{hasError:te,thrownError:$e,isStopped:De}=this;te?H.error($e):De&&H.complete()}asObservable(){const H=new l.y;return H.source=this,H}}return de.create=($,H)=>new ce($,H),de})();class ce extends ie{constructor($,H){super(),this.destination=$,this.source=H}next($){var H,te;null===(te=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===te||te.call(H,$)}error($){var H,te;null===(te=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===te||te.call(H,$)}complete(){var $,H;null===(H=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===H||H.call($)}_subscribe($){var H,te;return null!==(te=null===(H=this.source)||void 0===H?void 0:H.subscribe($))&&void 0!==te?te:Q.Lc}}},930:(at,Ce,L)=>{L.d(Ce,{Hp:()=>$e,Lv:()=>te});var l=L(576),Q=L(727),F=L(2416),re=L(7849),ne=L(5032);const ve=de("C",void 0,void 0);function de(pe,Le,Ve){return{kind:pe,value:Le,error:Ve}}var $=L(3410),H=L(2806);class te extends Q.w0{constructor(Le){super(),this.isStopped=!1,Le?(this.destination=Le,(0,Q.Nn)(Le)&&Le.add(this)):this.destination=he}static create(Le,Ve,Pe){return new $e(Le,Ve,Pe)}next(Le){this.isStopped?Ue(function ce(pe){return de("N",pe,void 0)}(Le),this):this._next(Le)}error(Le){this.isStopped?Ue(function ie(pe){return de("E",void 0,pe)}(Le),this):(this.isStopped=!0,this._error(Le))}complete(){this.isStopped?Ue(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Le){this.destination.next(Le)}_error(Le){try{this.destination.error(Le)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class $e extends te{constructor(Le,Ve,Pe){let et;if(super(),(0,l.m)(Le))et=Le;else if(Le){let Ae;({next:et,error:Ve,complete:Pe}=Le),this&&F.v.useDeprecatedNextContext?(Ae=Object.create(Le),Ae.unsubscribe=()=>this.unsubscribe()):Ae=Le,et=null==et?void 0:et.bind(Ae),Ve=null==Ve?void 0:Ve.bind(Ae),Pe=null==Pe?void 0:Pe.bind(Ae)}this.destination={next:et?De(et):ne.Z,error:De(null!=Ve?Ve:Re),complete:Pe?De(Pe):ne.Z}}}function De(pe,Le){return(...Ve)=>{try{pe(...Ve)}catch(Pe){F.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Pe):(0,re.h)(Pe)}}}function Re(pe){throw pe}function Ue(pe,Le){const{onStoppedNotification:Ve}=F.v;Ve&&$.z.setTimeout(()=>Ve(pe,Le))}const he={closed:!0,next:ne.Z,error:Re,complete:ne.Z}},727:(at,Ce,L)=>{L.d(Ce,{Lc:()=>ve,w0:()=>ne,Nn:()=>ie});var l=L(576);const F=(0,L(3888).d)(de=>function(H){de(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((te,$e)=>`${$e+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var re=L(8737);class ne{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const De of H)De.remove(this);else H.remove(this);const{initialTeardown:te}=this;if((0,l.m)(te))try{te()}catch(De){$=De instanceof F?De.errors:[De]}const{_teardowns:$e}=this;if($e){this._teardowns=null;for(const De of $e)try{ce(De)}catch(Re){$=null!=$?$:[],Re instanceof F?$=[...$,...Re.errors]:$.push(Re)}}if($)throw new F($)}}add($){var H;if($&&$!==this)if(this.closed)ce($);else{if($ instanceof ne){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._teardowns=null!==(H=this._teardowns)&&void 0!==H?H:[]).push($)}}_hasParent($){const{_parentage:H}=this;return H===$||Array.isArray(H)&&H.includes($)}_addParent($){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push($),H):H?[H,$]:$}_removeParent($){const{_parentage:H}=this;H===$?this._parentage=null:Array.isArray(H)&&(0,re.P)(H,$)}remove($){const{_teardowns:H}=this;H&&(0,re.P)(H,$),$ instanceof ne&&$._removeParent(this)}}ne.EMPTY=(()=>{const de=new ne;return de.closed=!0,de})();const ve=ne.EMPTY;function ie(de){return de instanceof ne||de&&"closed"in de&&(0,l.m)(de.remove)&&(0,l.m)(de.add)&&(0,l.m)(de.unsubscribe)}function ce(de){(0,l.m)(de)?de():de.unsubscribe()}},2416:(at,Ce,L)=>{L.d(Ce,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,Ce,L)=>{L.d(Ce,{E:()=>Q});const Q=new(L(8306).y)(ne=>ne.complete())},8996:(at,Ce,L)=>{L.d(Ce,{D:()=>et});var l=L(8421),Q=L(5363),F=L(9468),ve=L(8306),ce=L(2202),de=L(576),$=L(9672);function te(Ae,it){if(!Ae)throw new Error("Iterable cannot be null");return new ve.y(Ge=>{(0,$.f)(Ge,it,()=>{const mt=Ae[Symbol.asyncIterator]();(0,$.f)(Ge,it,()=>{mt.next().then(J=>{J.done?Ge.complete():Ge.next(J.value)})},0,!0)})})}var $e=L(3670),De=L(8239),Re=L(1144),Ue=L(6495),he=L(2206),pe=L(4532),Le=L(3260);function et(Ae,it){return it?function Pe(Ae,it){if(null!=Ae){if((0,$e.c)(Ae))return function re(Ae,it){return(0,l.Xf)(Ae).pipe((0,F.R)(it),(0,Q.Q)(it))}(Ae,it);if((0,Re.z)(Ae))return function ie(Ae,it){return new ve.y(Ge=>{let mt=0;return it.schedule(function(){mt===Ae.length?Ge.complete():(Ge.next(Ae[mt++]),Ge.closed||this.schedule())})})}(Ae,it);if((0,De.t)(Ae))return function ne(Ae,it){return(0,l.Xf)(Ae).pipe((0,F.R)(it),(0,Q.Q)(it))}(Ae,it);if((0,he.D)(Ae))return te(Ae,it);if((0,Ue.T)(Ae))return function H(Ae,it){return new ve.y(Ge=>{let mt;return(0,$.f)(Ge,it,()=>{mt=Ae[ce.h](),(0,$.f)(Ge,it,()=>{let J,me;try{({value:J,done:me}=mt.next())}catch(ye){return void Ge.error(ye)}me?Ge.complete():Ge.next(J)},0,!0)}),()=>(0,de.m)(null==mt?void 0:mt.return)&&mt.return()})}(Ae,it);if((0,Le.L)(Ae))return function Ve(Ae,it){return te((0,Le.Q)(Ae),it)}(Ae,it)}throw(0,pe.z)(Ae)}(Ae,it):(0,l.Xf)(Ae)}},8421:(at,Ce,L)=>{L.d(Ce,{Xf:()=>$e});var l=L(5987),Q=L(1144),F=L(8239),re=L(8306),ne=L(3670),ve=L(2206),ie=L(4532),ce=L(6495),de=L(3260),$=L(576),H=L(7849),te=L(8822);function $e(Pe){if(Pe instanceof re.y)return Pe;if(null!=Pe){if((0,ne.c)(Pe))return function De(Pe){return new re.y(et=>{const Ae=Pe[te.L]();if((0,$.m)(Ae.subscribe))return Ae.subscribe(et);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,Q.z)(Pe))return function Re(Pe){return new re.y(et=>{for(let Ae=0;Ae<Pe.length&&!et.closed;Ae++)et.next(Pe[Ae]);et.complete()})}(Pe);if((0,F.t)(Pe))return function Ue(Pe){return new re.y(et=>{Pe.then(Ae=>{et.closed||(et.next(Ae),et.complete())},Ae=>et.error(Ae)).then(null,H.h)})}(Pe);if((0,ve.D)(Pe))return pe(Pe);if((0,ce.T)(Pe))return function he(Pe){return new re.y(et=>{for(const Ae of Pe)if(et.next(Ae),et.closed)return;et.complete()})}(Pe);if((0,de.L)(Pe))return function Le(Pe){return pe((0,de.Q)(Pe))}(Pe)}throw(0,ie.z)(Pe)}function pe(Pe){return new re.y(et=>{(function Ve(Pe,et){var Ae,it,Ge,mt;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,l.KL)(Pe);!(it=yield Ae.next()).done;)if(et.next(it.value),et.closed)return}catch(J){Ge={error:J}}finally{try{it&&!it.done&&(mt=Ae.return)&&(yield mt.call(Ae))}finally{if(Ge)throw Ge.error}}et.complete()})})(Pe,et).catch(Ae=>et.error(Ae))})}},6451:(at,Ce,L)=>{L.d(Ce,{T:()=>ve});var l=L(8189),Q=L(8421),F=L(515),re=L(7669),ne=L(8996);function ve(...ie){const ce=(0,re.yG)(ie),de=(0,re._6)(ie,1/0),$=ie;return $.length?1===$.length?(0,Q.Xf)($[0]):(0,l.J)(de)((0,ne.D)($,ce)):F.E}},5403:(at,Ce,L)=>{L.d(Ce,{Q:()=>Q});var l=L(930);class Q extends l.Lv{constructor(re,ne,ve,ie,ce){super(re),this.onFinalize=ce,this._next=ne?function(de){try{ne(de)}catch($){re.error($)}}:super._next,this._error=ie?function(de){try{ie(de)}catch($){re.error($)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(de){re.error(de)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;const{closed:ne}=this;super.unsubscribe(),!ne&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}},4004:(at,Ce,L)=>{L.d(Ce,{U:()=>F});var l=L(4482),Q=L(5403);function F(re,ne){return(0,l.e)((ve,ie)=>{let ce=0;ve.subscribe(new Q.Q(ie,de=>{ie.next(re.call(ne,de,ce++))}))})}},8189:(at,Ce,L)=>{L.d(Ce,{J:()=>F});var l=L(5577),Q=L(4671);function F(re=1/0){return(0,l.z)(Q.y,re)}},5577:(at,Ce,L)=>{L.d(Ce,{z:()=>ce});var l=L(4004),Q=L(8421),F=L(4482),re=L(9672),ne=L(5403),ie=L(576);function ce(de,$,H=1/0){return(0,ie.m)($)?ce((te,$e)=>(0,l.U)((De,Re)=>$(te,De,$e,Re))((0,Q.Xf)(de(te,$e))),H):("number"==typeof $&&(H=$),(0,F.e)((te,$e)=>function ve(de,$,H,te,$e,De,Re,Ue){const he=[];let pe=0,Le=0,Ve=!1;const Pe=()=>{Ve&&!he.length&&!pe&&$.complete()},et=it=>pe<te?Ae(it):he.push(it),Ae=it=>{De&&$.next(it),pe++;let Ge=!1;(0,Q.Xf)(H(it,Le++)).subscribe(new ne.Q($,mt=>{null==$e||$e(mt),De?et(mt):$.next(mt)},()=>{Ge=!0},void 0,()=>{if(Ge)try{for(pe--;he.length&&pe<te;){const mt=he.shift();Re?(0,re.f)($,Re,()=>Ae(mt)):Ae(mt)}Pe()}catch(mt){$.error(mt)}}))};return de.subscribe(new ne.Q($,et,()=>{Ve=!0,Pe()})),()=>{null==Ue||Ue()}}(te,$e,de,H)))}},5363:(at,Ce,L)=>{L.d(Ce,{Q:()=>re});var l=L(9672),Q=L(4482),F=L(5403);function re(ne,ve=0){return(0,Q.e)((ie,ce)=>{ie.subscribe(new F.Q(ce,de=>(0,l.f)(ce,ne,()=>ce.next(de),ve),()=>(0,l.f)(ce,ne,()=>ce.complete(),ve),de=>(0,l.f)(ce,ne,()=>ce.error(de),ve)))})}},3099:(at,Ce,L)=>{L.d(Ce,{B:()=>ve});var l=L(8996),Q=L(5698),F=L(7579),re=L(930),ne=L(4482);function ve(ce={}){const{connector:de=(()=>new F.x),resetOnError:$=!0,resetOnComplete:H=!0,resetOnRefCountZero:te=!0}=ce;return $e=>{let De=null,Re=null,Ue=null,he=0,pe=!1,Le=!1;const Ve=()=>{null==Re||Re.unsubscribe(),Re=null},Pe=()=>{Ve(),De=Ue=null,pe=Le=!1},et=()=>{const Ae=De;Pe(),null==Ae||Ae.unsubscribe()};return(0,ne.e)((Ae,it)=>{he++,!Le&&!pe&&Ve();const Ge=Ue=null!=Ue?Ue:de();it.add(()=>{he--,0===he&&!Le&&!pe&&(Re=ie(et,te))}),Ge.subscribe(it),De||(De=new re.Hp({next:mt=>Ge.next(mt),error:mt=>{Le=!0,Ve(),Re=ie(Pe,$,mt),Ge.error(mt)},complete:()=>{pe=!0,Ve(),Re=ie(Pe,H),Ge.complete()}}),(0,l.D)(Ae).subscribe(De))})($e)}}function ie(ce,de,...$){return!0===de?(ce(),null):!1===de?null:de(...$).pipe((0,Q.q)(1)).subscribe(()=>ce())}},9468:(at,Ce,L)=>{L.d(Ce,{R:()=>Q});var l=L(4482);function Q(F,re=0){return(0,l.e)((ne,ve)=>{ve.add(F.schedule(()=>ne.subscribe(ve),re))})}},5698:(at,Ce,L)=>{L.d(Ce,{q:()=>re});var l=L(515),Q=L(4482),F=L(5403);function re(ne){return ne<=0?()=>l.E:(0,Q.e)((ve,ie)=>{let ce=0;ve.subscribe(new F.Q(ie,de=>{++ce<=ne&&(ie.next(de),ne<=ce&&ie.complete())}))})}},8505:(at,Ce,L)=>{L.d(Ce,{b:()=>ne});var l=L(576),Q=L(4482),F=L(5403),re=L(4671);function ne(ve,ie,ce){const de=(0,l.m)(ve)||ie||ce?{next:ve,error:ie,complete:ce}:ve;return de?(0,Q.e)(($,H)=>{var te;null===(te=de.subscribe)||void 0===te||te.call(de);let $e=!0;$.subscribe(new F.Q(H,De=>{var Re;null===(Re=de.next)||void 0===Re||Re.call(de,De),H.next(De)},()=>{var De;$e=!1,null===(De=de.complete)||void 0===De||De.call(de),H.complete()},De=>{var Re;$e=!1,null===(Re=de.error)||void 0===Re||Re.call(de,De),H.error(De)},()=>{var De,Re;$e&&(null===(De=de.unsubscribe)||void 0===De||De.call(de)),null===(Re=de.finalize)||void 0===Re||Re.call(de)}))}):re.y}},4408:(at,Ce,L)=>{L.d(Ce,{o:()=>ne});var l=L(727);class Q extends l.w0{constructor(ie,ce){super()}schedule(ie,ce=0){return this}}const F={setInterval(...ve){const{delegate:ie}=F;return((null==ie?void 0:ie.setInterval)||setInterval)(...ve)},clearInterval(ve){const{delegate:ie}=F;return((null==ie?void 0:ie.clearInterval)||clearInterval)(ve)},delegate:void 0};var re=L(8737);class ne extends Q{constructor(ie,ce){super(ie,ce),this.scheduler=ie,this.work=ce,this.pending=!1}schedule(ie,ce=0){if(this.closed)return this;this.state=ie;const de=this.id,$=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId($,de,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId($,this.id,ce),this}requestAsyncId(ie,ce,de=0){return F.setInterval(ie.flush.bind(ie,this),de)}recycleAsyncId(ie,ce,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return ce;F.clearInterval(ce)}execute(ie,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(ie,ce);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,ce){let $,de=!1;try{this.work(ie)}catch(H){de=!0,$=H||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ie,scheduler:ce}=this,{actions:de}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(de,this),null!=ie&&(this.id=this.recycleAsyncId(ce,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,Ce,L)=>{L.d(Ce,{v:()=>F});var l=L(6063);class Q{constructor(ne,ve=Q.now){this.schedulerActionCtor=ne,this.now=ve}schedule(ne,ve=0,ie){return new this.schedulerActionCtor(this,ne).schedule(ie,ve)}}Q.now=l.l.now;class F extends Q{constructor(ne,ve=Q.now){super(ne,ve),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ne){const{actions:ve}=this;if(this._active)return void ve.push(ne);let ie;this._active=!0;do{if(ie=ne.execute(ne.state,ne.delay))break}while(ne=ve.shift());if(this._active=!1,ie){for(;ne=ve.shift();)ne.unsubscribe();throw ie}}}},4986:(at,Ce,L)=>{L.d(Ce,{z:()=>F});var l=L(4408);const F=new(L(7565).v)(l.o)},6063:(at,Ce,L)=>{L.d(Ce,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(at,Ce,L)=>{L.d(Ce,{z:()=>l});const l={setTimeout(...Q){const{delegate:F}=l;return((null==F?void 0:F.setTimeout)||setTimeout)(...Q)},clearTimeout(Q){const{delegate:F}=l;return((null==F?void 0:F.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},2202:(at,Ce,L)=>{L.d(Ce,{h:()=>Q});const Q=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,Ce,L)=>{L.d(Ce,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,Ce,L)=>{L.d(Ce,{_6:()=>ve,jO:()=>re,yG:()=>ne});var l=L(576);function F(ie){return ie[ie.length-1]}function re(ie){return(0,l.m)(F(ie))?ie.pop():void 0}function ne(ie){return function Q(ie){return ie&&(0,l.m)(ie.schedule)}(F(ie))?ie.pop():void 0}function ve(ie,ce){return"number"==typeof F(ie)?ie.pop():ce}},8737:(at,Ce,L)=>{function l(Q,F){if(Q){const re=Q.indexOf(F);0<=re&&Q.splice(re,1)}}L.d(Ce,{P:()=>l})},3888:(at,Ce,L)=>{function l(Q){const re=Q(ne=>{Error.call(ne),ne.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}L.d(Ce,{d:()=>l})},2806:(at,Ce,L)=>{L.d(Ce,{O:()=>re,x:()=>F});var l=L(2416);let Q=null;function F(ne){if(l.v.useDeprecatedSynchronousErrorHandling){const ve=!Q;if(ve&&(Q={errorThrown:!1,error:null}),ne(),ve){const{errorThrown:ie,error:ce}=Q;if(Q=null,ie)throw ce}}else ne()}function re(ne){l.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=ne)}},9672:(at,Ce,L)=>{function l(Q,F,re,ne=0,ve=!1){const ie=F.schedule(function(){re(),ve?Q.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(Q.add(ie),!ve)return ie}L.d(Ce,{f:()=>l})},4671:(at,Ce,L)=>{function l(Q){return Q}L.d(Ce,{y:()=>l})},1144:(at,Ce,L)=>{L.d(Ce,{z:()=>l});const l=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(at,Ce,L)=>{L.d(Ce,{D:()=>Q});var l=L(576);function Q(F){return Symbol.asyncIterator&&(0,l.m)(null==F?void 0:F[Symbol.asyncIterator])}},576:(at,Ce,L)=>{function l(Q){return"function"==typeof Q}L.d(Ce,{m:()=>l})},3670:(at,Ce,L)=>{L.d(Ce,{c:()=>F});var l=L(8822),Q=L(576);function F(re){return(0,Q.m)(re[l.L])}},6495:(at,Ce,L)=>{L.d(Ce,{T:()=>F});var l=L(2202),Q=L(576);function F(re){return(0,Q.m)(null==re?void 0:re[l.h])}},8239:(at,Ce,L)=>{L.d(Ce,{t:()=>Q});var l=L(576);function Q(F){return(0,l.m)(null==F?void 0:F.then)}},3260:(at,Ce,L)=>{L.d(Ce,{L:()=>re,Q:()=>F});var l=L(5987),Q=L(576);function F(ne){return(0,l.FC)(this,arguments,function*(){const ie=ne.getReader();try{for(;;){const{value:ce,done:de}=yield(0,l.qq)(ie.read());if(de)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(ce)}}finally{ie.releaseLock()}})}function re(ne){return(0,Q.m)(null==ne?void 0:ne.getReader)}},4482:(at,Ce,L)=>{L.d(Ce,{A:()=>Q,e:()=>F});var l=L(576);function Q(re){return(0,l.m)(null==re?void 0:re.lift)}function F(re){return ne=>{if(Q(ne))return ne.lift(function(ve){try{return re(ve,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(at,Ce,L)=>{function l(){}L.d(Ce,{Z:()=>l})},7849:(at,Ce,L)=>{L.d(Ce,{h:()=>F});var l=L(2416),Q=L(3410);function F(re){Q.z.setTimeout(()=>{const{onUnhandledError:ne}=l.v;if(!ne)throw re;ne(re)})}},4532:(at,Ce,L)=>{function l(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Ce,{z:()=>l})},5987:(at,Ce,L)=>{function ce(J,me,ye,we){return new(ye||(ye=Promise))(function(oe,Ot){function zt(lt){try{ut(we.next(lt))}catch(xn){Ot(xn)}}function rr(lt){try{ut(we.throw(lt))}catch(xn){Ot(xn)}}function ut(lt){lt.done?oe(lt.value):function Oe(oe){return oe instanceof ye?oe:new ye(function(Ot){Ot(oe)})}(lt.value).then(zt,rr)}ut((we=we.apply(J,me||[])).next())})}function he(J){return this instanceof he?(this.v=J,this):new he(J)}function pe(J,me,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,we=ye.apply(J,me||[]),oe=[];return Oe={},Ot("next"),Ot("throw"),Ot("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function Ot(fn){we[fn]&&(Oe[fn]=function(ns){return new Promise(function(an,ki){oe.push([fn,ns,an,ki])>1||zt(fn,ns)})})}function zt(fn,ns){try{!function rr(fn){fn.value instanceof he?Promise.resolve(fn.value.v).then(ut,lt):xn(oe[0][2],fn)}(we[fn](ns))}catch(an){xn(oe[0][3],an)}}function ut(fn){zt("next",fn)}function lt(fn){zt("throw",fn)}function xn(fn,ns){fn(ns),oe.shift(),oe.length&&zt(oe[0][0],oe[0][1])}}function Ve(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,me=J[Symbol.asyncIterator];return me?me.call(J):(J=function te(J){var me="function"==typeof Symbol&&Symbol.iterator,ye=me&&J[me],we=0;if(ye)return ye.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&we>=J.length&&(J=void 0),{value:J&&J[we++],done:!J}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),ye={},we("next"),we("throw"),we("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function we(oe){ye[oe]=J[oe]&&function(Ot){return new Promise(function(zt,rr){!function Oe(oe,Ot,zt,rr){Promise.resolve(rr).then(function(ut){oe({value:ut,done:zt})},Ot)}(zt,rr,(Ot=J[oe](Ot)).done,Ot.value)})}}}L.d(Ce,{FC:()=>pe,KL:()=>Ve,mG:()=>ce,qq:()=>he})},5e3:(at,Ce,L)=>{L.d(Ce,{$8M:()=>Dn,$Z:()=>Hr,AFp:()=>ay,AaK:()=>ce,CHM:()=>ta,CRH:()=>bI,CZH:()=>Ql,CqO:()=>I0,EJc:()=>LI,EpF:()=>ba,F4k:()=>Uh,FYo:()=>ow,FiY:()=>di,G48:()=>IS,GfV:()=>uw,Gpc:()=>H,JOm:()=>io,LFG:()=>Y,LSH:()=>vl,Lbi:()=>xd,MAs:()=>m0,NdJ:()=>Be,OlP:()=>rn,Oqu:()=>M_,PXZ:()=>CS,Q6J:()=>kl,QGY:()=>wu,Qsj:()=>aw,R0b:()=>Ds,RDi:()=>_m,Rgc:()=>lf,SBq:()=>nf,Sil:()=>Fw,Suo:()=>CI,TTD:()=>zo,TgZ:()=>E0,VLi:()=>wS,X6Q:()=>zw,XFs:()=>rt,Xpm:()=>Xt,Y36:()=>sg,YKP:()=>hw,YNc:()=>lb,Yjl:()=>fr,Yz7:()=>an,ZZ4:()=>Ru,_Bn:()=>oI,_UZ:()=>nr,_Vd:()=>tf,_c5:()=>OS,_uU:()=>$h,aQg:()=>Dy,c2e:()=>Rd,cJS:()=>Fi,cg1:()=>Aa,dDg:()=>dy,deG:()=>eo,dqk:()=>pt,eFA:()=>zI,ekj:()=>P0,g9A:()=>uy,h0i:()=>Au,hGG:()=>cT,hij:()=>Zh,iGM:()=>EI,ifc:()=>Lt,ip1:()=>oy,kL8:()=>gg,lG2:()=>Kt,n5z:()=>On,oAB:()=>X,oxw:()=>Eu,q4F:()=>uI,qLn:()=>Zc,qOj:()=>l0,qZA:()=>Ca,s9C:()=>Ll,sBO:()=>Kw,sIi:()=>Oh,s_b:()=>$_,soG:()=>ly,tBr:()=>kn,tb:()=>Md,tp0:()=>hi,uIk:()=>w_,vHH:()=>Re,vpe:()=>fo,wAp:()=>Ct,xp6:()=>_C,z2F:()=>Na,zSh:()=>c_,zs3:()=>Zr});var l=L(7579),Q=L(727),F=L(8306),re=L(6451),ne=L(3099);function ve(s){for(let o in s)if(s[o]===ve)return o;throw Error("Could not find renamed property on target object.")}function ie(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ce(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ce).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function de(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=ve({__forward_ref__:ve});function H(s){return s.__forward_ref__=H,s.toString=function(){return ce(this())},s}function te(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===H}class Re extends Error{constructor(o,u){super(function Ue(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function he(s){return"string"==typeof s?s:null==s?"":String(s)}function pe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():he(s)}function et(s,o){const u=o?` in ${o}`:"";throw new Re(-201,`No provider for ${pe(s)} found${u}`)}function ut(s,o){null==s&&function lt(s,o,u,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${u} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function an(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Fi(s){return{providers:s.providers||[],imports:s.imports||[]}}function Qn(s){return hr(s,ai)||hr(s,xe)}function hr(s,o){return s.hasOwnProperty(o)?s[o]:null}function yo(s){return s&&(s.hasOwnProperty(Fr)||s.hasOwnProperty(Ir))?s[Fr]:null}const ai=ve({\u0275prov:ve}),Fr=ve({\u0275inj:ve}),xe=ve({ngInjectableDef:ve}),Ir=ve({ngInjectorDef:ve});var rt=(()=>((rt=rt||{})[rt.Default=0]="Default",rt[rt.Host=1]="Host",rt[rt.Self=2]="Self",rt[rt.SkipSelf=4]="SkipSelf",rt[rt.Optional=8]="Optional",rt))();let vi;function Tr(s){const o=vi;return vi=s,o}function wi(s,o,u){const d=Qn(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&rt.Optional?null:void 0!==o?o:void et(ce(s),"Injector")}function Mn(s){return{toString:s}.toString()}var Jn=(()=>((Jn=Jn||{})[Jn.OnPush=0]="OnPush",Jn[Jn.Default=1]="Default",Jn))(),Lt=(()=>{return(s=Lt||(Lt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Lt;var s})();const ot="undefined"!=typeof globalThis&&globalThis,bt="undefined"!=typeof window&&window,Ls="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,pt=ot||"undefined"!=typeof global&&global||bt||Ls,ui={},_t=[],Rn=ve({\u0275cmp:ve}),Ut=ve({\u0275dir:ve}),Ye=ve({\u0275pipe:ve}),be=ve({\u0275mod:ve}),Je=ve({\u0275fac:ve}),wt=ve({__NG_ELEMENT_ID__:ve});let $t=0;function Xt(s){return Mn(()=>{const u={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Jn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||_t,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Lt.Emulated,id:"c",styles:s.styles||_t,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,m=s.features,v=s.pipes;return d.id+=$t++,d.inputs=Et(s.inputs,u),d.outputs=Et(s.outputs),m&&m.forEach(C=>C(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(B):null,d.pipeDefs=v?()=>("function"==typeof v?v():v).map(W):null,d})}function B(s){return Ht(s)||function _n(s){return s[Ut]||null}(s)}function W(s){return function Rt(s){return s[Ye]||null}(s)}const ae={};function X(s){return Mn(()=>{const o={type:s.type,bootstrap:s.bootstrap||_t,declarations:s.declarations||_t,imports:s.imports||_t,exports:s.exports||_t,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(ae[s.id]=s.type),o})}function Et(s,o){if(null==s)return ui;const u={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),u[h]=d,o&&(o[h]=m)}return u}const Kt=Xt;function fr(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ht(s){return s[Rn]||null}function yn(s,o){const u=s[be]||null;if(!u&&!0===o)throw new Error(`Type ${ce(s)} does not have '\u0275mod' property.`);return u}function Li(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ui(s){return Array.isArray(s)&&!0===s[1]}function Ud(s){return 0!=(8&s.flags)}function Nn(s){return 2==(2&s.flags)}function Ba(s){return 1==(1&s.flags)}function Vi(s){return null!==s.template}function Vd(s){return 0!=(512&s[2])}function Zs(s,o){return s.hasOwnProperty(Je)?s[Je]:null}class dc{constructor(o,u,d){this.previousValue=o,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function zo(){return Ko}function Ko(s){return s.type.prototype.ngOnChanges&&(s.setInput=Hs),qa}function qa(){const s=Gs(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===ui)s.previous=o;else for(let d in o)u[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Hs(s,o,u,d){const h=Gs(s)||function ir(s,o){return s[hc]=o}(s,{previous:ui,current:null}),m=h.current||(h.current={}),v=h.previous,C=this.declaredInputs[u],b=v[C];m[C]=new dc(b&&b.currentValue,o,v===ui),s[d]=o}zo.ngInherit=!0;const hc="__ngSimpleChanges__";function Gs(s){return s[hc]||null}let Qo;function _m(s){Qo=s}function qt(s){return!!s.listen}const Gu={createRenderer:(s,o)=>function pc(){return void 0!==Qo?Qo:"undefined"!=typeof document?document:void 0}()};function vn(s){for(;Array.isArray(s);)s=s[0];return s}function sr(s,o){return vn(o[s])}function gr(s,o){return vn(o[s.index])}function Xo(s,o){return s.data[o]}function nn(s,o){const u=o[s];return Li(u)?u:u[0]}function Kd(s){return 4==(4&s[2])}function Ti(s){return 128==(128&s[2])}function Ar(s,o){return null==o?null:s[o]}function Co(s){s[18]=0}function bo(s,o){s[5]+=o;let u=s,d=s[3];for(;null!==d&&(1===o&&1===u[5]||-1===o&&0===u[5]);)d[5]+=o,u=d,d=d[3]}const yt={lFrame:Ju(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ea(){return yt.bindingsEnabled}function Ie(){return yt.lFrame.lView}function Bt(){return yt.lFrame.tView}function ta(s){return yt.lFrame.contextLView=s,s[8]}function wn(){let s=zs();for(;null!==s&&64===s.type;)s=s.parent;return s}function zs(){return yt.lFrame.currentTNode}function Vr(s,o){const u=yt.lFrame;u.currentTNode=s,u.isParent=o}function Io(){return yt.lFrame.isParent}function ra(){return yt.isInCheckNoChangesMode}function za(s){yt.isInCheckNoChangesMode=s}function To(){return yt.lFrame.bindingIndex++}function sa(s,o){const u=yt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Ks(o)}function Ks(s){yt.lFrame.currentDirectiveIndex=s}function oa(){return yt.lFrame.currentQueryIndex}function vc(s){yt.lFrame.currentQueryIndex=s}function Ka(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function qf(s,o,u){if(u&rt.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||u&rt.Host||(h=Ka(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const d=yt.lFrame=Qu();return d.currentTNode=o,d.lView=s,!0}function aa(s){const o=Qu(),u=s[1];yt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Qu(){const s=yt.lFrame,o=null===s?null:s.child;return null===o?Ju(s):o}function Ju(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function wc(){const s=yt.lFrame;return yt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Xu=wc;function el(){const s=wc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function or(){return yt.lFrame.selectedIndex}function _r(s){yt.lFrame.selectedIndex=s}function In(){const s=yt.lFrame;return Xo(s.tView,s.selectedIndex)}function Do(s,o){for(let u=o.directiveStart,d=o.directiveEnd;u<d;u++){const m=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:b,ngAfterViewChecked:x,ngOnDestroy:R}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),C&&((s.contentHooks||(s.contentHooks=[])).push(u,C),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,C)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),x&&((s.viewHooks||(s.viewHooks=[])).push(u,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,x)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function Ya(s,o,u){Wf(s,o,3,u)}function rl(s,o,u,d){(3&s[2])===u&&Wf(s,o,u,d)}function il(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Wf(s,o,u,d){const m=null!=d?d:-1,v=o.length-1;let C=0;for(let b=void 0!==d?65535&s[18]:0;b<v;b++)if("number"==typeof o[b+1]){if(C=o[b],null!=d&&C>=d)break}else o[b]<0&&(s[18]+=65536),(C<m||-1==m)&&(Ec(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function Ec(s,o,u,d){const h=u[d]<0,m=u[d+1],C=s[h?-u[d]:u[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class Ao{constructor(o,u,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function Cc(s,o,u){const d=qt(s);let h=0;for(;h<u.length;){const m=u[h];if("number"==typeof m){if(0!==m)break;h++;const v=u[h++],C=u[h++],b=u[h++];d?s.setAttribute(o,C,b,v):o.setAttributeNS(v,C,b)}else{const v=m,C=u[++h];Bn(v)?d&&s.setProperty(o,v,C):d?s.setAttribute(o,v,C):o.setAttribute(v,C),h++}}return h}function hn(s){return 3===s||4===s||6===s}function Bn(s){return 64===s.charCodeAt(0)}function gt(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?u=h:0===u||Ys(s,u,h,null,-1===u||2===u?o[++d]:null)}}return s}function Ys(s,o,u,d,h){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const C=s[m++];if("number"==typeof C){if(C===o){v=-1;break}if(C>o){v=m-1;break}}}for(;m<s.length;){const C=s[m];if("number"==typeof C)break;if(C===u){if(null===d)return void(null!==h&&(s[m+1]=h));if(d===s[m+1])return void(s[m+2]=h)}m++,null!==d&&m++,null!==h&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,u),null!==d&&s.splice(m++,0,d),null!==h&&s.splice(m++,0,h)}function $i(s){return-1!==s}function tr(s){return 32767&s}function Ja(s,o){let u=function bm(s){return s>>16}(s),d=o;for(;u>0;)d=d[15],u--;return d}let sl=!0;function bc(s){const o=sl;return sl=s,o}let Dt=0;function eu(s,o){const u=Qs(s,o);if(-1!==u)return u;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,ol(d.data,s),ol(o,null),ol(d.blueprint,null));const h=Pn(s,o),m=s.injectorIndex;if($i(h)){const v=tr(h),C=Ja(h,o),b=C[1].data;for(let x=0;x<8;x++)o[m+x]=C[v+x]|b[v+x]}return o[m+8]=h,m}function ol(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Qs(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Pn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,d=null,h=o;for(;null!==h;){const m=h[1],v=m.type;if(d=2===v?m.declTNode:1===v?h[6]:null,null===d)return-1;if(u++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function la(s,o,u){!function zf(s,o,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(wt)&&(d=u[wt]),null==d&&(d=u[wt]=Dt++);const h=255&d;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function Hi(s,o,u){if(u&rt.Optional)return s;et(o,"NodeInjector")}function ul(s,o,u,d){if(u&rt.Optional&&void 0===d&&(d=null),0==(u&(rt.Self|rt.Host))){const h=s[9],m=Tr(void 0);try{return h?h.get(o,d,u&rt.Optional):wi(o,d,u&rt.Optional)}finally{Tr(m)}}return Hi(d,o,u)}function Ic(s,o,u,d=rt.Default,h){if(null!==s){const m=function Kf(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(wt)?s[wt]:void 0;return"number"==typeof o?o>=0?255&o:ll:o}(u);if("function"==typeof m){if(!qf(o,s,d))return d&rt.Host?Hi(h,u,d):ul(o,u,d,h);try{const v=m(d);if(null!=v||d&rt.Optional)return v;et(u)}finally{Xu()}}else if("number"==typeof m){let v=null,C=Qs(s,o),b=-1,x=d&rt.Host?o[16][6]:null;for((-1===C||d&rt.SkipSelf)&&(b=-1===C?Pn(s,o):o[C+8],-1!==b&&Mo(d,!1)?(v=o[1],C=tr(b),o=Ja(b,o)):C=-1);-1!==C;){const R=o[1];if(xo(m,C,R.data)){const k=tu(C,o,u,v,d,x);if(k!==Js)return k}b=o[C+8],-1!==b&&Mo(d,o[1].data[C+8]===x)&&xo(m,C,o)?(v=R,C=tr(b),o=Ja(b,o)):C=-1}}}return ul(o,u,d,h)}const Js={};function ll(){return new jn(wn(),Ie())}function tu(s,o,u,d,h,m){const v=o[1],C=v.data[s+8],R=ys(C,v,u,null==d?Nn(C)&&sl:d!=v&&0!=(3&C.type),h&rt.Host&&m===C);return null!==R?ar(o,v,R,C):Js}function ys(s,o,u,d,h){const m=s.providerIndexes,v=o.data,C=1048575&m,b=s.directiveStart,R=m>>20,q=h?C+R:s.directiveEnd;for(let K=d?C:C+R;K<q;K++){const _e=v[K];if(K<b&&u===_e||K>=b&&_e.type===u)return K}if(h){const K=v[b];if(K&&Vi(K)&&K.type===u)return b}return null}function ar(s,o,u,d){let h=s[u];const m=o.data;if(function ym(s){return s instanceof Ao}(h)){const v=h;v.resolving&&function Le(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Re(-200,`Circular dependency in DI detected for ${s}${u}`)}(pe(m[u]));const C=bc(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?Tr(v.injectImpl):null;qf(s,d,rt.Default);try{h=s[u]=v.factory(void 0,m,s,d),o.firstCreatePass&&u>=d.directiveStart&&function Gf(s,o,u){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(d){const v=Ko(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,m))}(u,m[u],o)}finally{null!==b&&Tr(b),bc(C),v.resolving=!1,Xu()}}return h}function xo(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Mo(s,o){return!(s&rt.Self||s&rt.Host&&o)}class jn{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,d){return Ic(this._tNode,this._lView,o,d,u)}}function On(s){return Mn(()=>{const o=s.prototype.constructor,u=o[Je]||Tc(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const m=h[Je]||Tc(h);if(m&&m!==u)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Tc(s){return $e(s)?()=>{const o=Tc(te(s));return o&&o()}:Zs(s)}function Dn(s){return function al(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const d=u.length;let h=0;for(;h<d;){const m=u[h];if(hn(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<d&&"string"==typeof u[h];)h++;else{if(m===o)return u[h+1];h+=2}}}return null}(wn(),s)}const li="__parameters__";function Br(s,o,u){return Mn(()=>{const d=function Ai(s){return function(...u){if(s){const d=s(...u);for(const h in d)this[h]=d[h]}}}(o);function h(...m){if(this instanceof h)return d.apply(this,m),this;const v=new h(...m);return C.annotation=v,C;function C(b,x,R){const k=b.hasOwnProperty(li)?b[li]:Object.defineProperty(b,li,{value:[]})[li];for(;k.length<=R;)k.push(null);return(k[R]=k[R]||[]).push(v),b}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class rn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=an({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const eo=new rn("AnalyzeForEntryComponents");function Wi(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let d=s[u];Array.isArray(d)?(o===s&&(o=s.slice(0,u)),Wi(d,o)):o!==s&&o.push(d)}return o}function Si(s,o){s.forEach(u=>Array.isArray(u)?Si(u,o):o(u))}function Qd(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function fa(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ht(s,o,u){let d=os(s,o);return d>=0?s[1|d]=u:(d=~d,function pa(s,o,u,d){let h=s.length;if(h==o)s.push(u,d);else if(1===h)s.push(d,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=d}}(s,d,o,u)),d}function ru(s,o){const u=os(s,o);if(u>=0)return s[1|u]}function os(s,o){return function xc(s,o,u){let d=0,h=s.length>>u;for(;h!==d;){const m=d+(h-d>>1),v=s[m<<u];if(o===v)return m<<u;v>o?h=m:d=m+1}return~(h<<u)}(s,o,1)}const Sr={},nh="__NG_DI_FLAG__",Po="ngTempTokenPath",cl=/\n/gm,I="__source",T=ve({provide:String,useValue:ve});let N;function U(s){const o=N;return N=s,o}function z(s,o=rt.Default){if(void 0===N)throw new Re(203,"");return null===N?wi(s,void 0,o):N.get(s,o&rt.Optional?null:void 0,o)}function Y(s,o=rt.Default){return(function ln(){return vi}()||z)(te(s),o)}function It(s){const o=[];for(let u=0;u<s.length;u++){const d=te(s[u]);if(Array.isArray(d)){if(0===d.length)throw new Re(900,"");let h,m=rt.Default;for(let v=0;v<d.length;v++){const C=d[v],b=Yt(C);"number"==typeof b?-1===b?h=C.token:m|=b:h=C}o.push(Y(h,m))}else o.push(Y(d))}return o}function ct(s,o){return s[nh]=o,s.prototype[nh]=o,s}function Yt(s){return s[nh]}const kn=ct(Br("Inject",s=>({token:s})),-1),di=ct(Br("Optional"),8),hi=ct(Br("SkipSelf"),4);class Pc{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function _a(s){return s instanceof Pc?s.changingThisBreaksApplicationSecurity:s}const ov=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,lh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var An=(()=>((An=An||{})[An.NONE=0]="NONE",An[An.HTML=1]="HTML",An[An.STYLE=2]="STYLE",An[An.SCRIPT=3]="SCRIPT",An[An.URL=4]="URL",An[An.RESOURCE_URL=5]="RESOURCE_URL",An))();function vl(s){const o=function El(){const s=Ie();return s&&s[12]}();return o?o.sanitize(An.URL,s)||"":function uu(s,o){const u=function nv(s){return s instanceof Pc&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?_a(s):function ml(s){return(s=String(s)).match(ov)||s.match(lh)?s:"unsafe:"+s}(he(s))}const Bc="__ngContext__";function xr(s,o){s[Bc]=o}function gp(s){const o=function hu(s){return s[Bc]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function yp(s){return s.ngOriginalError}function ya(s,...o){s.error(...o)}class Zc{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),d=function gv(s){return s&&s.ngErrorLogger||ya}(o);d(this._console,"ERROR",o),u&&d(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&yp(o);for(;u&&yp(u);)u=yp(u);return u||null}}const gh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(pt))();function Oo(s){return s instanceof Function?s():s}var io=(()=>((io=io||{})[io.Important=1]="Important",io[io.DashCase=2]="DashCase",io))();function mh(s,o){return undefined(s,o)}function pu(s){const o=s[3];return Ui(o)?o[3]:o}function Gc(s){return Ap(s[13])}function gu(s){return Ap(s[4])}function Ap(s){for(;null!==s&&!Ui(s);)s=s[4];return s}function oo(s,o,u,d,h){if(null!=d){let m,v=!1;Ui(d)?m=d:Li(d)&&(v=!0,d=d[0]);const C=vn(d);0===s&&null!==u?null==h?Xe(o,u,C):Qe(o,u,C,h||null,!0):1===s&&null!==u?Qe(o,u,C,h||null,!0):2===s?function wh(s,o,u){const d=Es(s,o);d&&function Mr(s,o,u,d){qt(s)?s.removeChild(o,u,d):o.removeChild(u)}(s,d,o,u)}(o,C,v):3===s&&o.destroyNode(C),null!=m&&function Tv(s,o,u,d,h){const m=u[7];m!==vn(u)&&oo(o,s,d,m,h);for(let C=10;C<u.length;C++){const b=u[C];Pp(b[1],b,s,o,d,m)}}(o,s,m,u,h)}}function Wc(s,o,u){return qt(s)?s.createElement(o,u):null===u?s.createElement(o):s.createElementNS(u,o)}function g(s,o){const u=s[9],d=u.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,bo(h,-1)),u.splice(d,1)}function w(s,o){if(s.length<=10)return;const u=10+o,d=s[u];if(d){const h=d[17];null!==h&&h!==s&&g(h,d),o>0&&(s[u-1][4]=d[4]);const m=fa(s,10+o);!function bv(s,o){Pp(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const v=m[19];null!==v&&v.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function D(s,o){if(!(256&o[2])){const u=o[11];qt(u)&&u.destroyNode&&Pp(s,o,u,3,null,null),function yh(s){let o=s[13];if(!o)return M(s[1],s);for(;o;){let u=null;if(Li(o))u=o[13];else{const d=o[10];d&&(u=d)}if(!u){for(;o&&!o[4]&&o!==s;)Li(o)&&M(o[1],o),o=o[3];null===o&&(o=s),Li(o)&&M(o[1],o),u=o&&o[4]}o=u}}(o)}}function M(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function ee(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let d=0;d<u.length;d+=2){const h=o[u[d]];if(!(h instanceof Ao)){const m=u[d+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const C=h[m[v]],b=m[v+1];try{b.call(C)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function j(s,o){const u=s.cleanup,d=o[7];let h=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const v=u[m+1],C="function"==typeof v?v(o):vn(o[v]),b=d[h=u[m+2]],x=u[m+3];"boolean"==typeof x?C.removeEventListener(u[m],b,x):x>=0?d[h=x]():d[h=-x].unsubscribe(),m+=2}else{const v=d[h=u[m+1]];u[m].call(v)}if(null!==d){for(let m=h+1;m<d.length;m++)d[m]();o[7]=null}}(s,o),1===o[1].type&&qt(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Ui(o[3])){u!==o[3]&&g(u,o);const d=o[19];null!==d&&d.detachView(s)}}}function Ne(s,o,u){return function Se(s,o,u){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return u[0];if(2&d.flags){const h=s.data[d.directiveStart].encapsulation;if(h===Lt.None||h===Lt.Emulated)return null}return gr(d,u)}(s,o.parent,u)}function Qe(s,o,u,d,h){qt(s)?s.insertBefore(o,u,d,h):o.insertBefore(u,d,h)}function Xe(s,o,u){qt(s)?s.appendChild(o,u):o.appendChild(u)}function jt(s,o,u,d,h){null!==d?Qe(s,o,u,d,h):Xe(s,o,u)}function Es(s,o){return qt(s)?s.parentNode(o):o.parentNode}let Mp=function xp(s,o,u){return 40&s.type?gr(s,u):null};function Kc(s,o,u,d){const h=Ne(s,d,o),m=o[11],C=function vh(s,o,u){return Mp(s,o,u)}(d.parent||o[6],d,o);if(null!=h)if(Array.isArray(u))for(let b=0;b<u.length;b++)jt(m,h,u[b],C,!1);else jt(m,h,u,C,!1)}function bl(s,o){if(null!==o){const u=o.type;if(3&u)return gr(o,s);if(4&u)return Np(-1,s[o.index]);if(8&u){const d=o.child;if(null!==d)return bl(s,d);{const h=s[o.index];return Ui(h)?Np(-1,h):vn(h)}}if(32&u)return mh(o,s)()||vn(s[o.index]);{const d=Yc(s,o);return null!==d?Array.isArray(d)?d[0]:bl(pu(s[16]),d):bl(s,o.next)}}return null}function Yc(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Np(s,o){const u=10+s+1;if(u<o.length){const d=o[u],h=d[1].firstChild;if(null!==h)return bl(d,h)}return o[7]}function Eh(s,o,u,d,h,m,v){for(;null!=u;){const C=d[u.index],b=u.type;if(v&&0===o&&(C&&xr(vn(C),d),u.flags|=4),64!=(64&u.flags))if(8&b)Eh(s,o,u.child,d,h,m,!1),oo(o,s,h,C,m);else if(32&b){const x=mh(u,d);let R;for(;R=x();)oo(o,s,h,R,m);oo(o,s,h,C,m)}else 16&b?Ch(s,o,d,u,h,m):oo(o,s,h,C,m);u=v?u.projectionNext:u.next}}function Pp(s,o,u,d,h,m){Eh(u,d,s.firstChild,o,h,m,!1)}function Ch(s,o,u,d,h,m){const v=u[16],b=v[6].projection[d.projection];if(Array.isArray(b))for(let x=0;x<b.length;x++)oo(o,s,h,b[x],m);else Eh(s,o,b,v[3],h,m,!0)}function $m(s,o,u){qt(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function Zm(s,o,u){qt(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function gC(s,o,u){let d=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===d||s.charCodeAt(h+m)<=32)return h}u=h+1}}const MD="ng-template";function Dv(s,o,u){let d=0;for(;d<s.length;){let h=s[d++];if(u&&"class"===h){if(h=s[d],-1!==gC(h.toLowerCase(),o,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function ge(s){return 4===s.type&&s.value!==MD}function Qi(s,o,u){return o===(4!==s.type||u?s.value:MD)}function ko(s,o,u){let d=4;const h=s.attrs||[],m=function tt(s){for(let o=0;o<s.length;o++)if(hn(s[o]))return o;return s.length}(h);let v=!1;for(let C=0;C<o.length;C++){const b=o[C];if("number"!=typeof b){if(!v)if(4&d){if(d=2|1&d,""!==b&&!Qi(s,b,u)||""===b&&1===o.length){if(wr(d))return!1;v=!0}}else{const x=8&d?b:o[++C];if(8&d&&null!==s.attrs){if(!Dv(s.attrs,x,u)){if(wr(d))return!1;v=!0}continue}const k=O(8&d?"class":b,h,ge(s),u);if(-1===k){if(wr(d))return!1;v=!0;continue}if(""!==x){let q;q=k>m?"":h[k+1].toLowerCase();const K=8&d?q:null;if(K&&-1!==gC(K,x,0)||2&d&&x!==q){if(wr(d))return!1;v=!0}}}}else{if(!v&&!wr(d)&&!wr(b))return!1;if(v&&wr(b))continue;v=!1,d=b|1&d}}return wr(d)||v}function wr(s){return 0==(1&s)}function O(s,o,u,d){if(null===o)return-1;let h=0;if(d||!u){let m=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let C=o[++h];for(;"string"==typeof C;)C=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function Av(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const d=s[u];if("number"==typeof d)return-1;if(d===o)return u;u++}return-1}(o,s)}function mC(s,o,u=!1){for(let d=0;d<o.length;d++)if(ko(s,o[d],u))return!0;return!1}function Op(s,o){return s?":not("+o.trim()+")":o}function Sv(s){let o=s[0],u=1,d=2,h="",m=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&d){const C=s[++u];h+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?h+="."+v:4&d&&(h+=" "+v);else""!==h&&!wr(v)&&(o+=Op(m,h),h=""),d=v,m=m||!wr(d);u++}return""!==h&&(o+=Op(m,h)),o}const St={};function _C(s){yC(Bt(),Ie(),or()+s,ra())}function yC(s,o,u,d){if(!d)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&Ya(o,m,u)}else{const m=s.preOrderHooks;null!==m&&rl(o,m,0,u)}_r(u)}function Rr(s,o){return s<<17|o<<2}function hs(s){return s>>17&32767}function xv(s){return 2|s}function _u(s){return(131068&s)>>2}function Hm(s,o){return-131069&s|o<<2}function Rv(s){return 1|s}function Bv(s,o){const u=s.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const h=u[d],m=u[d+1];if(-1!==m){const v=s.data[m];vc(h),v.contentQueries(2,o[m],m)}}}function bh(s,o,u,d,h,m,v,C,b,x){const R=o.blueprint.slice();return R[0]=h,R[2]=140|d,Co(R),R[3]=R[15]=s,R[8]=u,R[10]=v||s&&s[10],R[11]=C||s&&s[11],R[12]=b||s&&s[12]||null,R[9]=x||s&&s[9]||null,R[6]=m,R[16]=2==o.type?s[16]:R,R}function Jc(s,o,u,d,h){let m=s.data[o];if(null===m)m=function jp(s,o,u,d,h){const m=zs(),v=Io(),b=s.data[o]=function $v(s,o,u,d,h,m){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,u,o,d,h);return null===s.firstChild&&(s.firstChild=b),null!==m&&(v?null==m.child&&null!==b.parent&&(m.child=b):null===m.next&&(m.next=b)),b}(s,o,u,d,h),function _c(){return yt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=d,m.attrs=h;const v=function na(){const s=yt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Vr(m,!0),m}function Xc(s,o,u,d){if(0===u)return-1;const h=o.length;for(let m=0;m<u;m++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function qp(s,o,u){aa(o);try{const d=s.viewQuery;null!==d&&l_(1,d,u);const h=s.template;null!==h&&Jm(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Bv(s,o),s.staticViewQueries&&l_(2,s.viewQuery,u);const m=s.components;null!==m&&function LD(s,o){for(let u=0;u<o.length;u++)Qv(s,o[u])}(o,m)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,el()}}function Dl(s,o,u,d){const h=o[2];if(256==(256&h))return;aa(o);const m=ra();try{Co(o),function ia(s){return yt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Jm(s,o,u,2,d);const v=3==(3&h);if(!m)if(v){const x=s.preOrderCheckHooks;null!==x&&Ya(o,x,null)}else{const x=s.preOrderHooks;null!==x&&rl(o,x,0,null),il(o,0)}if(function BC(s){for(let o=Gc(s);null!==o;o=gu(o)){if(!o[2])continue;const u=o[9];for(let d=0;d<u.length;d++){const h=u[d],m=h[3];0==(1024&h[2])&&bo(m,1),h[2]|=1024}}}(o),function Yv(s){for(let o=Gc(s);null!==o;o=gu(o))for(let u=10;u<o.length;u++){const d=o[u],h=d[1];Ti(d)&&Dl(h,d,h.template,d[8])}}(o),null!==s.contentQueries&&Bv(s,o),!m)if(v){const x=s.contentCheckHooks;null!==x&&Ya(o,x)}else{const x=s.contentHooks;null!==x&&rl(o,x,1),il(o,1)}!function Vv(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const h=u[d];if(h<0)_r(~h);else{const m=h,v=u[++d],C=u[++d];sa(v,m),C(2,o[m])}}}finally{_r(-1)}}(s,o);const C=s.components;null!==C&&function MC(s,o){for(let u=0;u<o.length;u++)jC(s,o[u])}(o,C);const b=s.viewQuery;if(null!==b&&l_(2,b,d),!m)if(v){const x=s.viewCheckHooks;null!==x&&Ya(o,x)}else{const x=s.viewHooks;null!==x&&rl(o,x,2),il(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,bo(o[3],-1))}finally{el()}}function jv(s,o,u,d){const h=o[10],m=!ra(),v=Kd(o);try{m&&!v&&h.begin&&h.begin(),v&&qp(s,o,d),Dl(s,o,u,d)}finally{m&&!v&&h.end&&h.end()}}function Jm(s,o,u,d,h){const m=or(),v=2&d;try{_r(-1),v&&o.length>20&&yC(s,o,20,ra()),u(d,h)}finally{_r(m)}}function $r(s,o,u){!ea()||(function BD(s,o,u,d){const h=u.directiveStart,m=u.directiveEnd;s.firstCreatePass||eu(u,o),xr(d,o);const v=u.initialInputs;for(let C=h;C<m;C++){const b=s.data[C],x=Vi(b);x&&Zp(o,u,b);const R=ar(o,s,C,u);xr(R,o),null!==v&&VC(0,C-h,R,b,0,v),x&&(nn(u.index,o)[8]=R)}}(s,o,u,gr(u,o)),128==(128&u.flags)&&function jD(s,o,u){const d=u.directiveStart,h=u.directiveEnd,v=u.index,C=function yc(){return yt.lFrame.currentDirectiveIndex}();try{_r(v);for(let b=d;b<h;b++){const x=s.data[b],R=o[b];Ks(b),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&ed(x,R)}}finally{_r(-1),Ks(C)}}(s,o,u))}function Ih(s,o,u=gr){const d=o.localNames;if(null!==d){let h=o.index+1;for(let m=0;m<d.length;m+=2){const v=d[m+1],C=-1===v?u(o,s):s[v];s[h++]=C}}}function Xm(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=e_(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function e_(s,o,u,d,h,m,v,C,b,x){const R=20+d,k=R+h,q=function UD(s,o){const u=[];for(let d=0;d<o;d++)u.push(d<s?null:St);return u}(R,k),K="function"==typeof x?x():x;return q[1]={type:s,blueprint:q,template:u,queries:null,viewQuery:C,declTNode:o,data:q.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:K,incompleteFirstPass:!1}}function t_(s,o,u,d){const h=$C(o);null===u?h.push(d):(h.push(u),s.firstCreatePass&&Ah(s).push(d,h.length-1))}function NC(s,o,u){for(let d in s)if(s.hasOwnProperty(d)){const h=s[d];(u=null===u?{}:u).hasOwnProperty(d)?u[d].push(o,h):u[d]=[o,h]}return u}function Cs(s,o,u,d,h,m,v,C){const b=gr(o,u);let R,x=o.inputs;!C&&null!=x&&(R=x[d])?(Sh(s,u,R,d,h),Nn(o)&&function n_(s,o){const u=nn(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(d=function PC(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=v?v(h,o.value||"",d):h,qt(m)?m.setProperty(b,d,h):Bn(d)||(b.setProperty?b.setProperty(d,h):b[d]=h))}function i_(s,o,u,d){let h=!1;if(ea()){const m=function qD(s,o,u){const d=s.directiveRegistry;let h=null;if(d)for(let m=0;m<d.length;m++){const v=d[m];mC(u,v.selectors,!1)&&(h||(h=[]),la(eu(u,o),s,v.type),Vi(v)?(LC(s,u),h.unshift(v)):h.push(v))}return h}(s,o,u),v=null===d?null:{"":-1};if(null!==m){h=!0,$p(u,s.data.length,m.length);for(let R=0;R<m.length;R++){const k=m[R];k.providersResolver&&k.providersResolver(k)}let C=!1,b=!1,x=Xc(s,o,m.length,null);for(let R=0;R<m.length;R++){const k=m[R];u.mergedAttrs=gt(u.mergedAttrs,k.hostAttrs),Wv(s,u,o,x,k),UC(x,k,v),null!==k.contentQueries&&(u.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(u.flags|=128);const q=k.type.prototype;!C&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),C=!0),!b&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),b=!0),x++}!function Zv(s,o){const d=o.directiveEnd,h=s.data,m=o.attrs,v=[];let C=null,b=null;for(let x=o.directiveStart;x<d;x++){const R=h[x],k=R.inputs,q=null===m||ge(o)?null:Hp(k,m);v.push(q),C=NC(k,x,C),b=NC(R.outputs,x,b)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=C,o.outputs=b}(s,u)}v&&function td(s,o,u){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=u[o[h+1]];if(null==m)throw new Re(-301,`Export of name '${o[h+1]}' not found!`);d.push(o[h],m)}}}(u,d,v)}return u.mergedAttrs=gt(u.mergedAttrs,u.attrs),h}function Gv(s,o,u,d,h,m){const v=m.hostBindings;if(v){let C=s.hostBindingOpCodes;null===C&&(C=s.hostBindingOpCodes=[]);const b=~o.index;(function s_(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(C)!=b&&C.push(b),C.push(d,h,v)}}function ed(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function LC(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function UC(s,o,u){if(u){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)u[o.exportAs[d]]=s;Vi(o)&&(u[""]=s)}}function $p(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Wv(s,o,u,d,h){s.data[d]=h;const m=h.factory||(h.factory=Zs(h.type)),v=new Ao(m,Vi(h),null);s.blueprint[d]=v,u[d]=v,Gv(s,o,0,d,Xc(s,u,h.hostVars,St),h)}function Zp(s,o,u){const d=gr(o,s),h=Xm(u),m=s[10],v=Th(s,bh(s,h,null,u.onPush?64:16,d,o,m,m.createRenderer(d,u),null,null));s[o.index]=v}function Lo(s,o,u,d,h,m){const v=gr(s,o);!function gi(s,o,u,d,h,m,v){if(null==m)qt(s)?s.removeAttribute(o,h,u):o.removeAttribute(h);else{const C=null==v?he(m):v(m,d||"",h);qt(s)?s.setAttribute(o,h,C,u):u?o.setAttributeNS(u,h,C):o.setAttribute(h,C)}}(o[11],v,m,s.value,u,d,h)}function VC(s,o,u,d,h,m){const v=m[o];if(null!==v){const C=d.setInput;for(let b=0;b<v.length;){const x=v[b++],R=v[b++],k=v[b++];null!==C?d.setInput(u,k,x,R):u[R]=k}}}function Hp(s,o){let u=null,d=0;for(;d<o.length;){const h=o[d];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[d+1])),d+=2}else d+=2;else d+=4}return u}function Kv(s,o,u,d){return new Array(s,!0,!1,o,null,0,d,u,null,null)}function jC(s,o){const u=nn(o,s);if(Ti(u)){const d=u[1];80&u[2]?Dl(d,u,d.template,u[8]):u[5]>0&&nd(u)}}function nd(s){for(let d=Gc(s);null!==d;d=gu(d))for(let h=10;h<d.length;h++){const m=d[h];if(1024&m[2]){const v=m[1];Dl(v,m,v.template,m[8])}else m[5]>0&&nd(m)}const u=s[1].components;if(null!==u)for(let d=0;d<u.length;d++){const h=nn(u[d],s);Ti(h)&&h[5]>0&&nd(h)}}function Qv(s,o){const u=nn(o,s),d=u[1];(function Jv(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(d,u),qp(d,u,u[8])}function Th(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Dh(s){for(;s;){s[2]|=64;const o=pu(s);if(Vd(s)&&!o)return s;s=o}return null}function Xv(s,o,u){const d=o[10];d.begin&&d.begin();try{Dl(s,o,s.template,u)}catch(h){throw Wp(o,h),h}finally{d.end&&d.end()}}function a_(s){!function o_(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],d=gp(u),h=d[1];jv(h,d,h.template,u)}}(s[8])}function l_(s,o,u){vc(0),o(s,u)}const qC=(()=>Promise.resolve(null))();function $C(s){return s[7]||(s[7]=[])}function Ah(s){return s.cleanup||(s.cleanup=[])}function Wp(s,o){const u=s[9],d=u?u.get(Zc,null):null;d&&d.handleError(o)}function Sh(s,o,u,d,h){for(let m=0;m<u.length;){const v=u[m++],C=u[m++],b=o[v],x=s.data[v];null!==x.setInput?x.setInput(b,h,d,C):b[C]=h}}function Ji(s,o,u){const d=sr(o,s);!function Sp(s,o,u){qt(s)?s.setValue(o,u):o.textContent=u}(s[11],d,u)}function xh(s,o,u){let d=u?s.styles:null,h=u?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const C=o[v];"number"==typeof C?m=C:1==m?h=de(h,C):2==m&&(d=de(d,C+": "+o[++v]+";"))}u?s.styles=d:s.stylesWithoutHost=d,u?s.classes=h:s.classesWithoutHost=h}const Kp=new rn("INJECTOR",-1);class Al{get(o,u=Sr){if(u===Sr){const d=new Error(`NullInjectorError: No provider for ${ce(o)}!`);throw d.name="NullInjectorError",d}return u}}const c_=new rn("Set Injector scope."),Yp={},rd={};let Uo;function Qp(){return void 0===Uo&&(Uo=new Al),Uo}function Jp(s,o=null,u=null,d){const h=Xp(s,o,u,d);return h._resolveInjectorDefTypes(),h}function Xp(s,o=null,u=null,d){return new ZC(s,u,o||Qp(),d)}class ZC{constructor(o,u,d,h=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];u&&Si(u,C=>this.processProvider(C,o,u)),Si([o],C=>this.processInjectorType(C,[],m)),this.records.set(Kp,Ea(void 0,this));const v=this.records.get(c_);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:ce(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=Sr,d=rt.Default){this.assertNotDestroyed();const h=U(this),m=Tr(void 0);try{if(!(d&rt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const b=function eg(s){return"function"==typeof s||"object"==typeof s&&s instanceof rn}(o)&&Qn(o);C=b&&this.injectableDefInScope(b)?Ea(Vn(o),Yp):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(d&rt.Self?Qp():this.parent).get(o,u=d&rt.Optional&&u===Sr?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Po]=v[Po]||[]).unshift(ce(o)),h)throw v;return function At(s,o,u,d){const h=s[Po];throw o[I]&&h.unshift(o[I]),s.message=function ci(s,o,u,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=ce(o);if(Array.isArray(o))h=o.map(ce).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let C=o[v];m.push(v+":"+("string"==typeof C?JSON.stringify(C):ce(C)))}h=`{${m.join(", ")}}`}return`${u}${d?"("+d+")":""}[${h}]: ${s.replace(cl,"\n  ")}`}("\n"+s.message,h,u,d),s.ngTokenPath=h,s[Po]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Tr(m),U(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((d,h)=>o.push(ce(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,"")}processInjectorType(o,u,d){if(!(o=te(o)))return!1;let h=yo(o);const m=null==h&&o.ngModule||void 0,v=void 0===m?o:m,C=-1!==d.indexOf(v);if(void 0!==m&&(h=yo(m)),null==h)return!1;if(null!=h.imports&&!C){let R;d.push(v);try{Si(h.imports,k=>{this.processInjectorType(k,u,d)&&(void 0===R&&(R=[]),R.push(k))})}finally{}if(void 0!==R)for(let k=0;k<R.length;k++){const{ngModule:q,providers:K}=R[k];Si(K,_e=>this.processProvider(_e,q,K||_t))}}this.injectorDefTypes.add(v);const b=Zs(v)||(()=>new v);this.records.set(v,Ea(b,Yp));const x=h.providers;if(null!=x&&!C){const R=o;Si(x,k=>this.processProvider(k,R,x))}return void 0!==m&&void 0!==o.providers}processProvider(o,u,d){let h=Rh(o=te(o))?o:te(o&&o.provide);const m=function HD(s,o,u){return Mh(s)?Ea(void 0,s.useValue):Ea(HC(s),Yp)}(o);if(Rh(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=Ea(void 0,Yp,!0),v.factory=()=>It(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,m)}hydrate(o,u){return u.value===Yp&&(u.value=rd,u.value=u.factory()),"object"==typeof u.value&&u.value&&function KD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=te(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function Vn(s){const o=Qn(s),u=null!==o?o.factory:Zs(s);if(null!==u)return u;if(s instanceof rn)throw new Re(204,"");if(s instanceof Function)return function d_(s){const o=s.length;if(o>0)throw function No(s,o){const u=[];for(let d=0;d<s;d++)u.push(o);return u}(o,"?"),new Re(204,"");const u=function un(s){const o=s&&(s[ai]||s[xe]);if(o){const u=function Fn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Re(204,"")}function HC(s,o,u){let d;if(Rh(s)){const h=te(s);return Zs(h)||Vn(h)}if(Mh(s))d=()=>te(s.useValue);else if(function GC(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...It(s.deps||[]));else if(function GD(s){return!(!s||!s.useExisting)}(s))d=()=>Y(te(s.useExisting));else{const h=te(s&&(s.useClass||s.provide));if(!function zD(s){return!!s.deps}(s))return Zs(h)||Vn(h);d=()=>new h(...It(s.deps))}return d}function Ea(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Mh(s){return null!==s&&"object"==typeof s&&T in s}function Rh(s){return"function"==typeof s}let Zr=(()=>{class s{static create(u,d){var h;if(Array.isArray(u))return Jp({name:""},d,u,"");{const m=null!==(h=u.name)&&void 0!==h?h:"";return Jp({name:m},u.parent,u.providers,m)}}}return s.THROW_IF_NOT_FOUND=Sr,s.NULL=new Al,s.\u0275prov=an({token:s,providedIn:"any",factory:()=>Y(Kp)}),s.__NG_ELEMENT_ID__=-1,s})();function tb(s,o){Do(gp(s)[1],wn())}function l0(s){let o=function nb(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const d=[s];for(;o;){let h;if(Vi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Re(903,"");h=o.\u0275dir}if(h){if(u){d.push(h);const v=s;v.inputs=g_(s.inputs),v.declaredInputs=g_(s.declaredInputs),v.outputs=g_(s.outputs);const C=h.hostBindings;C&&m_(s,C);const b=h.viewQuery,x=h.contentQueries;if(b&&rb(s,b),x&&ib(s,x),ie(s.inputs,h.inputs),ie(s.declaredInputs,h.declaredInputs),ie(s.outputs,h.outputs),Vi(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const C=m[v];C&&C.ngInherit&&C(s),C===l0&&(u=!1)}}o=Object.getPrototypeOf(o)}!function eA(s){let o=0,u=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=gt(h.hostAttrs,u=gt(u,h.hostAttrs))}}(d)}function g_(s){return s===ui?{}:s===_t?[]:s}function rb(s,o){const u=s.viewQuery;s.viewQuery=u?(d,h)=>{o(d,h),u(d,h)}:o}function ib(s,o){const u=s.contentQueries;s.contentQueries=u?(d,h,m)=>{o(d,h,m),u(d,h,m)}:o}function m_(s,o){const u=s.hostBindings;s.hostBindings=u?(d,h)=>{o(d,h),u(d,h)}:o}let __=null;function Sl(){if(!__){const s=pt.Symbol;if(s&&s.iterator)__=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const d=o[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(__=d)}}}return __}function Oh(s){return!!v_(s)&&(Array.isArray(s)||!(s instanceof Map)&&Sl()in s)}function v_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function xi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function w_(s,o,u,d){const h=Ie();return xi(h,To(),o)&&(Bt(),Lo(In(),h,s,o,u,d)),w_}function Pl(s,o,u,d){return xi(s,To(),u)?o+he(u)+d:St}function lb(s,o,u,d,h,m,v,C){const b=Ie(),x=Bt(),R=s+20,k=x.firstCreatePass?function g0(s,o,u,d,h,m,v,C,b){const x=o.consts,R=Jc(o,s,4,v||null,Ar(x,C));i_(o,u,R,Ar(x,b)),Do(o,R);const k=R.tViews=e_(2,R,d,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,R),k.queries=o.queries.embeddedTView(R)),R}(R,x,b,o,u,d,h,m,v):x.data[R];Vr(k,!1);const q=b[11].createComment("");Kc(x,b,q,k),xr(q,b),Th(b,b[R]=Kv(q,b,q,k)),Ba(k)&&$r(x,b,k),null!=v&&Ih(b,k,C)}function m0(s){return function Ws(s,o){return s[o]}(function zu(){return yt.lFrame.contextLView}(),20+s)}function sg(s,o=rt.Default){const u=Ie();return null===u?Y(s,o):Ic(wn(),u,te(s),o)}function Hr(){throw new Error("invalid")}function kl(s,o,u){const d=Ie();return xi(d,To(),o)&&Cs(Bt(),In(),d,s,o,d[11],u,!1),kl}function w0(s,o,u,d,h){const v=h?"class":"style";Sh(s,u,o.inputs[v],v,d)}function E0(s,o,u,d){const h=Ie(),m=Bt(),v=20+s,C=h[11],b=h[v]=Wc(C,o,function Xy(){return yt.lFrame.currentNamespace}()),x=m.firstCreatePass?function Gr(s,o,u,d,h,m,v){const C=o.consts,x=Jc(o,s,2,h,Ar(C,m));return i_(o,u,x,Ar(C,v)),null!==x.attrs&&xh(x,x.attrs,!1),null!==x.mergedAttrs&&xh(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,m,h,0,o,u,d):m.data[v];Vr(x,!0);const R=x.mergedAttrs;null!==R&&Cc(C,b,R);const k=x.classes;null!==k&&Zm(C,b,k);const q=x.styles;null!==q&&$m(C,b,q),64!=(64&x.flags)&&Kc(m,h,b,x),0===function Za(){return yt.lFrame.elementDepthCount}()&&xr(b,h),function Wu(){yt.lFrame.elementDepthCount++}(),Ba(x)&&($r(m,h,x),function qr(s,o,u){if(Ud(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,u[m],m)}}}(m,x,h)),null!==d&&Ih(h,x)}function Ca(){let s=wn();Io()?function Wa(){yt.lFrame.isParent=!1}():(s=s.parent,Vr(s,!1));const o=s;!function Ha(){yt.lFrame.elementDepthCount--}();const u=Bt();u.firstCreatePass&&(Do(u,s),Ud(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function wm(s){return 0!=(16&s.flags)}(o)&&w0(u,o,Ie(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function So(s){return 0!=(32&s.flags)}(o)&&w0(u,o,Ie(),o.stylesWithoutHost,!1)}function nr(s,o,u,d){E0(s,o,u,d),Ca()}function ba(){return Ie()}function wu(s){return!!s&&"function"==typeof s.then}function Uh(s){return!!s&&"function"==typeof s.subscribe}const I0=Uh;function Be(s,o,u,d){const h=Ie(),m=Bt(),v=wn();return function Fl(s,o,u,d,h,m,v,C){const b=Ba(d),R=s.firstCreatePass&&Ah(s),k=o[8],q=$C(o);let K=!0;if(3&d.type||C){const qe=gr(d,o),nt=C?C(qe):qe,Ee=q.length,vt=C?Qt=>C(vn(Qt[d.index])):d.index;if(qt(u)){let Qt=null;if(!C&&b&&(Qt=function _b(s,o,u,d){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===u&&h[m+1]===d){const C=o[7],b=h[m+2];return C.length>b?C[b]:null}"string"==typeof v&&(m+=2)}return null}(s,o,h,d.index)),null!==Qt)(Qt.__ngLastListenerFn__||Qt).__ngNextListenerFn__=m,Qt.__ngLastListenerFn__=m,K=!1;else{m=gd(d,o,k,m,!1);const gn=u.listen(nt,h,m);q.push(m,gn),R&&R.push(h,vt,Ee,Ee+1)}}else m=gd(d,o,k,m,!0),nt.addEventListener(h,m,v),q.push(m),R&&R.push(h,vt,Ee,v)}else m=gd(d,o,k,m,!1);const _e=d.outputs;let Fe;if(K&&null!==_e&&(Fe=_e[h])){const qe=Fe.length;if(qe)for(let nt=0;nt<qe;nt+=2){const As=o[Fe[nt]][Fe[nt+1]].subscribe(m),Jl=q.length;q.push(m,As),R&&R.push(h,d.index,Jl,-(Jl+1))}}}(m,h,h[11],v,s,o,!!u,d),Be}function Vo(s,o,u,d){try{return!1!==u(d)}catch(h){return Wp(s,h),!1}}function gd(s,o,u,d,h){return function m(v){if(v===Function)return d;const C=2&s.flags?nn(s.index,o):o;0==(32&o[2])&&Dh(C);let b=Vo(o,0,d,v),x=m.__ngNextListenerFn__;for(;x;)b=Vo(o,0,x,v)&&b,x=x.__ngNextListenerFn__;return h&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function Eu(s=1){return function Yd(s){return(yt.lFrame.contextLView=function $f(s,o){for(;s>0;)o=o[15],s--;return o}(s,yt.lFrame.contextLView))[8]}(s)}function Ll(s,o,u){return og(s,"",o,"",u),Ll}function og(s,o,u,d,h){const m=Ie(),v=Pl(m,o,u,d);return v!==St&&Cs(Bt(),In(),m,s,v,m[11],h,!1),og}function ug(s,o,u,d,h){const m=s[u+1],v=null===o;let C=d?hs(m):_u(m),b=!1;for(;0!==C&&(!1===b||v);){const R=s[C+1];N0(s[C],o)&&(b=!0,s[C+1]=d?Rv(R):xv(R)),C=d?hs(R):_u(R)}b&&(s[u+1]=d?xv(m):Rv(m))}function N0(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&os(s,o)>=0}function P0(s,o){return function Bo(s,o,u,d){const h=Ie(),m=Bt(),v=function Di(s){const o=yt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);m.firstUpdatePass&&function yd(s,o,u,d){const h=s.data;if(null===h[u+1]){const m=h[or()],v=function bu(s,o){return o>=s.expandoStartIndex}(s,u);(function k0(s,o){return 0!=(s.flags&(o?16:32))})(m,d)&&null===o&&!v&&(o=!1),o=function lA(s,o,u,d){const h=function Yu(s){const o=yt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(u=Da(u=D_(null,s,o,u,d),o.attrs,d),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(u=D_(h,s,o,u,d),null===m){let b=function Db(s,o,u){const d=u?o.classBindings:o.styleBindings;if(0!==_u(d))return s[hs(d)]}(s,o,d);void 0!==b&&Array.isArray(b)&&(b=D_(null,s,o,b[1],d),b=Da(b,o.attrs,d),function Ab(s,o,u,d){s[hs(u?o.classBindings:o.styleBindings)]=d}(s,o,d,b))}else m=function Iu(s,o,u){let d;const h=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<h;m++)d=Da(d,s[m].hostAttrs,u);return Da(d,o.attrs,u)}(s,o,d)}return void 0!==m&&(d?o.residualClasses=m:o.residualStyles=m),u}(h,m,o,d),function vb(s,o,u,d,h,m){let v=m?o.classBindings:o.styleBindings,C=hs(v),b=_u(v);s[d]=u;let R,x=!1;if(Array.isArray(u)){const k=u;R=k[1],(null===R||os(k,R)>0)&&(x=!0)}else R=u;if(h)if(0!==b){const q=hs(s[C+1]);s[d+1]=Rr(q,C),0!==q&&(s[q+1]=Hm(s[q+1],d)),s[C+1]=function Il(s,o){return 131071&s|o<<17}(s[C+1],d)}else s[d+1]=Rr(C,0),0!==C&&(s[C+1]=Hm(s[C+1],d)),C=d;else s[d+1]=Rr(b,0),0===C?C=d:s[b+1]=Hm(s[b+1],d),b=d;x&&(s[d+1]=xv(s[d+1])),ug(s,R,d,!0),ug(s,R,d,!1),function $n(s,o,u,d,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&os(m,o)>=0&&(u[d+1]=Rv(u[d+1]))}(o,R,s,d,m),v=Rr(C,b),m?o.classBindings=v:o.styleBindings=v}(h,m,o,u,v,d)}}(m,s,v,d),o!==St&&xi(h,v,o)&&function S_(s,o,u,d,h,m,v,C){if(!(3&o.type))return;const b=s.data,x=b[C+1];Tu(function Mv(s){return 1==(1&s)}(x)?x_(b,o,u,h,_u(x),v):void 0)||(Tu(m)||function ni(s){return 2==(2&s)}(x)&&(m=x_(b,null,u,h,C,v)),function dn(s,o,u,d,h){const m=qt(s);if(o)h?m?s.addClass(u,d):u.classList.add(d):m?s.removeClass(u,d):u.classList.remove(d);else{let v=-1===d.indexOf("-")?void 0:io.DashCase;if(null==h)m?s.removeStyle(u,d,v):u.style.removeProperty(d);else{const C="string"==typeof h&&h.endsWith("!important");C&&(h=h.slice(0,-10),v|=io.Important),m?s.setStyle(u,d,h,v):u.style.setProperty(d,h,C?"important":"")}}}(d,v,sr(or(),u),h,m))}(m,m.data[or()],h,h[11],s,h[v+1]=function lo(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ce(_a(s)))),s}(o,u),d,v)}(s,o,null,!0),P0}function D_(s,o,u,d,h){let m=null;const v=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<v&&(m=o[C],d=Da(d,m.hostAttrs,h),m!==s);)C++;return null!==s&&(u.directiveStylingLast=C),d}function Da(s,o,u){const d=u?1:2;let h=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?h=v:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ht(s,v,!!u||o[++m]))}return void 0===s?null:s}function x_(s,o,u,d,h,m){const v=null===o;let C;for(;h>0;){const b=s[h],x=Array.isArray(b),R=x?b[1]:b,k=null===R;let q=u[h+1];q===St&&(q=k?_t:void 0);let K=k?ru(q,d):R===d?q:void 0;if(x&&!Tu(K)&&(K=ru(b,d)),Tu(K)&&(C=K,v))return C;const _e=s[h+1];h=v?hs(_e):_u(_e)}if(null!==o){let b=m?o.residualClasses:o.residualStyles;null!=b&&(C=ru(b,d))}return C}function Tu(s){return void 0!==s}function $h(s,o=""){const u=Ie(),d=Bt(),h=s+20,m=d.firstCreatePass?Jc(d,h,1,o,null):d.data[h],v=u[h]=function _h(s,o){return qt(s)?s.createText(o):s.createTextNode(o)}(u[11],o);Kc(d,u,v,m),Vr(m,!1)}function M_(s){return Zh("",s,""),M_}function Zh(s,o,u){const d=Ie(),h=Pl(d,s,o,u);return h!==St&&Ji(d,or(),h),Zh}const Ed=void 0;var sn=["en",[["a","p"],["AM","PM"],Ed],[["AM","PM"],Ed,Ed],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ed,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ed,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ed,"{1} 'at' {0}",Ed],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Pr(s){const u=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let Cd={};function Aa(s){const o=function Kh(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=oi(o);if(u)return u;const d=o.split("-")[0];if(u=oi(d),u)return u;if("en"===d)return sn;throw new Error(`Missing locale data for the locale "${s}".`)}function gg(s){return Aa(s)[Ct.PluralCase]}function oi(s){return s in Cd||(Cd[s]=pt.ng&&pt.ng.common&&pt.ng.common.locales&&pt.ng.common.locales[s]),Cd[s]}var Ct=(()=>((Ct=Ct||{})[Ct.LocaleId=0]="LocaleId",Ct[Ct.DayPeriodsFormat=1]="DayPeriodsFormat",Ct[Ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ct[Ct.DaysFormat=3]="DaysFormat",Ct[Ct.DaysStandalone=4]="DaysStandalone",Ct[Ct.MonthsFormat=5]="MonthsFormat",Ct[Ct.MonthsStandalone=6]="MonthsStandalone",Ct[Ct.Eras=7]="Eras",Ct[Ct.FirstDayOfWeek=8]="FirstDayOfWeek",Ct[Ct.WeekendRange=9]="WeekendRange",Ct[Ct.DateFormat=10]="DateFormat",Ct[Ct.TimeFormat=11]="TimeFormat",Ct[Ct.DateTimeFormat=12]="DateTimeFormat",Ct[Ct.NumberSymbols=13]="NumberSymbols",Ct[Ct.NumberFormats=14]="NumberFormats",Ct[Ct.CurrencyCode=15]="CurrencyCode",Ct[Ct.CurrencySymbol=16]="CurrencySymbol",Ct[Ct.CurrencyName=17]="CurrencyName",Ct[Ct.Currencies=18]="Currencies",Ct[Ct.Directionality=19]="Directionality",Ct[Ct.PluralCase=20]="PluralCase",Ct[Ct.ExtraData=21]="ExtraData",Ct))();const F_="en-US";let kb=F_;function Cg(s,o,u,d,h){if(s=te(s),Array.isArray(s))for(let m=0;m<s.length;m++)Cg(s[m],o,u,d,h);else{const m=Bt(),v=Ie();let C=Rh(s)?s:te(s.provide),b=HC(s);const x=wn(),R=1048575&x.providerIndexes,k=x.directiveStart,q=x.providerIndexes>>20;if(Rh(s)||!s.multi){const K=new Ao(b,h,sg),_e=bg(C,o,h?R:R+q,k);-1===_e?(la(eu(x,v),m,C),B_(m,s,o.length),o.push(C),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),u.push(K),v.push(K)):(u[_e]=K,v[_e]=K)}else{const K=bg(C,o,R+q,k),_e=bg(C,o,R,R+q),Fe=K>=0&&u[K],qe=_e>=0&&u[_e];if(h&&!qe||!h&&!Fe){la(eu(x,v),m,C);const nt=function sI(s,o,u,d,h){const m=new Ao(s,u,sg);return m.multi=[],m.index=o,m.componentProviders=0,Kr(m,h,d&&!u),m}(h?iw:rw,u.length,h,d,b);!h&&qe&&(u[_e].providerFactory=nt),B_(m,s,o.length,0),o.push(C),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),u.push(nt),v.push(nt)}else B_(m,s,K>-1?K:_e,Kr(u[h?_e:K],b,!h&&d));!h&&d&&qe&&u[_e].componentProviders++}}}function B_(s,o,u,d){const h=Rh(o),m=function WD(s){return!!s.useClass}(o);if(h||m){const b=(m?te(o.useClass):o).prototype.ngOnDestroy;if(b){const x=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=x.indexOf(u);-1===R?x.push(u,[d,b]):x[R+1].push(d,b)}else x.push(u,b)}}}function Kr(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function bg(s,o,u,d){for(let h=u;h<d;h++)if(o[h]===s)return h;return-1}function rw(s,o,u,d){return Ma(this.multi,[])}function iw(s,o,u,d){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=ar(u,u[1],this.providerFactory.index,d);m=C.slice(0,v),Ma(h,m);for(let b=v;b<C.length;b++)m.push(C[b])}else m=[],Ma(h,m);return m}function Ma(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function oI(s,o=[]){return u=>{u.providersResolver=(d,h)=>function iI(s,o,u){const d=Bt();if(d.firstCreatePass){const h=Vi(s);Cg(u,d.data,d.blueprint,h,!0),Cg(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class Ig{}class Dg{resolveComponentFactory(o){throw function Id(s){const o=Error(`No component factory found for ${ce(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let tf=(()=>{class s{}return s.NULL=new Dg,s})();function sw(){return $l(wn(),Ie())}function $l(s,o){return new nf(gr(s,o))}let nf=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=sw,s})();function jA(s){return s instanceof nf?s.nativeElement:s}class ow{}let aw=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function rf(){const s=Ie(),u=nn(wn().index,s);return function Ag(s){return s[11]}(Li(u)?u:s)}(),s})(),$A=(()=>{class s{}return s.\u0275prov=an({token:s,providedIn:"root",factory:()=>null}),s})();class uw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const uI=new uw("13.1.3"),lw={};function j_(s,o,u,d,h=!1){for(;null!==u;){const m=o[u.index];if(null!==m&&d.push(vn(m)),Ui(m))for(let C=10;C<m.length;C++){const b=m[C],x=b[1].firstChild;null!==x&&j_(b[1],b,x,d)}const v=u.type;if(8&v)j_(s,o,u.child,d);else if(32&v){const C=mh(u,o);let b;for(;b=C();)d.push(b)}else if(16&v){const C=Yc(o,u);if(Array.isArray(C))d.push(...C);else{const b=pu(o[16]);j_(b[1],b,C,d,!0)}}u=h?u.projectionNext:u.next}return d}class Zl{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return j_(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ui(o)){const u=o[8],d=u?u.indexOf(this):-1;d>-1&&(w(o,d),fa(u,d))}this._attachedToViewContainer=!1}D(this._lView[1],this._lView)}onDestroy(o){t_(this._lView[1],this._lView,null,o)}markForCheck(){Dh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Xv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function u_(s,o,u){za(!0);try{Xv(s,o,u)}finally{za(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Re(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Iv(s,o){Pp(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Re(902,"");this._appRef=o}}class Hl extends Zl{constructor(o){super(o),this._view=o}detectChanges(){a_(this._view)}checkNoChanges(){!function e0(s){za(!0);try{a_(s)}finally{za(!1)}}(this._view)}get context(){return null}}class Gl extends tf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Ht(o);return new sf(u,this.ngModule)}}function cw(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const HA=new rn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>gh});class sf extends Ig{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function kp(s){return s.map(Sv).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return cw(this.componentDef.inputs)}get outputs(){return cw(this.componentDef.outputs)}create(o,u,d,h){const m=(h=h||this.ngModule)?function dw(s,o){return{get:(u,d,h)=>{const m=s.get(u,lw,h);return m!==lw||d===lw?m:o.get(u,d,h)}}}(o,h.injector):o,v=m.get(ow,Gu),C=m.get($A,null),b=v.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",R=d?function RC(s,o,u){if(qt(s))return s.selectRootElement(o,u===Lt.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(b,d,this.componentDef.encapsulation):Wc(v.createRenderer(null,this.componentDef),x,function ZA(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(x)),k=this.componentDef.onPush?576:528,q=function Er(s,o){return{components:[],scheduler:s||gh,clean:qC,playerHandler:o||null,flags:0}}(),K=e_(0,null,null,1,0,null,null,null,null,null),_e=bh(null,K,q,k,null,null,v,b,C,m);let Fe,qe;aa(_e);try{const nt=function Ph(s,o,u,d,h,m){const v=u[1];u[20]=s;const b=Jc(v,20,2,"#host",null),x=b.mergedAttrs=o.hostAttrs;null!==x&&(xh(b,x,!0),null!==s&&(Cc(h,s,x),null!==b.classes&&Zm(h,s,b.classes),null!==b.styles&&$m(h,s,b.styles)));const R=d.createRenderer(s,o),k=bh(u,Xm(o),null,o.onPush?64:16,u[20],b,d,R,m||null,null);return v.firstCreatePass&&(la(eu(b,u),v,o.type),LC(v,b),$p(b,u.length,1)),Th(u,k),u[20]=k}(R,this.componentDef,_e,v,b);if(R)if(d)Cc(b,R,["ng-version",uI.full]);else{const{attrs:Ee,classes:vt}=function RD(s){const o=[],u=[];let d=1,h=2;for(;d<s.length;){let m=s[d];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++d]):8===h&&u.push(m);else{if(!wr(h))break;h=m}d++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ee&&Cc(b,R,Ee),vt&&vt.length>0&&Zm(b,R,vt.join(" "))}if(qe=Xo(K,20),void 0!==u){const Ee=qe.projection=[];for(let vt=0;vt<this.ngContentSelectors.length;vt++){const Qt=u[vt];Ee.push(null!=Qt?Array.from(Qt):null)}}Fe=function eb(s,o,u,d,h){const m=u[1],v=function FC(s,o,u){const d=wn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Wv(s,d,o,Xc(s,o,1,null),u));const h=ar(o,s,d.directiveStart,d);xr(h,o);const m=gr(d,o);return m&&xr(m,o),h}(m,u,o);if(d.components.push(v),s[8]=v,h&&h.forEach(b=>b(v,o)),o.contentQueries){const b=wn();o.contentQueries(1,v,b.directiveStart)}const C=wn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(_r(C.index),Gv(u[1],C,0,C.directiveStart,C.directiveEnd,o),ed(o,v)),v}(nt,this.componentDef,_e,q,[tb]),qp(K,_e,null)}finally{el()}return new Sg(this.componentType,Fe,$l(qe,_e),_e,qe)}}class Sg extends class aI{}{constructor(o,u,d,h,m){super(),this.location=d,this._rootLView=h,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new Hl(h),this.componentType=o}get injector(){return new jn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Au{}class hw{}const Yr=new Map;class pw extends Au{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Gl(this);const d=yn(o);this._bootstrapComponents=Oo(d.bootstrap),this._r3Injector=Xp(o,u,[{provide:Au,useValue:this},{provide:tf,useValue:this.componentFactoryResolver}],ce(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=Zr.THROW_IF_NOT_FOUND,d=rt.Default){return o===Zr||o===Au||o===Kp?this:this._r3Injector.get(o,u,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class xu extends hw{constructor(o){super(),this.moduleType=o,null!==yn(o)&&function fw(s){const o=new Set;!function u(d){const h=yn(d,!0),m=h.id;null!==m&&(function xg(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ce(o)} vs ${ce(o.name)}`)}(m,Yr.get(m),d),Yr.set(m,d));const v=Oo(h.imports);for(const C of v)o.has(C)||(o.add(C),u(C))}(s)}(o)}create(o){return new pw(this.moduleType,o)}}function uf(s){return o=>{setTimeout(s,void 0,o)}}const fo=class Og extends l.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,d){var h,m,v;let C=o,b=u||(()=>null),x=d;if(o&&"object"==typeof o){const k=o;C=null===(h=k.next)||void 0===h?void 0:h.bind(k),b=null===(m=k.error)||void 0===m?void 0:m.bind(k),x=null===(v=k.complete)||void 0===v?void 0:v.bind(k)}this.__isAsync&&(b=uf(b),C&&(C=uf(C)),x&&(x=uf(x)));const R=super.subscribe({next:C,error:b,complete:x});return o instanceof Q.w0&&o.add(R),R}};function tS(){return this._results[Sl()]()}class kg{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Sl(),d=kg.prototype;d[u]||(d[u]=tS)}get changes(){return this._changes||(this._changes=new fo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const d=this;d.dirty=!1;const h=Wi(o);(this._changesDetected=!function Xf(s,o,u){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],m=o[d];if(u&&(h=u(h),m=u(m)),m!==h)return!1}return!0}(d._results,h,u))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let lf=(()=>{class s{}return s.__NG_ELEMENT_ID__=_I,s})();const nS=lf,mI=class extends nS{constructor(o,u,d){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(o){const u=this._declarationTContainer.tViews,d=bh(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(u)),qp(u,d,o),new Zl(d)}};function _I(){return cf(wn(),Ie())}function cf(s,o){return 4&s.type?new mI(o,s,$l(s,o)):null}let $_=(()=>{class s{}return s.__NG_ELEMENT_ID__=yI,s})();function yI(){return Sd(wn(),Ie())}const rS=$_,vw=class extends rS{constructor(o,u,d){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=d}get element(){return $l(this._hostTNode,this._hostLView)}get injector(){return new jn(this._hostTNode,this._hostLView)}get parentInjector(){const o=Pn(this._hostTNode,this._hostLView);if($i(o)){const u=Ja(o,this._hostLView),d=tr(o);return new jn(u[1].data[d+8],u)}return new jn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=vI(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,d){const h=o.createEmbeddedView(u||{});return this.insert(h,d),h}createComponent(o,u,d,h,m){const v=o&&!function Gi(s){return"function"==typeof s}(o);let C;if(v)C=u;else{const k=u||{};C=k.index,d=k.injector,h=k.projectableNodes,m=k.ngModuleRef}const b=v?o:new sf(Ht(o)),x=d||this.parentInjector;if(!m&&null==b.ngModule&&x){const k=x.get(Au,null);k&&(m=k)}const R=b.create(x,h,void 0,m);return this.insert(R.hostView,C),R}insert(o,u){const d=o._lView,h=d[1];if(function jf(s){return Ui(s[3])}(d)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const k=d[3],q=new vw(k,k[6],k[3]);q.detach(q.indexOf(o))}}const m=this._adjustIndex(u),v=this._lContainer;!function y(s,o,u,d){const h=10+d,m=u.length;d>0&&(u[h-1][4]=o),d<m-10?(o[4]=u[h],Qd(u,10+d,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function f(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const C=o[19];null!==C&&C.insertView(s),o[2]|=128}(h,d,v,m);const C=Np(m,v),b=d[11],x=Es(b,v[7]);return null!==x&&function vr(s,o,u,d,h,m){d[0]=h,d[6]=o,Pp(s,d,u,1,h,m)}(h,v[6],b,d,x,C),o.attachToViewContainerRef(),Qd(zl(v),m,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=vI(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),d=w(this._lContainer,u);d&&(fa(zl(this._lContainer),u),D(d[1],d))}detach(o){const u=this._adjustIndex(o,-1),d=w(this._lContainer,u);return d&&null!=fa(zl(this._lContainer),u)?new Zl(d):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function vI(s){return s[8]}function zl(s){return s[8]||(s[8]=[])}function Sd(s,o){let u;const d=o[s.index];if(Ui(d))u=d;else{let h;if(8&s.type)h=vn(d);else{const m=o[11];h=m.createComment("");const v=gr(s,o);Qe(m,Es(m,v),h,function zc(s,o){return qt(s)?s.nextSibling(o):o.nextSibling}(m,v),!1)}o[s.index]=u=Kv(d,o,h,s),Th(o,u)}return new vw(u,s,o)}class H_{constructor(o){this.queryList=o,this.matches=null}clone(){return new H_(this.queryList)}setDirty(){this.queryList.setDirty()}}class G_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const d=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let m=0;m<d;m++){const v=u.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new G_(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==z_(o,u).matches&&this.queries[u].setDirty()}}class wI{constructor(o,u,d=null){this.predicate=o,this.flags=u,this.read=d}}class Fg{constructor(o=[]){this.queries=o}elementStart(o,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let d=0;d<this.length;d++){const h=null!==u?u.length:0,m=this.getByIndex(d).embeddedTView(o,h);m&&(m.indexInDeclarationView=d,null!==u?u.push(m):u=[m])}return null!==u?new Fg(u):null}template(o,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Ew{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Ew(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const m=d[h];this.matchTNodeWithReadOption(o,u,Cw(u,m)),this.matchTNodeWithReadOption(o,u,ys(u,o,m,!1,!1))}else d===lf?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,ys(u,o,d,!1,!1))}matchTNodeWithReadOption(o,u,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===nf||h===$_||h===lf&&4&u.type)this.addMatch(u.index,-2);else{const m=ys(u,o,h,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,d)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function Cw(s,o){const u=s.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===o)return u[d+1];return null}function oS(s,o,u,d){return-1===u?function sS(s,o){return 11&s.type?$l(s,o):4&s.type?cf(s,o):null}(o,s):-2===u?function bw(s,o,u){return u===nf?$l(o,s):u===lf?cf(o,s):u===$_?Sd(o,s):void 0}(s,o,d):ar(s,s[1],u,o)}function Qr(s,o,u,d){const h=o[19].queries[d];if(null===h.matches){const m=s.data,v=u.matches,C=[];for(let b=0;b<v.length;b+=2){const x=v[b];C.push(x<0?null:oS(o,m[x],v[b+1],u.metadata.read))}h.matches=C}return h.matches}function Iw(s,o,u,d){const h=s.queries.getByIndex(u),m=h.matches;if(null!==m){const v=Qr(s,o,h,u);for(let C=0;C<m.length;C+=2){const b=m[C];if(b>0)d.push(v[C/2]);else{const x=m[C+1],R=o[-b];for(let k=10;k<R.length;k++){const q=R[k];q[17]===q[3]&&Iw(q[1],q,x,d)}if(null!==R[9]){const k=R[9];for(let q=0;q<k.length;q++){const K=k[q];Iw(K[1],K,x,d)}}}}}return d}function EI(s){const o=Ie(),u=Bt(),d=oa();vc(d+1);const h=z_(u,d);if(s.dirty&&Kd(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?Iw(u,o,d,[]):Qr(u,o,h,d);s.reset(m,jA),s.notifyOnChanges()}return!0}return!1}function CI(s,o,u,d){const h=Bt();if(h.firstCreatePass){const m=wn();(function Tw(s,o,u){null===s.queries&&(s.queries=new Fg),s.queries.track(new Ew(o,u))})(h,new wI(o,u,d),m.index),function II(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function W_(s,o,u){const d=new kg(4==(4&u));t_(s,o,d,d.destroy),null===o[19]&&(o[19]=new G_),o[19].queries.push(new H_(d))}(h,Ie(),u)}function bI(){return function uS(s,o){return s[19].queries[o].queryList}(Ie(),oa())}function z_(s,o){return s.queries.getByIndex(o)}function sy(...s){}const oy=new rn("Application Initializer");let Ql=(()=>{class s{constructor(u){this.appInits=u,this.resolve=sy,this.reject=sy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(wu(m))u.push(m);else if(I0(m)){const v=new Promise((C,b)=>{m.subscribe({complete:C,error:b})});u.push(v)}}Promise.all(u).then(()=>{d()}).catch(h=>{this.reject(h)}),0===u.length&&d(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Y(oy,8))},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})();const ay=new rn("AppId"),_f={provide:ay,useFactory:function Ow(){return`${Ra()}${Ra()}${Ra()}`},deps:[]};function Ra(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const uy=new rn("Platform Initializer"),xd=new rn("Platform ID"),Md=new rn("appBootstrapListener");let Rd=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})();const ly=new rn("LocaleId"),LI=new rn("DefaultCurrencyCode");class kw{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Fw=(()=>{class s{compileModuleSync(u){return new xu(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),m=Oo(yn(u).declarations).reduce((v,C)=>{const b=Ht(C);return b&&v.push(new sf(b)),v},[]);return new kw(d,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})();const Lw=(()=>Promise.resolve(0))();function Uw(s){"undefined"==typeof Zone?Lw.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ds{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fo(!1),this.onMicrotaskEmpty=new fo(!1),this.onStable=new fo(!1),this.onError=new fo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&u,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function qI(){let s=pt.requestAnimationFrame,o=pt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function HI(s){const o=()=>{!function ZI(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(pt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Vw(s),s.isCheckStableRunning=!0,cy(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Vw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,h,m,v,C)=>{try{return GI(s),u.invokeTask(h,m,v,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),WI(s)}},onInvoke:(u,d,h,m,v,C,b)=>{try{return GI(s),u.invoke(h,m,v,C,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),WI(s)}},onHasTask:(u,d,h,m)=>{u.hasTask(h,m),d===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,Vw(s),cy(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,d,h,m)=>(u.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ds.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ds.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,d){return this._inner.run(o,u,d)}runTask(o,u,d,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,o,$I,sy,sy);try{return m.runTask(v,u,d)}finally{m.cancelTask(v)}}runGuarded(o,u,d){return this._inner.runGuarded(o,u,d)}runOutsideAngular(o){return this._outer.run(o)}}const $I={};function cy(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Vw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function GI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function WI(s){s._nesting--,cy(s)}class vS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fo,this.onMicrotaskEmpty=new fo,this.onStable=new fo,this.onError=new fo}run(o,u,d){return o.apply(u,d)}runGuarded(o,u,d){return o.apply(u,d)}runOutsideAngular(o){return o()}runTask(o,u,d,h){return o.apply(u,d)}}let dy=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ds.assertNotInAngularZone(),Uw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Uw(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,h){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:h})}whenStable(u,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,d,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(Y(Ds))},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})(),hy=(()=>{class s{constructor(){this._applications=new Map,Bg.addToWindow(this)}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return Bg.findTestabilityInTree(this,u,d)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})();class Bw{addToWindow(o){}findTestabilityInTree(o,u,d){return null}}function wS(s){Bg=s}let qo,Bg=new Bw;const $w=new rn("AllowMultipleToken");class CS{constructor(o,u){this.name=o,this.token=u}}function zI(s,o,u=[]){const d=`Platform: ${o}`,h=new rn(d);return(m=[])=>{let v=fy();if(!v||v.injector.get($w,!1))if(s)s(u.concat(m).concat({provide:h,useValue:!0}));else{const C=u.concat(m).concat({provide:h,useValue:!0},{provide:c_,useValue:"platform"});!function Zw(s){if(qo&&!qo.destroyed&&!qo.injector.get($w,!1))throw new Re(400,"");qo=s.get(KI);const o=s.get(uy,null);o&&o.forEach(u=>u())}(Zr.create({providers:C,name:d}))}return function Hw(s){const o=fy();if(!o)throw new Re(401,"");return o}()}}function fy(){return qo&&!qo.destroyed?qo:null}let KI=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const C=function Gw(s,o){let u;return u="noop"===s?new vS:("zone.js"===s?void 0:s)||new Ds({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),b=[{provide:Ds,useValue:C}];return C.run(()=>{const x=Zr.create({providers:b,parent:this.injector,name:u.moduleType.name}),R=u.create(x),k=R.injector.get(Zc,null);if(!k)throw new Re(402,"");return C.runOutsideAngular(()=>{const q=C.onError.subscribe({next:K=>{k.handleError(K)}});R.onDestroy(()=>{gy(this._modules,R),q.unsubscribe()})}),function Ww(s,o,u){try{const d=u();return wu(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(k,C,()=>{const q=R.injector.get(Ql);return q.runInitializers(),q.donePromise.then(()=>(function U_(s){ut(s,"Expected localeId to be defined"),"string"==typeof s&&(kb=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(ly,F_)||F_),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,d=[]){const h=py({},d);return function jw(s,o,u){const d=new xu(u);return Promise.resolve(d)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(u){const d=u.injector.get(Na);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Re(403,"");u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Y(Zr))},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})();function py(s,o){return Array.isArray(o)?o.reduce(py,s):Object.assign(Object.assign({},s),o)}let Na=(()=>{class s{constructor(u,d,h,m,v){this._zone=u,this._injector=d,this._exceptionHandler=h,this._componentFactoryResolver=m,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new F.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),b=new F.y(x=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Ds.assertNotInAngularZone(),Uw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Ds.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{R.unsubscribe(),k.unsubscribe()}});this.isStable=(0,re.T)(C,b.pipe((0,ne.B)()))}bootstrap(u,d){if(!this._initStatus.done)throw new Re(405,"");let h;h=u instanceof Ig?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(h.componentType);const m=function qw(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Au),C=h.create(Zr.NULL,[],d||h.selector,m),b=C.location.nativeElement,x=C.injector.get(dy,null),R=x&&C.injector.get(hy);return x&&R&&R.registerApplication(b,x),C.onDestroy(()=>{this.detachView(C.hostView),gy(this.components,C),R&&R.unregisterApplication(b)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Re(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;gy(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Md,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(Y(Ds),Y(Zr),Y(Zc),Y(tf),Y(Ql))},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})();function gy(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let _y=!0,Pa=!1;function zw(){return Pa=!0,_y}function IS(){if(Pa)throw new Error("Cannot enable prod mode after platform setup.");_y=!1}let Kw=(()=>{class s{}return s.__NG_ELEMENT_ID__=TS,s})();function TS(s){return function Yw(s,o,u){if(Nn(s)&&!u){const d=nn(s.index,o);return new Zl(d,d)}return 47&s.type?new Zl(o[16],o):null}(wn(),Ie(),16==(16&s))}class by{constructor(){}supports(o){return Oh(o)}create(o){return new Xw(o)}}const tT=(s,o)=>o;class Xw{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||tT}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,d=this._removalsHead,h=0,m=null;for(;u||d;){const v=!d||u&&u.currentIndex<Iy(d,h,m)?u:d,C=Iy(v,h,m),b=v.currentIndex;if(v===d)h--,d=d._nextRemoved;else if(u=u._next,null==v.previousIndex)h++;else{m||(m=[]);const x=C-h,R=b-h;if(x!=R){for(let q=0;q<x;q++){const K=q<m.length?m[q]:m[q]=0,_e=K+q;R<=_e&&_e<x&&(m[q]=K+1)}m[v.previousIndex]=R-x}}C!==b&&o(v,C,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Oh(o))throw new Re(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,v,u=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)m=o[C],v=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,m,v,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,v,C),d=!0),u=u._next}else h=0,function y_(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Sl()]();let d;for(;!(d=u.next()).done;)o(d.value)}}(o,C=>{v=this._trackByFn(h,C),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,C,v,h)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,v,h),d=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,d,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,m,h)):o=this._addAfter(new eE(u,d),m,h),o}_verifyReinsertion(o,u,d,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,u,d),this._addToMoves(o,d),o}_moveAfter(o,u,d){return this._unlink(o),this._insertAfter(o,u,d),this._addToMoves(o,d),o}_addAfter(o,u,d){return this._insertAfter(o,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,d){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Zg),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,d=o._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Zg),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class eE{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tE{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const u=o._prevDup,d=o._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class Zg{constructor(){this.map=new Map}put(o){const u=o.trackById;let d=this.map.get(u);d||(d=new tE,this.map.set(u,d)),d.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Iy(s,o,u){const d=s.previousIndex;if(null===d)return d;let h=0;return u&&d<u.length&&(h=u[d]),d+o+h}class nE{constructor(){}supports(o){return o instanceof Map||v_(o)}create(){return new rE}}class rE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||v_(o)))throw new Re(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(h,d);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const d=o._prev;return u._next=o,u._prev=d,o._prev=u,d&&(d._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const d=new nT(o);return this._records.set(o,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(d=>u(o[d],d))}}class nT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ty(){return new Ru([new by])}let Ru=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(null!=d){const h=d.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||Ty()),deps:[[s,new hi,new di]]}}find(u){const d=this.factories.find(h=>h.supports(u));if(null!=d)return d;throw new Re(901,"")}}return s.\u0275prov=an({token:s,providedIn:"root",factory:Ty}),s})();function iT(){return new Dy([new nE])}let Dy=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(d){const h=d.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||iT()),deps:[[s,new hi,new di]]}}find(u){const d=this.factories.find(m=>m.supports(u));if(d)return d;throw new Re(901,"")}}return s.\u0275prov=an({token:s,providedIn:"root",factory:iT}),s})();const NS=[new nE],PS=new Ru([new by]),oT=new Dy(NS),OS=zI(null,"core",[{provide:xd,useValue:"unknown"},{provide:KI,deps:[Zr]},{provide:hy,deps:[]},{provide:Rd,deps:[]}]),uT=[{provide:Na,useClass:Na,deps:[Ds,Zr,Zc,tf,Ql]},{provide:HA,deps:[Ds],useFactory:function lT(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:Ql,useClass:Ql,deps:[[new di,oy]]},{provide:Fw,useClass:Fw,deps:[]},_f,{provide:Ru,useFactory:function kS(){return PS},deps:[]},{provide:Dy,useFactory:function FS(){return oT},deps:[]},{provide:ly,useFactory:function aT(s){return s||function iE(){return"undefined"!=typeof $localize&&$localize.locale||F_}()},deps:[[new kn(ly),new di,new hi]]},{provide:LI,useValue:"USD"}];let cT=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Y(Na))},s.\u0275mod=X({type:s}),s.\u0275inj=Fi({providers:uT}),s})()},3942:(at,Ce,L)=>{L.d(Ce,{Z:()=>Re});var l=L(2090),Q=L(4859),F=L(9681),re=L(1877);class ne{constructor(he,pe){this._delegate=he,this.firebase=pe,(0,F._addComponent)(he,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(he,pe=F._DEFAULT_ENTRY_NAME){var Le;this._delegate.checkDestroyed();const Ve=this._delegate.container.getProvider(he);return!Ve.isInitialized()&&"EXPLICIT"===(null===(Le=Ve.getComponent())||void 0===Le?void 0:Le.instantiationMode)&&Ve.initialize(),Ve.getImmediate({identifier:pe})}_removeServiceInstance(he,pe=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(pe)}_addComponent(he){(0,F._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,F._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function de(){const Ue=function ce(Ue){const he={},pe={__esModule:!0,initializeApp:function Pe(Ge,mt={}){const J=F.initializeApp(Ge,mt);if((0,l.r3)(he,J.name))return he[J.name];const me=new Ue(J,pe);return he[J.name]=me,me},app:Ve,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ae(Ge){const mt=Ge.name,J=mt.replace("-compat","");if(F._registerComponent(Ge)&&"PUBLIC"===Ge.type){const me=(ye=Ve())=>{if("function"!=typeof ye[J])throw ie.create("invalid-app-argument",{appName:mt});return ye[J]()};void 0!==Ge.serviceProps&&(0,l.ZB)(me,Ge.serviceProps),pe[J]=me,Ue.prototype[J]=function(...ye){return this._getService.bind(this,mt).apply(this,Ge.multipleInstances?ye:[])}}return"PUBLIC"===Ge.type?pe[J]:null},removeApp:function Le(Ge){delete he[Ge]},useAsService:function it(Ge,mt){return"serverAuth"===mt?null:mt},modularAPIs:F}};function Ve(Ge){if(!(0,l.r3)(he,Ge=Ge||F._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:Ge});return he[Ge]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function et(){return Object.keys(he).map(Ge=>he[Ge])}}),Ve.App=Ue,pe}(ne);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function he(pe){(0,l.ZB)(Ue,pe)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),Ue}(),H=new re.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=$;!function De(Ue){(0,F.registerVersion)("@firebase/app-compat","0.1.21",Ue)}()},9681:(at,Ce,L)=>{L.r(Ce),L.d(Ce,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>yo,_DEFAULT_ENTRY_NAME:()=>rr,_addComponent:()=>fn,_addOrOverwriteComponent:()=>ns,_apps:()=>lt,_clearComponents:()=>Qn,_components:()=>xn,_getProvider:()=>ki,_registerComponent:()=>an,_removeServiceInstance:()=>Fi,deleteApp:()=>Ir,getApp:()=>Fr,getApps:()=>xe,initializeApp:()=>ai,onLog:()=>ln,registerVersion:()=>vi,setLogLevel:()=>Tr});var l=L(5861),Q=L(4859),F=L(1877),re=L(2090);class ne{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function ve(Ye){const be=Ye.getComponent();return"VERSION"===(null==be?void 0:be.type)}(Je)){const wt=Je.getImmediate();return`${wt.library}/${wt.version}`}return null}).filter(Je=>Je).join(" ")}}const ie="@firebase/app",de=new F.Yd("@firebase/app"),rr="[DEFAULT]",ut={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},lt=new Map,xn=new Map;function fn(Ye,be){try{Ye.container.addComponent(be)}catch(Je){de.debug(`Component ${be.name} failed to register with FirebaseApp ${Ye.name}`,Je)}}function ns(Ye,be){Ye.container.addOrOverwriteComponent(be)}function an(Ye){const be=Ye.name;if(xn.has(be))return de.debug(`There were multiple attempts to register component ${be}.`),!1;xn.set(be,Ye);for(const Je of lt.values())fn(Je,Ye);return!0}function ki(Ye,be){const Je=Ye.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),Ye.container.getProvider(be)}function Fi(Ye,be,Je=rr){ki(Ye,be).clearInstance(Je)}function Qn(){xn.clear()}const un=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Fn{constructor(be,Je,wt){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=wt,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw un.create("app-deleted",{appName:this._name})}}const yo="9.6.10";function ai(Ye,be={}){"object"!=typeof be&&(be={name:be});const Je=Object.assign({name:rr,automaticDataCollectionEnabled:!1},be),wt=Je.name;if("string"!=typeof wt||!wt)throw un.create("bad-app-name",{appName:String(wt)});const $t=lt.get(wt);if($t){if((0,re.vZ)(Ye,$t.options)&&(0,re.vZ)(Je,$t.config))return $t;throw un.create("duplicate-app",{appName:wt})}const Xt=new Q.H0(wt);for(const B of xn.values())Xt.addComponent(B);const Z=new Fn(Ye,Je,Xt);return lt.set(wt,Z),Z}function Fr(Ye=rr){const be=lt.get(Ye);if(!be)throw un.create("no-app",{appName:Ye});return be}function xe(){return Array.from(lt.values())}function Ir(Ye){return rt.apply(this,arguments)}function rt(){return(rt=(0,l.Z)(function*(Ye){const be=Ye.name;lt.has(be)&&(lt.delete(be),yield Promise.all(Ye.container.getProviders().map(Je=>Je.delete())),Ye.isDeleted=!0)})).apply(this,arguments)}function vi(Ye,be,Je){var wt;let $t=null!==(wt=ut[Ye])&&void 0!==wt?wt:Ye;Je&&($t+=`-${Je}`);const Xt=$t.match(/\s|\//),Z=be.match(/\s|\//);if(Xt||Z){const B=[`Unable to register library "${$t}" with version "${be}":`];return Xt&&B.push(`library name "${$t}" contains illegal characters (whitespace or "/")`),Xt&&Z&&B.push("and"),Z&&B.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void de.warn(B.join(" "))}an(new Q.wA(`${$t}-version`,()=>({library:$t,version:be}),"VERSION"))}function ln(Ye,be){if(null!==Ye&&"function"!=typeof Ye)throw un.create("invalid-log-argument");(0,F.Am)(Ye,be)}function Tr(Ye){(0,F.Ub)(Ye)}const Mn="firebase-heartbeat-store";let Jn=null;function ms(){return Jn||(Jn=(0,re.X3)("firebase-heartbeat-database",1,(Ye,be)=>{0===be&&Ye.createObjectStore(Mn)}).catch(Ye=>{throw un.create("storage-open",{originalErrorMessage:Ye.message})})),Jn}function Lt(){return(Lt=(0,l.Z)(function*(Ye){try{return(yield ms()).transaction(Mn).objectStore(Mn).get(Ls(Ye))}catch(be){throw un.create("storage-get",{originalErrorMessage:be.message})}})).apply(this,arguments)}function ot(Ye,be){return bt.apply(this,arguments)}function bt(){return(bt=(0,l.Z)(function*(Ye,be){try{const wt=(yield ms()).transaction(Mn,"readwrite");return yield wt.objectStore(Mn).put(be,Ls(Ye)),wt.complete}catch(Je){throw un.create("storage-set",{originalErrorMessage:Je.message})}})).apply(this,arguments)}function Ls(Ye){return`${Ye.name}!${Ye.options.appId}`}class Cn{constructor(be){this.container=be,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new _t(Je),this._heartbeatsCachePromise=this._storage.read().then(wt=>(this._heartbeatsCache=wt,wt))}triggerHeartbeat(){var be=this;return(0,l.Z)(function*(){const wt=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$t=Dr();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==$t&&!be._heartbeatsCache.heartbeats.some(Xt=>Xt.date===$t))return be._heartbeatsCache.heartbeats.push({date:$t,agent:wt}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(Xt=>{const Z=new Date(Xt.date).valueOf();return Date.now()-Z<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,l.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const Je=Dr(),{heartbeatsToSend:wt,unsentEntries:$t}=function ui(Ye,be=1024){const Je=[];let wt=Ye.slice();for(const $t of Ye){const Xt=Je.find(Z=>Z.agent===$t.agent);if(Xt){if(Xt.dates.push($t.date),Rn(Je)>be){Xt.dates.pop();break}}else if(Je.push({agent:$t.agent,dates:[$t.date]}),Rn(Je)>be){Je.pop();break}wt=wt.slice(1)}return{heartbeatsToSend:Je,unsentEntries:wt}}(be._heartbeatsCache.heartbeats),Xt=(0,re.L)(JSON.stringify({version:2,heartbeats:wt}));return be._heartbeatsCache.lastSentHeartbeatDate=Je,$t.length>0?(be._heartbeatsCache.heartbeats=$t,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),Xt})()}}function Dr(){return(new Date).toISOString().substring(0,10)}class _t{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,l.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function ju(Ye){return Lt.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var Je=this;return(0,l.Z)(function*(){var wt;if(yield Je._canUseIndexedDBPromise){const Xt=yield Je.read();return ot(Je.app,{lastSentHeartbeatDate:null!==(wt=be.lastSentHeartbeatDate)&&void 0!==wt?wt:Xt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var Je=this;return(0,l.Z)(function*(){var wt;if(yield Je._canUseIndexedDBPromise){const Xt=yield Je.read();return ot(Je.app,{lastSentHeartbeatDate:null!==(wt=be.lastSentHeartbeatDate)&&void 0!==wt?wt:Xt.lastSentHeartbeatDate,heartbeats:[...Xt.heartbeats,...be.heartbeats]})}})()}}function Rn(Ye){return(0,re.L)(JSON.stringify({version:2,heartbeats:Ye})).length}!function Ut(Ye){an(new Q.wA("platform-logger",be=>new ne(be),"PRIVATE")),an(new Q.wA("heartbeat",be=>new Cn(be),"PRIVATE")),vi(ie,"0.7.20",Ye),vi(ie,"0.7.20","esm2017"),vi("fire-js","")}("")},4859:(at,Ce,L)=>{L.d(Ce,{H0:()=>ce,wA:()=>F,zt:()=>ne});var l=L(5861),Q=L(2090);class F{constructor($,H,te){this.name=$,this.instanceFactory=H,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const re="[DEFAULT]";class ne{constructor($,H){this.name=$,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const H=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(H)){const te=new Q.BH;if(this.instancesDeferred.set(H,te),this.isInitialized(H)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:H});$e&&te.resolve($e)}catch($e){}}return this.instancesDeferred.get(H).promise}getImmediate($){var H;const te=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),$e=null!==(H=null==$?void 0:$.optional)&&void 0!==H&&H;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(De){if($e)return null;throw De}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ie(de){return"EAGER"===de.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:re})}catch(H){}for(const[H,te]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(H);try{const De=this.getOrInitializeService({instanceIdentifier:$e});te.resolve(De)}catch(De){}}}}clearInstance($=re){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,l.Z)(function*(){const H=Array.from($.instances.values());yield Promise.all([...H.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...H.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=re){return this.instances.has($)}getOptions($=re){return this.instancesOptions.get($)||{}}initialize($={}){const{options:H={}}=$,te=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:te,options:H});for(const[De,Re]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(De)&&Re.resolve($e);return $e}onInit($,H){var te;const $e=this.normalizeInstanceIdentifier(H),De=null!==(te=this.onInitCallbacks.get($e))&&void 0!==te?te:new Set;De.add($),this.onInitCallbacks.set($e,De);const Re=this.instances.get($e);return Re&&$(Re,$e),()=>{De.delete($)}}invokeOnInitCallbacks($,H){const te=this.onInitCallbacks.get(H);if(te)for(const $e of te)try{$e($,H)}catch(De){}}getOrInitializeService({instanceIdentifier:$,options:H={}}){let te=this.instances.get($);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(de=$,de===re?void 0:de),options:H}),this.instances.set($,te),this.instancesOptions.set($,H),this.invokeOnInitCallbacks(te,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,te)}catch($e){}var de;return te||null}normalizeInstanceIdentifier($=re){return this.component?this.component.multipleInstances?$:re:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor($){this.name=$,this.providers=new Map}addComponent($){const H=this.getProvider($.name);if(H.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);H.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const H=new ne($,this);return this.providers.set($,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(at,Ce,L)=>{L.d(Ce,{Am:()=>de,Ub:()=>ce,Yd:()=>ie,in:()=>Q});const l=[];var Q=(()=>{return($=Q||(Q={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Q;var $})();const F={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},re=Q.INFO,ne={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},ve=($,H,...te)=>{if(H<$.logLevel)return;const $e=(new Date).toISOString(),De=ne[H];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[De](`[${$e}]  ${$.name}:`,...te)};class ie{constructor(H){this.name=H,this._logLevel=re,this._logHandler=ve,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in Q))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?F[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...H),this._logHandler(this,Q.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...H),this._logHandler(this,Q.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...H),this._logHandler(this,Q.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...H),this._logHandler(this,Q.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...H),this._logHandler(this,Q.ERROR,...H)}}function ce($){l.forEach(H=>{H.setLogLevel($)})}function de($,H){for(const te of l){let $e=null;H&&H.level&&($e=F[H.level]),te.userLogHandler=null===$?null:(De,Re,...Ue)=>{const he=Ue.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch(Le){return null}}).filter(pe=>pe).join(" ");Re>=(null!=$e?$e:De.logLevel)&&$({level:Q[Re].toLowerCase(),message:he,args:Ue,type:De.name})}}}},5861:(at,Ce,L)=>{function l(F,re,ne,ve,ie,ce,de){try{var $=F[ce](de),H=$.value}catch(te){return void ne(te)}$.done?re(H):Promise.resolve(H).then(ve,ie)}function Q(F){return function(){var re=this,ne=arguments;return new Promise(function(ve,ie){var ce=F.apply(re,ne);function de(H){l(ce,ve,ie,de,$,"next",H)}function $(H){l(ce,ve,ie,de,$,"throw",H)}de(void 0)})}}L.d(Ce,{Z:()=>Q})}},at=>{at(at.s=3932)}]);